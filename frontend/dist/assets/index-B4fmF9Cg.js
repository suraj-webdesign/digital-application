var wa=Object.defineProperty;var ar=r=>{throw TypeError(r)};var Na=(r,t,s)=>t in r?wa(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s;var vs=(r,t,s)=>Na(r,typeof t!="symbol"?t+"":t,s),bs=(r,t,s)=>t.has(r)||ar("Cannot "+s);var b=(r,t,s)=>(bs(r,t,"read from private field"),s?s.call(r):t.get(r)),ie=(r,t,s)=>t.has(r)?ar("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(r):t.set(r,s),Y=(r,t,s,a)=>(bs(r,t,"write to private field"),a?a.call(r,s):t.set(r,s),s),ve=(r,t,s)=>(bs(r,t,"access private method"),s);var Zt=(r,t,s,a)=>({set _(n){Y(r,t,n,s)},get _(){return b(r,t,a)}});import{r as h,a as Sa,u as ka,b as Kt,L as ce,c as Da,R as as,B as Ca,d as Aa,e as Ve,N as nr}from"./vendor-COcEUdcw.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function s(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(n){if(n.ep)return;n.ep=!0;const i=s(n);fetch(n.href,i)}})();var Tr={exports:{}},ms={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _a=h,Ea=Symbol.for("react.element"),Pa=Symbol.for("react.fragment"),Ra=Object.prototype.hasOwnProperty,Ia=_a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,La={key:!0,ref:!0,__self:!0,__source:!0};function Fr(r,t,s){var a,n={},i=null,o=null;s!==void 0&&(i=""+s),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(a in t)Ra.call(t,a)&&!La.hasOwnProperty(a)&&(n[a]=t[a]);if(r&&r.defaultProps)for(a in t=r.defaultProps,t)n[a]===void 0&&(n[a]=t[a]);return{$$typeof:Ea,type:r,key:i,ref:o,props:n,_owner:Ia.current}}ms.Fragment=Pa;ms.jsx=Fr;ms.jsxs=Fr;Tr.exports=ms;var e=Tr.exports,As={},ir=Sa;As.createRoot=ir.createRoot,As.hydrateRoot=ir.hydrateRoot;const Pe=()=>{const[r,t]=h.useState([]);return{toasts:r,toast:i=>{const o=Date.now().toString(),l={id:o,duration:5e3,...i};return t(d=>[...d,l]),setTimeout(()=>{t(d=>d.filter(m=>m.id!==o))},l.duration),o},dismiss:i=>{t(o=>o.filter(l=>l.id!==i))},dismissAll:()=>{t([])}}};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ta=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Fa=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,s,a)=>a?a.toUpperCase():s.toLowerCase()),or=r=>{const t=Fa(r);return t.charAt(0).toUpperCase()+t.slice(1)},Or=(...r)=>r.filter((t,s,a)=>!!t&&t.trim()!==""&&a.indexOf(t)===s).join(" ").trim(),Oa=r=>{for(const t in r)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ma={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $a=h.forwardRef(({color:r="currentColor",size:t=24,strokeWidth:s=2,absoluteStrokeWidth:a,className:n="",children:i,iconNode:o,...l},d)=>h.createElement("svg",{ref:d,...Ma,width:t,height:t,stroke:r,strokeWidth:a?Number(s)*24/Number(t):s,className:Or("lucide",n),...!i&&!Oa(l)&&{"aria-hidden":"true"},...l},[...o.map(([m,p])=>h.createElement(m,p)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=(r,t)=>{const s=h.forwardRef(({className:a,...n},i)=>h.createElement($a,{ref:i,iconNode:t,className:Or(`lucide-${Ta(or(r))}`,`lucide-${r}`,a),...n}));return s.displayName=or(r),s};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ua=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],es=H("activity",Ua);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const za=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],Ba=H("archive",za);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ha=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Vt=H("arrow-left",Ha);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qa=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],js=H("bell",qa);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Va=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],Ga=H("bot",Va);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wa=[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]],Ya=H("building",Wa);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qa=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Bs=H("calendar",Qa);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ka=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Ot=H("chart-column",Ka);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ja=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Mr=H("chevron-down",Ja);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xa=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Za=H("chevron-right",Xa);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const en=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],tn=H("circle-alert",en);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sn=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ee=H("circle-check-big",sn);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rn=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],an=H("circle-question-mark",rn);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nn=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],vt=H("circle-x",nn);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const on=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],qe=H("clock",on);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ln=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],cn=H("crown",ln);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dn=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Re=H("download",dn);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hn=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],It=H("eye-off",hn);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const un=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Me=H("eye",un);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mn=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],ae=H("file-text",mn);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pn=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],xn=H("graduation-cap",pn);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gn=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],cs=H("house",gn);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fn=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],ds=H("loader-circle",fn);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yn=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],ht=H("lock",yn);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vn=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],lr=H("log-in",vn);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bn=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],_s=H("log-out",bn);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jn=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Ht=H("mail",jn);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wn=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Nn=H("map-pin",wn);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sn=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],kn=H("menu",Sn);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dn=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],$r=H("moon",Dn);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cn=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],An=H("pen-line",Cn);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _n=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],Qe=H("pen-tool",_n);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const En=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Pn=H("phone",En);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rn=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],In=H("plus",Rn);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ln=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Se=H("refresh-cw",Ln);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tn=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Es=H("save",Tn);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fn=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],cr=H("search",Fn);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const On=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Ps=H("send",On);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mn=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],qt=H("settings",Mn);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $n=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],wt=H("shield",$n);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Un=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Mt=H("square-pen",Un);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zn=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Ur=H("sun",zn);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bn=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],zr=H("trash-2",Bn);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hn=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],qn=H("trending-up",Hn);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vn=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],tt=H("triangle-alert",Vn);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gn=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Wn=H("upload",Gn);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yn=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],ws=H("user-check",Yn);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qn=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Kn=H("user-plus",Qn);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jn=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],dr=H("user-x",Jn);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xn=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],he=H("user",Xn);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zn=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],ut=H("users",Zn);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ei=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],hs=H("wifi-off",ei);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ti=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],Br=H("wifi",ti);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const si=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],st=H("x",si);function hr(r,t){if(typeof r=="function")return r(t);r!=null&&(r.current=t)}function ri(...r){return t=>{let s=!1;const a=r.map(n=>{const i=hr(n,t);return!s&&typeof i=="function"&&(s=!0),i});if(s)return()=>{for(let n=0;n<a.length;n++){const i=a[n];typeof i=="function"?i():hr(r[n],null)}}}}function ai(r){const t=ii(r),s=h.forwardRef((a,n)=>{const{children:i,...o}=a,l=h.Children.toArray(i),d=l.find(li);if(d){const m=d.props.children,p=l.map(j=>j===d?h.Children.count(m)>1?h.Children.only(null):h.isValidElement(m)?m.props.children:null:j);return e.jsx(t,{...o,ref:n,children:h.isValidElement(m)?h.cloneElement(m,void 0,p):null})}return e.jsx(t,{...o,ref:n,children:i})});return s.displayName=`${r}.Slot`,s}var ni=ai("Slot");function ii(r){const t=h.forwardRef((s,a)=>{const{children:n,...i}=s;if(h.isValidElement(n)){const o=di(n),l=ci(i,n.props);return n.type!==h.Fragment&&(l.ref=a?ri(a,o):o),h.cloneElement(n,l)}return h.Children.count(n)>1?h.Children.only(null):null});return t.displayName=`${r}.SlotClone`,t}var oi=Symbol("radix.slottable");function li(r){return h.isValidElement(r)&&typeof r.type=="function"&&"__radixId"in r.type&&r.type.__radixId===oi}function ci(r,t){const s={...t};for(const a in t){const n=r[a],i=t[a];/^on[A-Z]/.test(a)?n&&i?s[a]=(...l)=>{const d=i(...l);return n(...l),d}:n&&(s[a]=n):a==="style"?s[a]={...n,...i}:a==="className"&&(s[a]=[n,i].filter(Boolean).join(" "))}return{...r,...s}}function di(r){var a,n;let t=(a=Object.getOwnPropertyDescriptor(r.props,"ref"))==null?void 0:a.get,s=t&&"isReactWarning"in t&&t.isReactWarning;return s?r.ref:(t=(n=Object.getOwnPropertyDescriptor(r,"ref"))==null?void 0:n.get,s=t&&"isReactWarning"in t&&t.isReactWarning,s?r.props.ref:r.props.ref||r.ref)}function Hr(r){var t,s,a="";if(typeof r=="string"||typeof r=="number")a+=r;else if(typeof r=="object")if(Array.isArray(r)){var n=r.length;for(t=0;t<n;t++)r[t]&&(s=Hr(r[t]))&&(a&&(a+=" "),a+=s)}else for(s in r)r[s]&&(a&&(a+=" "),a+=s);return a}function hi(){for(var r,t,s=0,a="",n=arguments.length;s<n;s++)(r=arguments[s])&&(t=Hr(r))&&(a&&(a+=" "),a+=t);return a}const Hs="-",ui=r=>{const t=pi(r),{conflictingClassGroups:s,conflictingClassGroupModifiers:a}=r;return{getClassGroupId:o=>{const l=o.split(Hs);return l[0]===""&&l.length!==1&&l.shift(),qr(l,t)||mi(o)},getConflictingClassGroupIds:(o,l)=>{const d=s[o]||[];return l&&a[o]?[...d,...a[o]]:d}}},qr=(r,t)=>{var o;if(r.length===0)return t.classGroupId;const s=r[0],a=t.nextPart.get(s),n=a?qr(r.slice(1),a):void 0;if(n)return n;if(t.validators.length===0)return;const i=r.join(Hs);return(o=t.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},ur=/^\[(.+)\]$/,mi=r=>{if(ur.test(r)){const t=ur.exec(r)[1],s=t==null?void 0:t.substring(0,t.indexOf(":"));if(s)return"arbitrary.."+s}},pi=r=>{const{theme:t,prefix:s}=r,a={nextPart:new Map,validators:[]};return gi(Object.entries(r.classGroups),s).forEach(([i,o])=>{Rs(o,a,i,t)}),a},Rs=(r,t,s,a)=>{r.forEach(n=>{if(typeof n=="string"){const i=n===""?t:mr(t,n);i.classGroupId=s;return}if(typeof n=="function"){if(xi(n)){Rs(n(a),t,s,a);return}t.validators.push({validator:n,classGroupId:s});return}Object.entries(n).forEach(([i,o])=>{Rs(o,mr(t,i),s,a)})})},mr=(r,t)=>{let s=r;return t.split(Hs).forEach(a=>{s.nextPart.has(a)||s.nextPart.set(a,{nextPart:new Map,validators:[]}),s=s.nextPart.get(a)}),s},xi=r=>r.isThemeGetter,gi=(r,t)=>t?r.map(([s,a])=>{const n=a.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,l])=>[t+o,l])):i);return[s,n]}):r,fi=r=>{if(r<1)return{get:()=>{},set:()=>{}};let t=0,s=new Map,a=new Map;const n=(i,o)=>{s.set(i,o),t++,t>r&&(t=0,a=s,s=new Map)};return{get(i){let o=s.get(i);if(o!==void 0)return o;if((o=a.get(i))!==void 0)return n(i,o),o},set(i,o){s.has(i)?s.set(i,o):n(i,o)}}},Vr="!",yi=r=>{const{separator:t,experimentalParseClassName:s}=r,a=t.length===1,n=t[0],i=t.length,o=l=>{const d=[];let m=0,p=0,j;for(let x=0;x<l.length;x++){let y=l[x];if(m===0){if(y===n&&(a||l.slice(x,x+i)===t)){d.push(l.slice(p,x)),p=x+i;continue}if(y==="/"){j=x;continue}}y==="["?m++:y==="]"&&m--}const f=d.length===0?l:l.substring(p),w=f.startsWith(Vr),L=w?f.substring(1):f,v=j&&j>p?j-p:void 0;return{modifiers:d,hasImportantModifier:w,baseClassName:L,maybePostfixModifierPosition:v}};return s?l=>s({className:l,parseClassName:o}):o},vi=r=>{if(r.length<=1)return r;const t=[];let s=[];return r.forEach(a=>{a[0]==="["?(t.push(...s.sort(),a),s=[]):s.push(a)}),t.push(...s.sort()),t},bi=r=>({cache:fi(r.cacheSize),parseClassName:yi(r),...ui(r)}),ji=/\s+/,wi=(r,t)=>{const{parseClassName:s,getClassGroupId:a,getConflictingClassGroupIds:n}=t,i=[],o=r.trim().split(ji);let l="";for(let d=o.length-1;d>=0;d-=1){const m=o[d],{modifiers:p,hasImportantModifier:j,baseClassName:f,maybePostfixModifierPosition:w}=s(m);let L=!!w,v=a(L?f.substring(0,w):f);if(!v){if(!L){l=m+(l.length>0?" "+l:l);continue}if(v=a(f),!v){l=m+(l.length>0?" "+l:l);continue}L=!1}const x=vi(p).join(":"),y=j?x+Vr:x,T=y+v;if(i.includes(T))continue;i.push(T);const V=n(v,L);for(let R=0;R<V.length;++R){const $=V[R];i.push(y+$)}l=m+(l.length>0?" "+l:l)}return l};function Ni(){let r=0,t,s,a="";for(;r<arguments.length;)(t=arguments[r++])&&(s=Gr(t))&&(a&&(a+=" "),a+=s);return a}const Gr=r=>{if(typeof r=="string")return r;let t,s="";for(let a=0;a<r.length;a++)r[a]&&(t=Gr(r[a]))&&(s&&(s+=" "),s+=t);return s};function Si(r,...t){let s,a,n,i=o;function o(d){const m=t.reduce((p,j)=>j(p),r());return s=bi(m),a=s.cache.get,n=s.cache.set,i=l,l(d)}function l(d){const m=a(d);if(m)return m;const p=wi(d,s);return n(d,p),p}return function(){return i(Ni.apply(null,arguments))}}const de=r=>{const t=s=>s[r]||[];return t.isThemeGetter=!0,t},Wr=/^\[(?:([a-z-]+):)?(.+)\]$/i,ki=/^\d+\/\d+$/,Di=new Set(["px","full","screen"]),Ci=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Ai=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,_i=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Ei=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Pi=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Xe=r=>Nt(r)||Di.has(r)||ki.test(r),rt=r=>Lt(r,"length",$i),Nt=r=>!!r&&!Number.isNaN(Number(r)),Ns=r=>Lt(r,"number",Nt),$t=r=>!!r&&Number.isInteger(Number(r)),Ri=r=>r.endsWith("%")&&Nt(r.slice(0,-1)),K=r=>Wr.test(r),at=r=>Ci.test(r),Ii=new Set(["length","size","percentage"]),Li=r=>Lt(r,Ii,Yr),Ti=r=>Lt(r,"position",Yr),Fi=new Set(["image","url"]),Oi=r=>Lt(r,Fi,zi),Mi=r=>Lt(r,"",Ui),Ut=()=>!0,Lt=(r,t,s)=>{const a=Wr.exec(r);return a?a[1]?typeof t=="string"?a[1]===t:t.has(a[1]):s(a[2]):!1},$i=r=>Ai.test(r)&&!_i.test(r),Yr=()=>!1,Ui=r=>Ei.test(r),zi=r=>Pi.test(r),Bi=()=>{const r=de("colors"),t=de("spacing"),s=de("blur"),a=de("brightness"),n=de("borderColor"),i=de("borderRadius"),o=de("borderSpacing"),l=de("borderWidth"),d=de("contrast"),m=de("grayscale"),p=de("hueRotate"),j=de("invert"),f=de("gap"),w=de("gradientColorStops"),L=de("gradientColorStopPositions"),v=de("inset"),x=de("margin"),y=de("opacity"),T=de("padding"),V=de("saturate"),R=de("scale"),$=de("sepia"),I=de("skew"),B=de("space"),S=de("translate"),C=()=>["auto","contain","none"],O=()=>["auto","hidden","clip","visible","scroll"],D=()=>["auto",K,t],A=()=>[K,t],E=()=>["",Xe,rt],J=()=>["auto",Nt,K],ue=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],le=()=>["solid","dashed","dotted","double","none"],xe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ke=()=>["start","end","center","between","around","evenly","stretch"],N=()=>["","0",K],X=()=>["auto","avoid","all","avoid-page","page","left","right","column"],G=()=>[Nt,K];return{cacheSize:500,separator:":",theme:{colors:[Ut],spacing:[Xe,rt],blur:["none","",at,K],brightness:G(),borderColor:[r],borderRadius:["none","","full",at,K],borderSpacing:A(),borderWidth:E(),contrast:G(),grayscale:N(),hueRotate:G(),invert:N(),gap:A(),gradientColorStops:[r],gradientColorStopPositions:[Ri,rt],inset:D(),margin:D(),opacity:G(),padding:A(),saturate:G(),scale:G(),sepia:N(),skew:G(),space:A(),translate:A()},classGroups:{aspect:[{aspect:["auto","square","video",K]}],container:["container"],columns:[{columns:[at]}],"break-after":[{"break-after":X()}],"break-before":[{"break-before":X()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ue(),K]}],overflow:[{overflow:O()}],"overflow-x":[{"overflow-x":O()}],"overflow-y":[{"overflow-y":O()}],overscroll:[{overscroll:C()}],"overscroll-x":[{"overscroll-x":C()}],"overscroll-y":[{"overscroll-y":C()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",$t,K]}],basis:[{basis:D()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",K]}],grow:[{grow:N()}],shrink:[{shrink:N()}],order:[{order:["first","last","none",$t,K]}],"grid-cols":[{"grid-cols":[Ut]}],"col-start-end":[{col:["auto",{span:["full",$t,K]},K]}],"col-start":[{"col-start":J()}],"col-end":[{"col-end":J()}],"grid-rows":[{"grid-rows":[Ut]}],"row-start-end":[{row:["auto",{span:[$t,K]},K]}],"row-start":[{"row-start":J()}],"row-end":[{"row-end":J()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",K]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",K]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...ke()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...ke(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...ke(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[T]}],px:[{px:[T]}],py:[{py:[T]}],ps:[{ps:[T]}],pe:[{pe:[T]}],pt:[{pt:[T]}],pr:[{pr:[T]}],pb:[{pb:[T]}],pl:[{pl:[T]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[B]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[B]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",K,t]}],"min-w":[{"min-w":[K,t,"min","max","fit"]}],"max-w":[{"max-w":[K,t,"none","full","min","max","fit","prose",{screen:[at]},at]}],h:[{h:[K,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[K,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[K,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[K,t,"auto","min","max","fit"]}],"font-size":[{text:["base",at,rt]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Ns]}],"font-family":[{font:[Ut]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",K]}],"line-clamp":[{"line-clamp":["none",Nt,Ns]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Xe,K]}],"list-image":[{"list-image":["none",K]}],"list-style-type":[{list:["none","disc","decimal",K]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[r]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[r]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...le(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Xe,rt]}],"underline-offset":[{"underline-offset":["auto",Xe,K]}],"text-decoration-color":[{decoration:[r]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:A()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",K]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",K]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ue(),Ti]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Li]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Oi]}],"bg-color":[{bg:[r]}],"gradient-from-pos":[{from:[L]}],"gradient-via-pos":[{via:[L]}],"gradient-to-pos":[{to:[L]}],"gradient-from":[{from:[w]}],"gradient-via":[{via:[w]}],"gradient-to":[{to:[w]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:[...le(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:le()}],"border-color":[{border:[n]}],"border-color-x":[{"border-x":[n]}],"border-color-y":[{"border-y":[n]}],"border-color-s":[{"border-s":[n]}],"border-color-e":[{"border-e":[n]}],"border-color-t":[{"border-t":[n]}],"border-color-r":[{"border-r":[n]}],"border-color-b":[{"border-b":[n]}],"border-color-l":[{"border-l":[n]}],"divide-color":[{divide:[n]}],"outline-style":[{outline:["",...le()]}],"outline-offset":[{"outline-offset":[Xe,K]}],"outline-w":[{outline:[Xe,rt]}],"outline-color":[{outline:[r]}],"ring-w":[{ring:E()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[r]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[Xe,rt]}],"ring-offset-color":[{"ring-offset":[r]}],shadow:[{shadow:["","inner","none",at,Mi]}],"shadow-color":[{shadow:[Ut]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":[...xe(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":xe()}],filter:[{filter:["","none"]}],blur:[{blur:[s]}],brightness:[{brightness:[a]}],contrast:[{contrast:[d]}],"drop-shadow":[{"drop-shadow":["","none",at,K]}],grayscale:[{grayscale:[m]}],"hue-rotate":[{"hue-rotate":[p]}],invert:[{invert:[j]}],saturate:[{saturate:[V]}],sepia:[{sepia:[$]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[s]}],"backdrop-brightness":[{"backdrop-brightness":[a]}],"backdrop-contrast":[{"backdrop-contrast":[d]}],"backdrop-grayscale":[{"backdrop-grayscale":[m]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[p]}],"backdrop-invert":[{"backdrop-invert":[j]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[V]}],"backdrop-sepia":[{"backdrop-sepia":[$]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",K]}],duration:[{duration:G()}],ease:[{ease:["linear","in","out","in-out",K]}],delay:[{delay:G()}],animate:[{animate:["none","spin","ping","pulse","bounce",K]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[R]}],"scale-x":[{"scale-x":[R]}],"scale-y":[{"scale-y":[R]}],rotate:[{rotate:[$t,K]}],"translate-x":[{"translate-x":[S]}],"translate-y":[{"translate-y":[S]}],"skew-x":[{"skew-x":[I]}],"skew-y":[{"skew-y":[I]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",K]}],accent:[{accent:["auto",r]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",K]}],"caret-color":[{caret:[r]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":A()}],"scroll-mx":[{"scroll-mx":A()}],"scroll-my":[{"scroll-my":A()}],"scroll-ms":[{"scroll-ms":A()}],"scroll-me":[{"scroll-me":A()}],"scroll-mt":[{"scroll-mt":A()}],"scroll-mr":[{"scroll-mr":A()}],"scroll-mb":[{"scroll-mb":A()}],"scroll-ml":[{"scroll-ml":A()}],"scroll-p":[{"scroll-p":A()}],"scroll-px":[{"scroll-px":A()}],"scroll-py":[{"scroll-py":A()}],"scroll-ps":[{"scroll-ps":A()}],"scroll-pe":[{"scroll-pe":A()}],"scroll-pt":[{"scroll-pt":A()}],"scroll-pr":[{"scroll-pr":A()}],"scroll-pb":[{"scroll-pb":A()}],"scroll-pl":[{"scroll-pl":A()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",K]}],fill:[{fill:[r,"none"]}],"stroke-w":[{stroke:[Xe,rt,Ns]}],stroke:[{stroke:[r,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Hi=Si(Bi);function pe(...r){return Hi(hi(r))}const g=h.forwardRef(({className:r,variant:t="default",size:s="default",asChild:a=!1,...n},i)=>{const o="inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background",l={default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"underline-offset-4 hover:underline text-primary"},d={default:"h-10 py-2 px-4",sm:"h-9 px-3 rounded-md",lg:"h-11 px-8 rounded-md",icon:"h-10 w-10"},m=a?ni:"button";return e.jsx(m,{className:pe(o,l[t],d[s],r),ref:i,...n})});g.displayName="Button";const qi=({id:r,title:t,description:s,variant:a="default",onDismiss:n})=>{const[i,o]=h.useState(!1);h.useEffect(()=>{const d=setTimeout(()=>o(!0),100);return()=>clearTimeout(d)},[]);const l=()=>{switch(a){case"destructive":return"bg-destructive text-destructive-foreground border-destructive";case"success":return"bg-green-600 text-white border-green-700";case"warning":return"bg-yellow-600 text-white border-yellow-700";default:return"bg-background text-foreground border-border"}};return e.jsx("div",{className:`
        fixed bottom-4 right-4 z-50 max-w-sm w-full
        border rounded-lg shadow-lg p-4 transition-all duration-300
        ${l()}
        ${i?"translate-y-0 opacity-100":"translate-y-2 opacity-0"}
      `,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold",children:t}),s&&e.jsx("p",{className:"text-sm mt-1 opacity-90",children:s})]}),e.jsx(g,{variant:"ghost",size:"sm",onClick:()=>n(r),className:"ml-2 h-6 w-6 p-0 hover:bg-black/10",children:e.jsx(st,{className:"h-4 w-4"})})]})})},Vi=()=>{const{toasts:r,dismiss:t}=Pe();return e.jsx(e.Fragment,{children:r.map(s=>e.jsx(qi,{...s,onDismiss:t},s.id))})},Gi=()=>null,Qr=h.forwardRef(({className:r,children:t,...s},a)=>e.jsx("div",{ref:a,className:pe("",r),...s,children:t}));Qr.displayName="TooltipProvider";var ps=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(r){return this.listeners.add(r),this.onSubscribe(),()=>{this.listeners.delete(r),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},xs=typeof window>"u"||"Deno"in globalThis;function Ue(){}function Wi(r,t){return typeof r=="function"?r(t):r}function Yi(r){return typeof r=="number"&&r>=0&&r!==1/0}function Qi(r,t){return Math.max(r+(t||0)-Date.now(),0)}function Is(r,t){return typeof r=="function"?r(t):r}function Ki(r,t){return typeof r=="function"?r(t):r}function pr(r,t){const{type:s="all",exact:a,fetchStatus:n,predicate:i,queryKey:o,stale:l}=r;if(o){if(a){if(t.queryHash!==qs(o,t.options))return!1}else if(!Wt(t.queryKey,o))return!1}if(s!=="all"){const d=t.isActive();if(s==="active"&&!d||s==="inactive"&&d)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||n&&n!==t.state.fetchStatus||i&&!i(t))}function xr(r,t){const{exact:s,status:a,predicate:n,mutationKey:i}=r;if(i){if(!t.options.mutationKey)return!1;if(s){if(Gt(t.options.mutationKey)!==Gt(i))return!1}else if(!Wt(t.options.mutationKey,i))return!1}return!(a&&t.state.status!==a||n&&!n(t))}function qs(r,t){return((t==null?void 0:t.queryKeyHashFn)||Gt)(r)}function Gt(r){return JSON.stringify(r,(t,s)=>Ls(s)?Object.keys(s).sort().reduce((a,n)=>(a[n]=s[n],a),{}):s)}function Wt(r,t){return r===t?!0:typeof r!=typeof t?!1:r&&t&&typeof r=="object"&&typeof t=="object"?Object.keys(t).every(s=>Wt(r[s],t[s])):!1}var Ji=Object.prototype.hasOwnProperty;function Kr(r,t){if(r===t)return r;const s=gr(r)&&gr(t);if(!s&&!(Ls(r)&&Ls(t)))return t;const n=(s?r:Object.keys(r)).length,i=s?t:Object.keys(t),o=i.length,l=s?new Array(o):{};let d=0;for(let m=0;m<o;m++){const p=s?m:i[m],j=r[p],f=t[p];if(j===f){l[p]=j,(s?m<n:Ji.call(r,p))&&d++;continue}if(j===null||f===null||typeof j!="object"||typeof f!="object"){l[p]=f;continue}const w=Kr(j,f);l[p]=w,w===j&&d++}return n===o&&d===n?r:l}function gr(r){return Array.isArray(r)&&r.length===Object.keys(r).length}function Ls(r){if(!fr(r))return!1;const t=r.constructor;if(t===void 0)return!0;const s=t.prototype;return!(!fr(s)||!s.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(r)!==Object.prototype)}function fr(r){return Object.prototype.toString.call(r)==="[object Object]"}function Xi(r){return new Promise(t=>{setTimeout(t,r)})}function Zi(r,t,s){return typeof s.structuralSharing=="function"?s.structuralSharing(r,t):s.structuralSharing!==!1?Kr(r,t):t}function eo(r,t,s=0){const a=[...r,t];return s&&a.length>s?a.slice(1):a}function to(r,t,s=0){const a=[t,...r];return s&&a.length>s?a.slice(0,-1):a}var Vs=Symbol();function Jr(r,t){return!r.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!r.queryFn||r.queryFn===Vs?()=>Promise.reject(new Error(`Missing queryFn: '${r.queryHash}'`)):r.queryFn}var pt,it,St,Cr,so=(Cr=class extends ps{constructor(){super();ie(this,pt);ie(this,it);ie(this,St);Y(this,St,t=>{if(!xs&&window.addEventListener){const s=()=>t();return window.addEventListener("visibilitychange",s,!1),()=>{window.removeEventListener("visibilitychange",s)}}})}onSubscribe(){b(this,it)||this.setEventListener(b(this,St))}onUnsubscribe(){var t;this.hasListeners()||((t=b(this,it))==null||t.call(this),Y(this,it,void 0))}setEventListener(t){var s;Y(this,St,t),(s=b(this,it))==null||s.call(this),Y(this,it,t(a=>{typeof a=="boolean"?this.setFocused(a):this.onFocus()}))}setFocused(t){b(this,pt)!==t&&(Y(this,pt,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(s=>{s(t)})}isFocused(){var t;return typeof b(this,pt)=="boolean"?b(this,pt):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},pt=new WeakMap,it=new WeakMap,St=new WeakMap,Cr),Xr=new so,kt,ot,Dt,Ar,ro=(Ar=class extends ps{constructor(){super();ie(this,kt,!0);ie(this,ot);ie(this,Dt);Y(this,Dt,t=>{if(!xs&&window.addEventListener){const s=()=>t(!0),a=()=>t(!1);return window.addEventListener("online",s,!1),window.addEventListener("offline",a,!1),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",a)}}})}onSubscribe(){b(this,ot)||this.setEventListener(b(this,Dt))}onUnsubscribe(){var t;this.hasListeners()||((t=b(this,ot))==null||t.call(this),Y(this,ot,void 0))}setEventListener(t){var s;Y(this,Dt,t),(s=b(this,ot))==null||s.call(this),Y(this,ot,t(this.setOnline.bind(this)))}setOnline(t){b(this,kt)!==t&&(Y(this,kt,t),this.listeners.forEach(a=>{a(t)}))}isOnline(){return b(this,kt)}},kt=new WeakMap,ot=new WeakMap,Dt=new WeakMap,Ar),us=new ro;function ao(){let r,t;const s=new Promise((n,i)=>{r=n,t=i});s.status="pending",s.catch(()=>{});function a(n){Object.assign(s,n),delete s.resolve,delete s.reject}return s.resolve=n=>{a({status:"fulfilled",value:n}),r(n)},s.reject=n=>{a({status:"rejected",reason:n}),t(n)},s}function no(r){return Math.min(1e3*2**r,3e4)}function Zr(r){return(r??"online")==="online"?us.isOnline():!0}var Ts=class extends Error{constructor(r){super("CancelledError"),this.revert=r==null?void 0:r.revert,this.silent=r==null?void 0:r.silent}};function ea(r){let t=!1,s=0,a;const n=ao(),i=()=>n.status!=="pending",o=v=>{var x;if(!i()){const y=new Ts(v);f(y),(x=r.onCancel)==null||x.call(r,y)}},l=()=>{t=!0},d=()=>{t=!1},m=()=>Xr.isFocused()&&(r.networkMode==="always"||us.isOnline())&&r.canRun(),p=()=>Zr(r.networkMode)&&r.canRun(),j=v=>{i()||(a==null||a(),n.resolve(v))},f=v=>{i()||(a==null||a(),n.reject(v))},w=()=>new Promise(v=>{var x;a=y=>{(i()||m())&&v(y)},(x=r.onPause)==null||x.call(r)}).then(()=>{var v;a=void 0,i()||(v=r.onContinue)==null||v.call(r)}),L=()=>{if(i())return;let v;const x=s===0?r.initialPromise:void 0;try{v=x??r.fn()}catch(y){v=Promise.reject(y)}Promise.resolve(v).then(j).catch(y=>{var I;if(i())return;const T=r.retry??(xs?0:3),V=r.retryDelay??no,R=typeof V=="function"?V(s,y):V,$=T===!0||typeof T=="number"&&s<T||typeof T=="function"&&T(s,y);if(t||!$){f(y);return}s++,(I=r.onFail)==null||I.call(r,s,y),Xi(R).then(()=>m()?void 0:w()).then(()=>{t?f(y):L()})})};return{promise:n,status:()=>n.status,cancel:o,continue:()=>(a==null||a(),n),cancelRetry:l,continueRetry:d,canStart:p,start:()=>(p()?L():w().then(L),n)}}var io=r=>setTimeout(r,0);function oo(){let r=[],t=0,s=l=>{l()},a=l=>{l()},n=io;const i=l=>{t?r.push(l):n(()=>{s(l)})},o=()=>{const l=r;r=[],l.length&&n(()=>{a(()=>{l.forEach(d=>{s(d)})})})};return{batch:l=>{let d;t++;try{d=l()}finally{t--,t||o()}return d},batchCalls:l=>(...d)=>{i(()=>{l(...d)})},schedule:i,setNotifyFunction:l=>{s=l},setBatchNotifyFunction:l=>{a=l},setScheduler:l=>{n=l}}}var _e=oo(),xt,_r,ta=(_r=class{constructor(){ie(this,xt)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Yi(this.gcTime)&&Y(this,xt,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(r){this.gcTime=Math.max(this.gcTime||0,r??(xs?1/0:5*60*1e3))}clearGcTimeout(){b(this,xt)&&(clearTimeout(b(this,xt)),Y(this,xt,void 0))}},xt=new WeakMap,_r),Ct,At,Fe,gt,ye,Yt,ft,ze,Ze,Er,lo=(Er=class extends ta{constructor(t){super();ie(this,ze);ie(this,Ct);ie(this,At);ie(this,Fe);ie(this,gt);ie(this,ye);ie(this,Yt);ie(this,ft);Y(this,ft,!1),Y(this,Yt,t.defaultOptions),this.setOptions(t.options),this.observers=[],Y(this,gt,t.client),Y(this,Fe,b(this,gt).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Y(this,Ct,ho(this.options)),this.state=t.state??b(this,Ct),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=b(this,ye))==null?void 0:t.promise}setOptions(t){this.options={...b(this,Yt),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&b(this,Fe).remove(this)}setData(t,s){const a=Zi(this.state.data,t,this.options);return ve(this,ze,Ze).call(this,{data:a,type:"success",dataUpdatedAt:s==null?void 0:s.updatedAt,manual:s==null?void 0:s.manual}),a}setState(t,s){ve(this,ze,Ze).call(this,{type:"setState",state:t,setStateOptions:s})}cancel(t){var a,n;const s=(a=b(this,ye))==null?void 0:a.promise;return(n=b(this,ye))==null||n.cancel(t),s?s.then(Ue).catch(Ue):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(b(this,Ct))}isActive(){return this.observers.some(t=>Ki(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Vs||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Is(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!Qi(this.state.dataUpdatedAt,t)}onFocus(){var s;const t=this.observers.find(a=>a.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(s=b(this,ye))==null||s.continue()}onOnline(){var s;const t=this.observers.find(a=>a.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(s=b(this,ye))==null||s.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),b(this,Fe).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(s=>s!==t),this.observers.length||(b(this,ye)&&(b(this,ft)?b(this,ye).cancel({revert:!0}):b(this,ye).cancelRetry()),this.scheduleGc()),b(this,Fe).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ve(this,ze,Ze).call(this,{type:"invalidate"})}async fetch(t,s){var d,m,p,j,f,w,L,v,x,y,T,V;if(this.state.fetchStatus!=="idle"&&((d=b(this,ye))==null?void 0:d.status())!=="rejected"){if(this.state.data!==void 0&&(s!=null&&s.cancelRefetch))this.cancel({silent:!0});else if(b(this,ye))return b(this,ye).continueRetry(),b(this,ye).promise}if(t&&this.setOptions(t),!this.options.queryFn){const R=this.observers.find($=>$.options.queryFn);R&&this.setOptions(R.options)}const a=new AbortController,n=R=>{Object.defineProperty(R,"signal",{enumerable:!0,get:()=>(Y(this,ft,!0),a.signal)})},i=()=>{const R=Jr(this.options,s),I=(()=>{const B={client:b(this,gt),queryKey:this.queryKey,meta:this.meta};return n(B),B})();return Y(this,ft,!1),this.options.persister?this.options.persister(R,I,this):R(I)},l=(()=>{const R={fetchOptions:s,options:this.options,queryKey:this.queryKey,client:b(this,gt),state:this.state,fetchFn:i};return n(R),R})();(m=this.options.behavior)==null||m.onFetch(l,this),Y(this,At,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((p=l.fetchOptions)==null?void 0:p.meta))&&ve(this,ze,Ze).call(this,{type:"fetch",meta:(j=l.fetchOptions)==null?void 0:j.meta}),Y(this,ye,ea({initialPromise:s==null?void 0:s.initialPromise,fn:l.fetchFn,onCancel:R=>{R instanceof Ts&&R.revert&&this.setState({...b(this,At),fetchStatus:"idle"}),a.abort()},onFail:(R,$)=>{ve(this,ze,Ze).call(this,{type:"failed",failureCount:R,error:$})},onPause:()=>{ve(this,ze,Ze).call(this,{type:"pause"})},onContinue:()=>{ve(this,ze,Ze).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const R=await b(this,ye).start();if(R===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(R),(w=(f=b(this,Fe).config).onSuccess)==null||w.call(f,R,this),(v=(L=b(this,Fe).config).onSettled)==null||v.call(L,R,this.state.error,this),R}catch(R){if(R instanceof Ts){if(R.silent)return b(this,ye).promise;if(R.revert){if(this.state.data===void 0)throw R;return this.state.data}}throw ve(this,ze,Ze).call(this,{type:"error",error:R}),(y=(x=b(this,Fe).config).onError)==null||y.call(x,R,this),(V=(T=b(this,Fe).config).onSettled)==null||V.call(T,this.state.data,R,this),R}finally{this.scheduleGc()}}},Ct=new WeakMap,At=new WeakMap,Fe=new WeakMap,gt=new WeakMap,ye=new WeakMap,Yt=new WeakMap,ft=new WeakMap,ze=new WeakSet,Ze=function(t){const s=a=>{switch(t.type){case"failed":return{...a,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...a,fetchStatus:"paused"};case"continue":return{...a,fetchStatus:"fetching"};case"fetch":return{...a,...co(a.data,this.options),fetchMeta:t.meta??null};case"success":const n={...a,data:t.data,dataUpdateCount:a.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return Y(this,At,t.manual?n:void 0),n;case"error":const i=t.error;return{...a,error:i,errorUpdateCount:a.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:a.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...a,isInvalidated:!0};case"setState":return{...a,...t.state}}};this.state=s(this.state),_e.batch(()=>{this.observers.forEach(a=>{a.onQueryUpdate()}),b(this,Fe).notify({query:this,type:"updated",action:t})})},Er);function co(r,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Zr(t.networkMode)?"fetching":"paused",...r===void 0&&{error:null,status:"pending"}}}function ho(r){const t=typeof r.initialData=="function"?r.initialData():r.initialData,s=t!==void 0,a=s?typeof r.initialDataUpdatedAt=="function"?r.initialDataUpdatedAt():r.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:s?a??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}var Ge,Pr,uo=(Pr=class extends ps{constructor(t={}){super();ie(this,Ge);this.config=t,Y(this,Ge,new Map)}build(t,s,a){const n=s.queryKey,i=s.queryHash??qs(n,s);let o=this.get(i);return o||(o=new lo({client:t,queryKey:n,queryHash:i,options:t.defaultQueryOptions(s),state:a,defaultOptions:t.getQueryDefaults(n)}),this.add(o)),o}add(t){b(this,Ge).has(t.queryHash)||(b(this,Ge).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const s=b(this,Ge).get(t.queryHash);s&&(t.destroy(),s===t&&b(this,Ge).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){_e.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return b(this,Ge).get(t)}getAll(){return[...b(this,Ge).values()]}find(t){const s={exact:!0,...t};return this.getAll().find(a=>pr(s,a))}findAll(t={}){const s=this.getAll();return Object.keys(t).length>0?s.filter(a=>pr(t,a)):s}notify(t){_e.batch(()=>{this.listeners.forEach(s=>{s(t)})})}onFocus(){_e.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){_e.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Ge=new WeakMap,Pr),We,Ae,yt,Ye,nt,Rr,mo=(Rr=class extends ta{constructor(t){super();ie(this,Ye);ie(this,We);ie(this,Ae);ie(this,yt);this.mutationId=t.mutationId,Y(this,Ae,t.mutationCache),Y(this,We,[]),this.state=t.state||po(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){b(this,We).includes(t)||(b(this,We).push(t),this.clearGcTimeout(),b(this,Ae).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Y(this,We,b(this,We).filter(s=>s!==t)),this.scheduleGc(),b(this,Ae).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){b(this,We).length||(this.state.status==="pending"?this.scheduleGc():b(this,Ae).remove(this))}continue(){var t;return((t=b(this,yt))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var i,o,l,d,m,p,j,f,w,L,v,x,y,T,V,R,$,I,B,S;const s=()=>{ve(this,Ye,nt).call(this,{type:"continue"})};Y(this,yt,ea({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(C,O)=>{ve(this,Ye,nt).call(this,{type:"failed",failureCount:C,error:O})},onPause:()=>{ve(this,Ye,nt).call(this,{type:"pause"})},onContinue:s,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>b(this,Ae).canRun(this)}));const a=this.state.status==="pending",n=!b(this,yt).canStart();try{if(a)s();else{ve(this,Ye,nt).call(this,{type:"pending",variables:t,isPaused:n}),await((o=(i=b(this,Ae).config).onMutate)==null?void 0:o.call(i,t,this));const O=await((d=(l=this.options).onMutate)==null?void 0:d.call(l,t));O!==this.state.context&&ve(this,Ye,nt).call(this,{type:"pending",context:O,variables:t,isPaused:n})}const C=await b(this,yt).start();return await((p=(m=b(this,Ae).config).onSuccess)==null?void 0:p.call(m,C,t,this.state.context,this)),await((f=(j=this.options).onSuccess)==null?void 0:f.call(j,C,t,this.state.context)),await((L=(w=b(this,Ae).config).onSettled)==null?void 0:L.call(w,C,null,this.state.variables,this.state.context,this)),await((x=(v=this.options).onSettled)==null?void 0:x.call(v,C,null,t,this.state.context)),ve(this,Ye,nt).call(this,{type:"success",data:C}),C}catch(C){try{throw await((T=(y=b(this,Ae).config).onError)==null?void 0:T.call(y,C,t,this.state.context,this)),await((R=(V=this.options).onError)==null?void 0:R.call(V,C,t,this.state.context)),await((I=($=b(this,Ae).config).onSettled)==null?void 0:I.call($,void 0,C,this.state.variables,this.state.context,this)),await((S=(B=this.options).onSettled)==null?void 0:S.call(B,void 0,C,t,this.state.context)),C}finally{ve(this,Ye,nt).call(this,{type:"error",error:C})}}finally{b(this,Ae).runNext(this)}}},We=new WeakMap,Ae=new WeakMap,yt=new WeakMap,Ye=new WeakSet,nt=function(t){const s=a=>{switch(t.type){case"failed":return{...a,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...a,isPaused:!0};case"continue":return{...a,isPaused:!1};case"pending":return{...a,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...a,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...a,data:void 0,error:t.error,failureCount:a.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=s(this.state),_e.batch(()=>{b(this,We).forEach(a=>{a.onMutationUpdate(t)}),b(this,Ae).notify({mutation:this,type:"updated",action:t})})},Rr);function po(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var et,Be,Qt,Ir,xo=(Ir=class extends ps{constructor(t={}){super();ie(this,et);ie(this,Be);ie(this,Qt);this.config=t,Y(this,et,new Set),Y(this,Be,new Map),Y(this,Qt,0)}build(t,s,a){const n=new mo({mutationCache:this,mutationId:++Zt(this,Qt)._,options:t.defaultMutationOptions(s),state:a});return this.add(n),n}add(t){b(this,et).add(t);const s=ts(t);if(typeof s=="string"){const a=b(this,Be).get(s);a?a.push(t):b(this,Be).set(s,[t])}this.notify({type:"added",mutation:t})}remove(t){if(b(this,et).delete(t)){const s=ts(t);if(typeof s=="string"){const a=b(this,Be).get(s);if(a)if(a.length>1){const n=a.indexOf(t);n!==-1&&a.splice(n,1)}else a[0]===t&&b(this,Be).delete(s)}}this.notify({type:"removed",mutation:t})}canRun(t){const s=ts(t);if(typeof s=="string"){const a=b(this,Be).get(s),n=a==null?void 0:a.find(i=>i.state.status==="pending");return!n||n===t}else return!0}runNext(t){var a;const s=ts(t);if(typeof s=="string"){const n=(a=b(this,Be).get(s))==null?void 0:a.find(i=>i!==t&&i.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}else return Promise.resolve()}clear(){_e.batch(()=>{b(this,et).forEach(t=>{this.notify({type:"removed",mutation:t})}),b(this,et).clear(),b(this,Be).clear()})}getAll(){return Array.from(b(this,et))}find(t){const s={exact:!0,...t};return this.getAll().find(a=>xr(s,a))}findAll(t={}){return this.getAll().filter(s=>xr(t,s))}notify(t){_e.batch(()=>{this.listeners.forEach(s=>{s(t)})})}resumePausedMutations(){const t=this.getAll().filter(s=>s.state.isPaused);return _e.batch(()=>Promise.all(t.map(s=>s.continue().catch(Ue))))}},et=new WeakMap,Be=new WeakMap,Qt=new WeakMap,Ir);function ts(r){var t;return(t=r.options.scope)==null?void 0:t.id}function yr(r){return{onFetch:(t,s)=>{var p,j,f,w,L;const a=t.options,n=(f=(j=(p=t.fetchOptions)==null?void 0:p.meta)==null?void 0:j.fetchMore)==null?void 0:f.direction,i=((w=t.state.data)==null?void 0:w.pages)||[],o=((L=t.state.data)==null?void 0:L.pageParams)||[];let l={pages:[],pageParams:[]},d=0;const m=async()=>{let v=!1;const x=V=>{Object.defineProperty(V,"signal",{enumerable:!0,get:()=>(t.signal.aborted?v=!0:t.signal.addEventListener("abort",()=>{v=!0}),t.signal)})},y=Jr(t.options,t.fetchOptions),T=async(V,R,$)=>{if(v)return Promise.reject();if(R==null&&V.pages.length)return Promise.resolve(V);const B=(()=>{const D={client:t.client,queryKey:t.queryKey,pageParam:R,direction:$?"backward":"forward",meta:t.options.meta};return x(D),D})(),S=await y(B),{maxPages:C}=t.options,O=$?to:eo;return{pages:O(V.pages,S,C),pageParams:O(V.pageParams,R,C)}};if(n&&i.length){const V=n==="backward",R=V?go:vr,$={pages:i,pageParams:o},I=R(a,$);l=await T($,I,V)}else{const V=r??i.length;do{const R=d===0?o[0]??a.initialPageParam:vr(a,l);if(d>0&&R==null)break;l=await T(l,R),d++}while(d<V)}return l};t.options.persister?t.fetchFn=()=>{var v,x;return(x=(v=t.options).persister)==null?void 0:x.call(v,m,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},s)}:t.fetchFn=m}}}function vr(r,{pages:t,pageParams:s}){const a=t.length-1;return t.length>0?r.getNextPageParam(t[a],t,s[a],s):void 0}function go(r,{pages:t,pageParams:s}){var a;return t.length>0?(a=r.getPreviousPageParam)==null?void 0:a.call(r,t[0],t,s[0],s):void 0}var me,lt,ct,_t,Et,dt,Pt,Rt,Lr,fo=(Lr=class{constructor(r={}){ie(this,me);ie(this,lt);ie(this,ct);ie(this,_t);ie(this,Et);ie(this,dt);ie(this,Pt);ie(this,Rt);Y(this,me,r.queryCache||new uo),Y(this,lt,r.mutationCache||new xo),Y(this,ct,r.defaultOptions||{}),Y(this,_t,new Map),Y(this,Et,new Map),Y(this,dt,0)}mount(){Zt(this,dt)._++,b(this,dt)===1&&(Y(this,Pt,Xr.subscribe(async r=>{r&&(await this.resumePausedMutations(),b(this,me).onFocus())})),Y(this,Rt,us.subscribe(async r=>{r&&(await this.resumePausedMutations(),b(this,me).onOnline())})))}unmount(){var r,t;Zt(this,dt)._--,b(this,dt)===0&&((r=b(this,Pt))==null||r.call(this),Y(this,Pt,void 0),(t=b(this,Rt))==null||t.call(this),Y(this,Rt,void 0))}isFetching(r){return b(this,me).findAll({...r,fetchStatus:"fetching"}).length}isMutating(r){return b(this,lt).findAll({...r,status:"pending"}).length}getQueryData(r){var s;const t=this.defaultQueryOptions({queryKey:r});return(s=b(this,me).get(t.queryHash))==null?void 0:s.state.data}ensureQueryData(r){const t=this.defaultQueryOptions(r),s=b(this,me).build(this,t),a=s.state.data;return a===void 0?this.fetchQuery(r):(r.revalidateIfStale&&s.isStaleByTime(Is(t.staleTime,s))&&this.prefetchQuery(t),Promise.resolve(a))}getQueriesData(r){return b(this,me).findAll(r).map(({queryKey:t,state:s})=>{const a=s.data;return[t,a]})}setQueryData(r,t,s){const a=this.defaultQueryOptions({queryKey:r}),n=b(this,me).get(a.queryHash),i=n==null?void 0:n.state.data,o=Wi(t,i);if(o!==void 0)return b(this,me).build(this,a).setData(o,{...s,manual:!0})}setQueriesData(r,t,s){return _e.batch(()=>b(this,me).findAll(r).map(({queryKey:a})=>[a,this.setQueryData(a,t,s)]))}getQueryState(r){var s;const t=this.defaultQueryOptions({queryKey:r});return(s=b(this,me).get(t.queryHash))==null?void 0:s.state}removeQueries(r){const t=b(this,me);_e.batch(()=>{t.findAll(r).forEach(s=>{t.remove(s)})})}resetQueries(r,t){const s=b(this,me);return _e.batch(()=>(s.findAll(r).forEach(a=>{a.reset()}),this.refetchQueries({type:"active",...r},t)))}cancelQueries(r,t={}){const s={revert:!0,...t},a=_e.batch(()=>b(this,me).findAll(r).map(n=>n.cancel(s)));return Promise.all(a).then(Ue).catch(Ue)}invalidateQueries(r,t={}){return _e.batch(()=>(b(this,me).findAll(r).forEach(s=>{s.invalidate()}),(r==null?void 0:r.refetchType)==="none"?Promise.resolve():this.refetchQueries({...r,type:(r==null?void 0:r.refetchType)??(r==null?void 0:r.type)??"active"},t)))}refetchQueries(r,t={}){const s={...t,cancelRefetch:t.cancelRefetch??!0},a=_e.batch(()=>b(this,me).findAll(r).filter(n=>!n.isDisabled()&&!n.isStatic()).map(n=>{let i=n.fetch(void 0,s);return s.throwOnError||(i=i.catch(Ue)),n.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(a).then(Ue)}fetchQuery(r){const t=this.defaultQueryOptions(r);t.retry===void 0&&(t.retry=!1);const s=b(this,me).build(this,t);return s.isStaleByTime(Is(t.staleTime,s))?s.fetch(t):Promise.resolve(s.state.data)}prefetchQuery(r){return this.fetchQuery(r).then(Ue).catch(Ue)}fetchInfiniteQuery(r){return r.behavior=yr(r.pages),this.fetchQuery(r)}prefetchInfiniteQuery(r){return this.fetchInfiniteQuery(r).then(Ue).catch(Ue)}ensureInfiniteQueryData(r){return r.behavior=yr(r.pages),this.ensureQueryData(r)}resumePausedMutations(){return us.isOnline()?b(this,lt).resumePausedMutations():Promise.resolve()}getQueryCache(){return b(this,me)}getMutationCache(){return b(this,lt)}getDefaultOptions(){return b(this,ct)}setDefaultOptions(r){Y(this,ct,r)}setQueryDefaults(r,t){b(this,_t).set(Gt(r),{queryKey:r,defaultOptions:t})}getQueryDefaults(r){const t=[...b(this,_t).values()],s={};return t.forEach(a=>{Wt(r,a.queryKey)&&Object.assign(s,a.defaultOptions)}),s}setMutationDefaults(r,t){b(this,Et).set(Gt(r),{mutationKey:r,defaultOptions:t})}getMutationDefaults(r){const t=[...b(this,Et).values()],s={};return t.forEach(a=>{Wt(r,a.mutationKey)&&Object.assign(s,a.defaultOptions)}),s}defaultQueryOptions(r){if(r._defaulted)return r;const t={...b(this,ct).queries,...this.getQueryDefaults(r.queryKey),...r,_defaulted:!0};return t.queryHash||(t.queryHash=qs(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Vs&&(t.enabled=!1),t}defaultMutationOptions(r){return r!=null&&r._defaulted?r:{...b(this,ct).mutations,...(r==null?void 0:r.mutationKey)&&this.getMutationDefaults(r.mutationKey),...r,_defaulted:!0}}clear(){b(this,me).clear(),b(this,lt).clear()}},me=new WeakMap,lt=new WeakMap,ct=new WeakMap,_t=new WeakMap,Et=new WeakMap,dt=new WeakMap,Pt=new WeakMap,Rt=new WeakMap,Lr),yo=h.createContext(void 0),vo=({client:r,children:t})=>(h.useEffect(()=>(r.mount(),()=>{r.unmount()}),[r]),e.jsx(yo.Provider,{value:r,children:t}));const sa=h.createContext(void 0),bo=({children:r})=>{const[t,s]=h.useState(null),[a,n]=h.useState(!0);h.useEffect(()=>{(()=>{try{const f=localStorage.getItem("user"),w=localStorage.getItem("token");if(f&&w){const L=JSON.parse(f);s(L)}}catch(f){console.error("Error initializing auth state:",f),localStorage.removeItem("user"),localStorage.removeItem("token")}finally{n(!1)}})()},[]);const i=(j,f)=>{s(j),localStorage.setItem("user",JSON.stringify(j)),localStorage.setItem("token",f)},o=()=>{s(null),localStorage.removeItem("user"),localStorage.removeItem("token"),localStorage.removeItem("authState"),sessionStorage.clear()},l=j=>{if(t){const f={...t,signature:j,signatureUploadedAt:new Date().toISOString()};s(f),localStorage.setItem("user",JSON.stringify(f))}},d=()=>{if(t){const j={...t,signature:void 0,signatureUploadedAt:void 0};s(j),localStorage.setItem("user",JSON.stringify(j))}},m=j=>{s(j),localStorage.setItem("user",JSON.stringify(j))},p=!!t&&!!localStorage.getItem("token");return e.jsx(sa.Provider,{value:{user:t,login:i,logout:o,isAuthenticated:p,updateSignature:l,removeSignature:d,updateUser:m,loading:a},children:r})},Te=()=>{const r=h.useContext(sa);if(r===void 0)throw new Error("useAuth must be used within an AuthProvider");return r},ra=h.createContext(void 0),jo=()=>{const r=h.useContext(ra);if(r===void 0)throw new Error("useTheme must be used within a ThemeProvider");return r},wo=({children:r})=>{const[t,s]=h.useState("light");h.useEffect(()=>{const o=localStorage.getItem("theme");s(o||"light")},[]),h.useEffect(()=>{const o=document.documentElement;t==="dark"?o.classList.add("dark"):o.classList.remove("dark"),localStorage.setItem("theme",t)},[t]);const i={theme:t,toggleTheme:()=>{s(o=>o==="dark"?"light":"dark")},setTheme:o=>{s(o)}};return e.jsx(ra.Provider,{value:i,children:r})},Je=Object.create(null);Je.open="0";Je.close="1";Je.ping="2";Je.pong="3";Je.message="4";Je.upgrade="5";Je.noop="6";const ns=Object.create(null);Object.keys(Je).forEach(r=>{ns[Je[r]]=r});const Fs={type:"error",data:"parser error"},aa=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",na=typeof ArrayBuffer=="function",ia=r=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(r):r&&r.buffer instanceof ArrayBuffer,Gs=({type:r,data:t},s,a)=>aa&&t instanceof Blob?s?a(t):br(t,a):na&&(t instanceof ArrayBuffer||ia(t))?s?a(t):br(new Blob([t]),a):a(Je[r]+(t||"")),br=(r,t)=>{const s=new FileReader;return s.onload=function(){const a=s.result.split(",")[1];t("b"+(a||""))},s.readAsDataURL(r)};function jr(r){return r instanceof Uint8Array?r:r instanceof ArrayBuffer?new Uint8Array(r):new Uint8Array(r.buffer,r.byteOffset,r.byteLength)}let Ss;function No(r,t){if(aa&&r.data instanceof Blob)return r.data.arrayBuffer().then(jr).then(t);if(na&&(r.data instanceof ArrayBuffer||ia(r.data)))return t(jr(r.data));Gs(r,!1,s=>{Ss||(Ss=new TextEncoder),t(Ss.encode(s))})}const wr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Bt=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let r=0;r<wr.length;r++)Bt[wr.charCodeAt(r)]=r;const So=r=>{let t=r.length*.75,s=r.length,a,n=0,i,o,l,d;r[r.length-1]==="="&&(t--,r[r.length-2]==="="&&t--);const m=new ArrayBuffer(t),p=new Uint8Array(m);for(a=0;a<s;a+=4)i=Bt[r.charCodeAt(a)],o=Bt[r.charCodeAt(a+1)],l=Bt[r.charCodeAt(a+2)],d=Bt[r.charCodeAt(a+3)],p[n++]=i<<2|o>>4,p[n++]=(o&15)<<4|l>>2,p[n++]=(l&3)<<6|d&63;return m},ko=typeof ArrayBuffer=="function",Ws=(r,t)=>{if(typeof r!="string")return{type:"message",data:oa(r,t)};const s=r.charAt(0);return s==="b"?{type:"message",data:Do(r.substring(1),t)}:ns[s]?r.length>1?{type:ns[s],data:r.substring(1)}:{type:ns[s]}:Fs},Do=(r,t)=>{if(ko){const s=So(r);return oa(s,t)}else return{base64:!0,data:r}},oa=(r,t)=>{switch(t){case"blob":return r instanceof Blob?r:new Blob([r]);case"arraybuffer":default:return r instanceof ArrayBuffer?r:r.buffer}},la="",Co=(r,t)=>{const s=r.length,a=new Array(s);let n=0;r.forEach((i,o)=>{Gs(i,!1,l=>{a[o]=l,++n===s&&t(a.join(la))})})},Ao=(r,t)=>{const s=r.split(la),a=[];for(let n=0;n<s.length;n++){const i=Ws(s[n],t);if(a.push(i),i.type==="error")break}return a};function _o(){return new TransformStream({transform(r,t){No(r,s=>{const a=s.length;let n;if(a<126)n=new Uint8Array(1),new DataView(n.buffer).setUint8(0,a);else if(a<65536){n=new Uint8Array(3);const i=new DataView(n.buffer);i.setUint8(0,126),i.setUint16(1,a)}else{n=new Uint8Array(9);const i=new DataView(n.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(a))}r.data&&typeof r.data!="string"&&(n[0]|=128),t.enqueue(n),t.enqueue(s)})}})}let ks;function ss(r){return r.reduce((t,s)=>t+s.length,0)}function rs(r,t){if(r[0].length===t)return r.shift();const s=new Uint8Array(t);let a=0;for(let n=0;n<t;n++)s[n]=r[0][a++],a===r[0].length&&(r.shift(),a=0);return r.length&&a<r[0].length&&(r[0]=r[0].slice(a)),s}function Eo(r,t){ks||(ks=new TextDecoder);const s=[];let a=0,n=-1,i=!1;return new TransformStream({transform(o,l){for(s.push(o);;){if(a===0){if(ss(s)<1)break;const d=rs(s,1);i=(d[0]&128)===128,n=d[0]&127,n<126?a=3:n===126?a=1:a=2}else if(a===1){if(ss(s)<2)break;const d=rs(s,2);n=new DataView(d.buffer,d.byteOffset,d.length).getUint16(0),a=3}else if(a===2){if(ss(s)<8)break;const d=rs(s,8),m=new DataView(d.buffer,d.byteOffset,d.length),p=m.getUint32(0);if(p>Math.pow(2,21)-1){l.enqueue(Fs);break}n=p*Math.pow(2,32)+m.getUint32(4),a=3}else{if(ss(s)<n)break;const d=rs(s,n);l.enqueue(Ws(i?d:ks.decode(d),t)),a=0}if(n===0||n>r){l.enqueue(Fs);break}}}})}const ca=4;function ge(r){if(r)return Po(r)}function Po(r){for(var t in ge.prototype)r[t]=ge.prototype[t];return r}ge.prototype.on=ge.prototype.addEventListener=function(r,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+r]=this._callbacks["$"+r]||[]).push(t),this};ge.prototype.once=function(r,t){function s(){this.off(r,s),t.apply(this,arguments)}return s.fn=t,this.on(r,s),this};ge.prototype.off=ge.prototype.removeListener=ge.prototype.removeAllListeners=ge.prototype.removeEventListener=function(r,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var s=this._callbacks["$"+r];if(!s)return this;if(arguments.length==1)return delete this._callbacks["$"+r],this;for(var a,n=0;n<s.length;n++)if(a=s[n],a===t||a.fn===t){s.splice(n,1);break}return s.length===0&&delete this._callbacks["$"+r],this};ge.prototype.emit=function(r){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),s=this._callbacks["$"+r],a=1;a<arguments.length;a++)t[a-1]=arguments[a];if(s){s=s.slice(0);for(var a=0,n=s.length;a<n;++a)s[a].apply(this,t)}return this};ge.prototype.emitReserved=ge.prototype.emit;ge.prototype.listeners=function(r){return this._callbacks=this._callbacks||{},this._callbacks["$"+r]||[]};ge.prototype.hasListeners=function(r){return!!this.listeners(r).length};const gs=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,s)=>s(t,0),Oe=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),Ro="arraybuffer";function da(r,...t){return t.reduce((s,a)=>(r.hasOwnProperty(a)&&(s[a]=r[a]),s),{})}const Io=Oe.setTimeout,Lo=Oe.clearTimeout;function fs(r,t){t.useNativeTimers?(r.setTimeoutFn=Io.bind(Oe),r.clearTimeoutFn=Lo.bind(Oe)):(r.setTimeoutFn=Oe.setTimeout.bind(Oe),r.clearTimeoutFn=Oe.clearTimeout.bind(Oe))}const To=1.33;function Fo(r){return typeof r=="string"?Oo(r):Math.ceil((r.byteLength||r.size)*To)}function Oo(r){let t=0,s=0;for(let a=0,n=r.length;a<n;a++)t=r.charCodeAt(a),t<128?s+=1:t<2048?s+=2:t<55296||t>=57344?s+=3:(a++,s+=4);return s}function ha(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function Mo(r){let t="";for(let s in r)r.hasOwnProperty(s)&&(t.length&&(t+="&"),t+=encodeURIComponent(s)+"="+encodeURIComponent(r[s]));return t}function $o(r){let t={},s=r.split("&");for(let a=0,n=s.length;a<n;a++){let i=s[a].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t}class Uo extends Error{constructor(t,s,a){super(t),this.description=s,this.context=a,this.type="TransportError"}}class Ys extends ge{constructor(t){super(),this.writable=!1,fs(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,s,a){return super.emitReserved("error",new Uo(t,s,a)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const s=Ws(t,this.socket.binaryType);this.onPacket(s)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,s={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(s)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const s=Mo(t);return s.length?"?"+s:""}}class zo extends Ys{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const s=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let a=0;this._polling&&(a++,this.once("pollComplete",function(){--a||s()})),this.writable||(a++,this.once("drain",function(){--a||s()}))}else s()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const s=a=>{if(this.readyState==="opening"&&a.type==="open"&&this.onOpen(),a.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(a)};Ao(t,this.socket.binaryType).forEach(s),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,Co(t,s=>{this.doWrite(s,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",s=this.query||{};return this.opts.timestampRequests!==!1&&(s[this.opts.timestampParam]=ha()),!this.supportsBinary&&!s.sid&&(s.b64=1),this.createUri(t,s)}}let ua=!1;try{ua=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Bo=ua;function Ho(){}class qo extends zo{constructor(t){if(super(t),typeof location<"u"){const s=location.protocol==="https:";let a=location.port;a||(a=s?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||a!==t.port}}doWrite(t,s){const a=this.request({method:"POST",data:t});a.on("success",s),a.on("error",(n,i)=>{this.onError("xhr post error",n,i)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(s,a)=>{this.onError("xhr poll error",s,a)}),this.pollXhr=t}}class Ke extends ge{constructor(t,s,a){super(),this.createRequest=t,fs(this,a),this._opts=a,this._method=a.method||"GET",this._uri=s,this._data=a.data!==void 0?a.data:null,this._create()}_create(){var t;const s=da(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");s.xdomain=!!this._opts.xd;const a=this._xhr=this.createRequest(s);try{a.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){a.setDisableHeaderCheck&&a.setDisableHeaderCheck(!0);for(let n in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(n)&&a.setRequestHeader(n,this._opts.extraHeaders[n])}}catch{}if(this._method==="POST")try{a.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{a.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(a),"withCredentials"in a&&(a.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(a.timeout=this._opts.requestTimeout),a.onreadystatechange=()=>{var n;a.readyState===3&&((n=this._opts.cookieJar)===null||n===void 0||n.parseCookies(a.getResponseHeader("set-cookie"))),a.readyState===4&&(a.status===200||a.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof a.status=="number"?a.status:0)},0))},a.send(this._data)}catch(n){this.setTimeoutFn(()=>{this._onError(n)},0);return}typeof document<"u"&&(this._index=Ke.requestsCount++,Ke.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=Ho,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Ke.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Ke.requestsCount=0;Ke.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Nr);else if(typeof addEventListener=="function"){const r="onpagehide"in Oe?"pagehide":"unload";addEventListener(r,Nr,!1)}}function Nr(){for(let r in Ke.requests)Ke.requests.hasOwnProperty(r)&&Ke.requests[r].abort()}const Vo=function(){const r=ma({xdomain:!1});return r&&r.responseType!==null}();class Go extends qo{constructor(t){super(t);const s=t&&t.forceBase64;this.supportsBinary=Vo&&!s}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new Ke(ma,this.uri(),t)}}function ma(r){const t=r.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||Bo))return new XMLHttpRequest}catch{}if(!t)try{return new Oe[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const pa=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class Wo extends Ys{get name(){return"websocket"}doOpen(){const t=this.uri(),s=this.opts.protocols,a=pa?{}:da(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(a.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,s,a)}catch(n){return this.emitReserved("error",n)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let s=0;s<t.length;s++){const a=t[s],n=s===t.length-1;Gs(a,this.supportsBinary,i=>{try{this.doWrite(a,i)}catch{}n&&gs(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",s=this.query||{};return this.opts.timestampRequests&&(s[this.opts.timestampParam]=ha()),this.supportsBinary||(s.b64=1),this.createUri(t,s)}}const Ds=Oe.WebSocket||Oe.MozWebSocket;class Yo extends Wo{createSocket(t,s,a){return pa?new Ds(t,s,a):s?new Ds(t,s):new Ds(t)}doWrite(t,s){this.ws.send(s)}}class Qo extends Ys{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const s=Eo(Number.MAX_SAFE_INTEGER,this.socket.binaryType),a=t.readable.pipeThrough(s).getReader(),n=_o();n.readable.pipeTo(t.writable),this._writer=n.writable.getWriter();const i=()=>{a.read().then(({done:l,value:d})=>{l||(this.onPacket(d),i())}).catch(l=>{})};i();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let s=0;s<t.length;s++){const a=t[s],n=s===t.length-1;this._writer.write(a).then(()=>{n&&gs(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const Ko={websocket:Yo,webtransport:Qo,polling:Go},Jo=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Xo=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Os(r){if(r.length>8e3)throw"URI too long";const t=r,s=r.indexOf("["),a=r.indexOf("]");s!=-1&&a!=-1&&(r=r.substring(0,s)+r.substring(s,a).replace(/:/g,";")+r.substring(a,r.length));let n=Jo.exec(r||""),i={},o=14;for(;o--;)i[Xo[o]]=n[o]||"";return s!=-1&&a!=-1&&(i.source=t,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=Zo(i,i.path),i.queryKey=el(i,i.query),i}function Zo(r,t){const s=/\/{2,9}/g,a=t.replace(s,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&a.splice(0,1),t.slice(-1)=="/"&&a.splice(a.length-1,1),a}function el(r,t){const s={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(a,n,i){n&&(s[n]=i)}),s}const Ms=typeof addEventListener=="function"&&typeof removeEventListener=="function",is=[];Ms&&addEventListener("offline",()=>{is.forEach(r=>r())},!1);class mt extends ge{constructor(t,s){if(super(),this.binaryType=Ro,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(s=t,t=null),t){const a=Os(t);s.hostname=a.host,s.secure=a.protocol==="https"||a.protocol==="wss",s.port=a.port,a.query&&(s.query=a.query)}else s.host&&(s.hostname=Os(s.host).host);fs(this,s),this.secure=s.secure!=null?s.secure:typeof location<"u"&&location.protocol==="https:",s.hostname&&!s.port&&(s.port=this.secure?"443":"80"),this.hostname=s.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=s.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},s.transports.forEach(a=>{const n=a.prototype.name;this.transports.push(n),this._transportsByName[n]=a}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},s),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=$o(this.opts.query)),Ms&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},is.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const s=Object.assign({},this.opts.query);s.EIO=ca,s.transport=t,this.id&&(s.sid=this.id);const a=Object.assign({},this.opts,{query:s,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](a)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&mt.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const s=this.createTransport(t);s.open(),this.setTransport(s)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",s=>this._onClose("transport close",s))}onOpen(){this.readyState="open",mt.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const s=new Error("server error");s.code=t.data,this._onError(s);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let s=1;for(let a=0;a<this.writeBuffer.length;a++){const n=this.writeBuffer[a].data;if(n&&(s+=Fo(n)),a>0&&s>this._maxPayload)return this.writeBuffer.slice(0,a);s+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,gs(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,s,a){return this._sendPacket("message",t,s,a),this}send(t,s,a){return this._sendPacket("message",t,s,a),this}_sendPacket(t,s,a,n){if(typeof s=="function"&&(n=s,s=void 0),typeof a=="function"&&(n=a,a=null),this.readyState==="closing"||this.readyState==="closed")return;a=a||{},a.compress=a.compress!==!1;const i={type:t,data:s,options:a};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),n&&this.once("flush",n),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},s=()=>{this.off("upgrade",s),this.off("upgradeError",s),t()},a=()=>{this.once("upgrade",s),this.once("upgradeError",s)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?a():t()}):this.upgrading?a():t()),this}_onError(t){if(mt.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,s){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Ms&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const a=is.indexOf(this._offlineEventListener);a!==-1&&is.splice(a,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,s),this.writeBuffer=[],this._prevBufferLen=0}}}mt.protocol=ca;class tl extends mt{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let s=this.createTransport(t),a=!1;mt.priorWebsocketSuccess=!1;const n=()=>{a||(s.send([{type:"ping",data:"probe"}]),s.once("packet",j=>{if(!a)if(j.type==="pong"&&j.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",s),!s)return;mt.priorWebsocketSuccess=s.name==="websocket",this.transport.pause(()=>{a||this.readyState!=="closed"&&(p(),this.setTransport(s),s.send([{type:"upgrade"}]),this.emitReserved("upgrade",s),s=null,this.upgrading=!1,this.flush())})}else{const f=new Error("probe error");f.transport=s.name,this.emitReserved("upgradeError",f)}}))};function i(){a||(a=!0,p(),s.close(),s=null)}const o=j=>{const f=new Error("probe error: "+j);f.transport=s.name,i(),this.emitReserved("upgradeError",f)};function l(){o("transport closed")}function d(){o("socket closed")}function m(j){s&&j.name!==s.name&&i()}const p=()=>{s.removeListener("open",n),s.removeListener("error",o),s.removeListener("close",l),this.off("close",d),this.off("upgrading",m)};s.once("open",n),s.once("error",o),s.once("close",l),this.once("close",d),this.once("upgrading",m),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{a||s.open()},200):s.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const s=[];for(let a=0;a<t.length;a++)~this.transports.indexOf(t[a])&&s.push(t[a]);return s}}let sl=class extends tl{constructor(t,s={}){const a=typeof t=="object"?t:s;(!a.transports||a.transports&&typeof a.transports[0]=="string")&&(a.transports=(a.transports||["polling","websocket","webtransport"]).map(n=>Ko[n]).filter(n=>!!n)),super(t,a)}};function rl(r,t="",s){let a=r;s=s||typeof location<"u"&&location,r==null&&(r=s.protocol+"//"+s.host),typeof r=="string"&&(r.charAt(0)==="/"&&(r.charAt(1)==="/"?r=s.protocol+r:r=s.host+r),/^(https?|wss?):\/\//.test(r)||(typeof s<"u"?r=s.protocol+"//"+r:r="https://"+r),a=Os(r)),a.port||(/^(http|ws)$/.test(a.protocol)?a.port="80":/^(http|ws)s$/.test(a.protocol)&&(a.port="443")),a.path=a.path||"/";const i=a.host.indexOf(":")!==-1?"["+a.host+"]":a.host;return a.id=a.protocol+"://"+i+":"+a.port+t,a.href=a.protocol+"://"+i+(s&&s.port===a.port?"":":"+a.port),a}const al=typeof ArrayBuffer=="function",nl=r=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(r):r.buffer instanceof ArrayBuffer,xa=Object.prototype.toString,il=typeof Blob=="function"||typeof Blob<"u"&&xa.call(Blob)==="[object BlobConstructor]",ol=typeof File=="function"||typeof File<"u"&&xa.call(File)==="[object FileConstructor]";function Qs(r){return al&&(r instanceof ArrayBuffer||nl(r))||il&&r instanceof Blob||ol&&r instanceof File}function os(r,t){if(!r||typeof r!="object")return!1;if(Array.isArray(r)){for(let s=0,a=r.length;s<a;s++)if(os(r[s]))return!0;return!1}if(Qs(r))return!0;if(r.toJSON&&typeof r.toJSON=="function"&&arguments.length===1)return os(r.toJSON(),!0);for(const s in r)if(Object.prototype.hasOwnProperty.call(r,s)&&os(r[s]))return!0;return!1}function ll(r){const t=[],s=r.data,a=r;return a.data=$s(s,t),a.attachments=t.length,{packet:a,buffers:t}}function $s(r,t){if(!r)return r;if(Qs(r)){const s={_placeholder:!0,num:t.length};return t.push(r),s}else if(Array.isArray(r)){const s=new Array(r.length);for(let a=0;a<r.length;a++)s[a]=$s(r[a],t);return s}else if(typeof r=="object"&&!(r instanceof Date)){const s={};for(const a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=$s(r[a],t));return s}return r}function cl(r,t){return r.data=Us(r.data,t),delete r.attachments,r}function Us(r,t){if(!r)return r;if(r&&r._placeholder===!0){if(typeof r.num=="number"&&r.num>=0&&r.num<t.length)return t[r.num];throw new Error("illegal attachments")}else if(Array.isArray(r))for(let s=0;s<r.length;s++)r[s]=Us(r[s],t);else if(typeof r=="object")for(const s in r)Object.prototype.hasOwnProperty.call(r,s)&&(r[s]=Us(r[s],t));return r}const dl=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],hl=5;var ee;(function(r){r[r.CONNECT=0]="CONNECT",r[r.DISCONNECT=1]="DISCONNECT",r[r.EVENT=2]="EVENT",r[r.ACK=3]="ACK",r[r.CONNECT_ERROR=4]="CONNECT_ERROR",r[r.BINARY_EVENT=5]="BINARY_EVENT",r[r.BINARY_ACK=6]="BINARY_ACK"})(ee||(ee={}));class ul{constructor(t){this.replacer=t}encode(t){return(t.type===ee.EVENT||t.type===ee.ACK)&&os(t)?this.encodeAsBinary({type:t.type===ee.EVENT?ee.BINARY_EVENT:ee.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let s=""+t.type;return(t.type===ee.BINARY_EVENT||t.type===ee.BINARY_ACK)&&(s+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(s+=t.nsp+","),t.id!=null&&(s+=t.id),t.data!=null&&(s+=JSON.stringify(t.data,this.replacer)),s}encodeAsBinary(t){const s=ll(t),a=this.encodeAsString(s.packet),n=s.buffers;return n.unshift(a),n}}function Sr(r){return Object.prototype.toString.call(r)==="[object Object]"}class Ks extends ge{constructor(t){super(),this.reviver=t}add(t){let s;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");s=this.decodeString(t);const a=s.type===ee.BINARY_EVENT;a||s.type===ee.BINARY_ACK?(s.type=a?ee.EVENT:ee.ACK,this.reconstructor=new ml(s),s.attachments===0&&super.emitReserved("decoded",s)):super.emitReserved("decoded",s)}else if(Qs(t)||t.base64)if(this.reconstructor)s=this.reconstructor.takeBinaryData(t),s&&(this.reconstructor=null,super.emitReserved("decoded",s));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let s=0;const a={type:Number(t.charAt(0))};if(ee[a.type]===void 0)throw new Error("unknown packet type "+a.type);if(a.type===ee.BINARY_EVENT||a.type===ee.BINARY_ACK){const i=s+1;for(;t.charAt(++s)!=="-"&&s!=t.length;);const o=t.substring(i,s);if(o!=Number(o)||t.charAt(s)!=="-")throw new Error("Illegal attachments");a.attachments=Number(o)}if(t.charAt(s+1)==="/"){const i=s+1;for(;++s&&!(t.charAt(s)===","||s===t.length););a.nsp=t.substring(i,s)}else a.nsp="/";const n=t.charAt(s+1);if(n!==""&&Number(n)==n){const i=s+1;for(;++s;){const o=t.charAt(s);if(o==null||Number(o)!=o){--s;break}if(s===t.length)break}a.id=Number(t.substring(i,s+1))}if(t.charAt(++s)){const i=this.tryParse(t.substr(s));if(Ks.isPayloadValid(a.type,i))a.data=i;else throw new Error("invalid payload")}return a}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,s){switch(t){case ee.CONNECT:return Sr(s);case ee.DISCONNECT:return s===void 0;case ee.CONNECT_ERROR:return typeof s=="string"||Sr(s);case ee.EVENT:case ee.BINARY_EVENT:return Array.isArray(s)&&(typeof s[0]=="number"||typeof s[0]=="string"&&dl.indexOf(s[0])===-1);case ee.ACK:case ee.BINARY_ACK:return Array.isArray(s)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class ml{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const s=cl(this.reconPack,this.buffers);return this.finishedReconstruction(),s}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const pl=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Ks,Encoder:ul,get PacketType(){return ee},protocol:hl},Symbol.toStringTag,{value:"Module"}));function He(r,t,s){return r.on(t,s),function(){r.off(t,s)}}const xl=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class ga extends ge{constructor(t,s,a){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=s,a&&a.auth&&(this.auth=a.auth),this._opts=Object.assign({},a),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[He(t,"open",this.onopen.bind(this)),He(t,"packet",this.onpacket.bind(this)),He(t,"error",this.onerror.bind(this)),He(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...s){var a,n,i;if(xl.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(s.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(s),this;const o={type:ee.EVENT,data:s};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof s[s.length-1]=="function"){const p=this.ids++,j=s.pop();this._registerAckCallback(p,j),o.id=p}const l=(n=(a=this.io.engine)===null||a===void 0?void 0:a.transport)===null||n===void 0?void 0:n.writable,d=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!l||(d?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(t,s){var a;const n=(a=this.flags.timeout)!==null&&a!==void 0?a:this._opts.ackTimeout;if(n===void 0){this.acks[t]=s;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===t&&this.sendBuffer.splice(l,1);s.call(this,new Error("operation has timed out"))},n),o=(...l)=>{this.io.clearTimeoutFn(i),s.apply(this,l)};o.withError=!0,this.acks[t]=o}emitWithAck(t,...s){return new Promise((a,n)=>{const i=(o,l)=>o?n(o):a(l);i.withError=!0,s.push(i),this.emit(t,...s)})}_addToQueue(t){let s;typeof t[t.length-1]=="function"&&(s=t.pop());const a={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((n,...i)=>a!==this._queue[0]?void 0:(n!==null?a.tryCount>this._opts.retries&&(this._queue.shift(),s&&s(n)):(this._queue.shift(),s&&s(null,...i)),a.pending=!1,this._drainQueue())),this._queue.push(a),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const s=this._queue[0];s.pending&&!t||(s.pending=!0,s.tryCount++,this.flags=s.flags,this.emit.apply(this,s.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:ee.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,s){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,s),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(a=>String(a.id)===t)){const a=this.acks[t];delete this.acks[t],a.withError&&a.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case ee.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case ee.EVENT:case ee.BINARY_EVENT:this.onevent(t);break;case ee.ACK:case ee.BINARY_ACK:this.onack(t);break;case ee.DISCONNECT:this.ondisconnect();break;case ee.CONNECT_ERROR:this.destroy();const a=new Error(t.data.message);a.data=t.data.data,this.emitReserved("connect_error",a);break}}onevent(t){const s=t.data||[];t.id!=null&&s.push(this.ack(t.id)),this.connected?this.emitEvent(s):this.receiveBuffer.push(Object.freeze(s))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const s=this._anyListeners.slice();for(const a of s)a.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const s=this;let a=!1;return function(...n){a||(a=!0,s.packet({type:ee.ACK,id:t,data:n}))}}onack(t){const s=this.acks[t.id];typeof s=="function"&&(delete this.acks[t.id],s.withError&&t.data.unshift(null),s.apply(this,t.data))}onconnect(t,s){this.id=t,this.recovered=s&&this._pid===s,this._pid=s,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:ee.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const s=this._anyListeners;for(let a=0;a<s.length;a++)if(t===s[a])return s.splice(a,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const s=this._anyOutgoingListeners;for(let a=0;a<s.length;a++)if(t===s[a])return s.splice(a,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const s=this._anyOutgoingListeners.slice();for(const a of s)a.apply(this,t.data)}}}function Tt(r){r=r||{},this.ms=r.min||100,this.max=r.max||1e4,this.factor=r.factor||2,this.jitter=r.jitter>0&&r.jitter<=1?r.jitter:0,this.attempts=0}Tt.prototype.duration=function(){var r=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),s=Math.floor(t*this.jitter*r);r=Math.floor(t*10)&1?r+s:r-s}return Math.min(r,this.max)|0};Tt.prototype.reset=function(){this.attempts=0};Tt.prototype.setMin=function(r){this.ms=r};Tt.prototype.setMax=function(r){this.max=r};Tt.prototype.setJitter=function(r){this.jitter=r};class zs extends ge{constructor(t,s){var a;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(s=t,t=void 0),s=s||{},s.path=s.path||"/socket.io",this.opts=s,fs(this,s),this.reconnection(s.reconnection!==!1),this.reconnectionAttempts(s.reconnectionAttempts||1/0),this.reconnectionDelay(s.reconnectionDelay||1e3),this.reconnectionDelayMax(s.reconnectionDelayMax||5e3),this.randomizationFactor((a=s.randomizationFactor)!==null&&a!==void 0?a:.5),this.backoff=new Tt({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(s.timeout==null?2e4:s.timeout),this._readyState="closed",this.uri=t;const n=s.parser||pl;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this._autoConnect=s.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var s;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(s=this.backoff)===null||s===void 0||s.setMin(t),this)}randomizationFactor(t){var s;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(s=this.backoff)===null||s===void 0||s.setJitter(t),this)}reconnectionDelayMax(t){var s;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(s=this.backoff)===null||s===void 0||s.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new sl(this.uri,this.opts);const s=this.engine,a=this;this._readyState="opening",this.skipReconnect=!1;const n=He(s,"open",function(){a.onopen(),t&&t()}),i=l=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",l),t?t(l):this.maybeReconnectOnOpen()},o=He(s,"error",i);if(this._timeout!==!1){const l=this._timeout,d=this.setTimeoutFn(()=>{n(),i(new Error("timeout")),s.close()},l);this.opts.autoUnref&&d.unref(),this.subs.push(()=>{this.clearTimeoutFn(d)})}return this.subs.push(n),this.subs.push(o),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(He(t,"ping",this.onping.bind(this)),He(t,"data",this.ondata.bind(this)),He(t,"error",this.onerror.bind(this)),He(t,"close",this.onclose.bind(this)),He(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(s){this.onclose("parse error",s)}}ondecoded(t){gs(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,s){let a=this.nsps[t];return a?this._autoConnect&&!a.active&&a.connect():(a=new ga(this,t,s),this.nsps[t]=a),a}_destroy(t){const s=Object.keys(this.nsps);for(const a of s)if(this.nsps[a].active)return;this._close()}_packet(t){const s=this.encoder.encode(t);for(let a=0;a<s.length;a++)this.engine.write(s[a],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,s){var a;this.cleanup(),(a=this.engine)===null||a===void 0||a.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,s),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const s=this.backoff.duration();this._reconnecting=!0;const a=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(n=>{n?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",n)):t.onreconnect()}))},s);this.opts.autoUnref&&a.unref(),this.subs.push(()=>{this.clearTimeoutFn(a)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const zt={};function ls(r,t){typeof r=="object"&&(t=r,r=void 0),t=t||{};const s=rl(r,t.path||"/socket.io"),a=s.source,n=s.id,i=s.path,o=zt[n]&&i in zt[n].nsps,l=t.forceNew||t["force new connection"]||t.multiplex===!1||o;let d;return l?d=new zs(a,t):(zt[n]||(zt[n]=new zs(a,t)),d=zt[n]),s.query&&!t.query&&(t.query=s.queryKey),d.socket(s.path,t)}Object.assign(ls,{Manager:zs,Socket:ga,io:ls,connect:ls});const fa=h.createContext(void 0),gl=({children:r})=>{const[t,s]=h.useState(null),[a,n]=h.useState(!1),[i,o]=h.useState("disconnected"),[l,d]=h.useState(null),{user:m}=Te(),p=localStorage.getItem("token");h.useEffect(()=>{if(!m||!p){t&&(t.disconnect(),s(null),n(!1),o("disconnected"));return}return(async()=>{try{o("connecting");const x=ls("http://localhost:5000",{auth:{token:p},transports:["websocket","polling"]});x.on("connect",()=>{console.log(" WebSocket connected:",x.id),n(!0),o("connected"),x.emit("authenticate",{userId:m._id,userRole:m.role})}),x.on("disconnect",y=>{console.log(" WebSocket disconnected:",y),n(!1),o("disconnected")}),x.on("connect_error",y=>{console.error(" WebSocket connection error:",y),o("error")}),x.on("authenticated",y=>{console.log(" WebSocket authenticated:",y)}),x.on("approval_updated",y=>{console.log(" Received approval update:",y),d({type:"approval_updated",data:y,timestamp:new Date})}),x.on("document_updated",y=>{console.log(" Received document update:",y),d({type:"document_updated",data:y,timestamp:new Date})}),x.on("user_activity",y=>{console.log(" Received user activity:",y),d({type:"user_activity",data:y,timestamp:new Date})}),x.on("notification",y=>{console.log(" Received notification:",y),d({type:"notification",data:y,timestamp:new Date})}),x.on("system_message",y=>{console.log(" Received system message:",y),d({type:"system_message",data:y,timestamp:new Date})}),s(x)}catch(x){console.error(" Failed to initialize WebSocket:",x),o("error")}})(),()=>{t&&(t.disconnect(),s(null),n(!1),o("disconnected"))}},[m,p]);const L={socket:t,isConnected:a,connectionStatus:i,lastUpdate:l,sendMessage:(v,x)=>{t&&a?t.emit(v,x):console.warn(" WebSocket not connected, cannot send message")},joinRoom:v=>{t&&a?t.emit("join_room",v):console.warn(" WebSocket not connected, cannot join room")},leaveRoom:v=>{t&&a?t.emit("leave_room",v):console.warn(" WebSocket not connected, cannot leave room")}};return e.jsx(fa.Provider,{value:L,children:r})},Js=()=>{const r=h.useContext(fa);if(r===void 0)throw new Error("useWebSocket must be used within a WebSocketProvider");return r},ne=h.forwardRef(({className:r,variant:t="default",size:s="default",...a},n)=>{const i="inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",o={default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"},l={default:"px-2.5 py-0.5",sm:"px-2 py-0.5 text-xs"};return e.jsx("div",{className:pe(i,o[t],l[s],r),ref:n,...a})});ne.displayName="Badge";const M="http://localhost:5000/api";class Z{static getAuthHeaders(){const t=localStorage.getItem("token");return{"Content-Type":"application/json",...t&&{Authorization:`Bearer ${t}`}}}static async login(t,s){try{return await(await fetch(`${M}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:s})})).json()}catch(a){throw a instanceof TypeError&&a.message.includes("fetch")?new Error("Unable to connect to server. Please check if the backend server is running."):a}}static async register(t){try{const s=await fetch(`${M}/auth/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!s.ok){let n="Registration failed";try{n=(await s.json()).message||n}catch{n=s.statusText||n}throw new Error(n)}return await s.json()}catch(s){throw s instanceof TypeError&&s.message.includes("fetch")?new Error("Unable to connect to server. Please check if the backend server is running."):s}}static async getCurrentUser(){const t=await fetch(`${M}/auth/me`,{headers:this.getAuthHeaders()}),s=await t.json();if(!t.ok)throw new Error(s.message||"Failed to get user");return s}static async logout(){const t=await fetch(`${M}/auth/logout`,{method:"POST",headers:this.getAuthHeaders()}),s=await t.json();if(!t.ok)throw new Error(s.message||"Logout failed");return s}static async updateProfile(t){try{console.log(" API Service: Updating profile with data:",t),console.log(" API Service: Using URL:",`${M}/users/profile`),console.log(" API Service: Auth headers:",this.getAuthHeaders());const s=await fetch(`${M}/users/profile`,{method:"PUT",headers:this.getAuthHeaders(),body:JSON.stringify(t)});if(console.log(" API Service: Response status:",s.status),console.log(" API Service: Response headers:",Object.fromEntries(s.headers.entries())),!s.ok){const n=await s.json();throw console.log(" API Service: Error data:",n),new Error(n.message||"Profile update failed")}const a=await s.json();return console.log(" API Service: Success result:",a),a}catch(s){throw console.error(" API Service: Profile update error:",s),s}}static async forgotPassword(t){const s=await fetch(`${M}/auth/forgot-password`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t})}),a=await s.json();if(!s.ok)throw new Error(a.message||"Failed to send reset email");return a}static async resetPassword(t,s){const a=await fetch(`${M}/auth/reset-password`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:t,newPassword:s})}),n=await a.json();if(!a.ok)throw new Error(n.message||"Failed to reset password");return n}static async changePassword(t,s){const a=await fetch(`${M}/auth/change-password`,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify({currentPassword:t,newPassword:s})}),n=await a.json();if(!a.ok)throw new Error(n.message||"Failed to change password");return n}static async uploadDocument(t){const s=localStorage.getItem("token");console.log(" Uploading document with token:",s?"Present":"Missing");const a=await fetch(`${M}/documents/upload`,{method:"POST",headers:{...s&&{Authorization:`Bearer ${s}`}},body:t});if(console.log(" Upload response status:",a.status),console.log(" Upload response headers:",Object.fromEntries(a.headers.entries())),!a.ok){let i="Document upload failed";try{const o=await a.json();console.log(" Upload error data:",o),i=o.message||o.errors||i}catch{console.log(" Could not parse error response")}throw new Error(i)}const n=await a.json();return console.log(" Upload success data:",n),n}static async getDocuments(t){const s=new URLSearchParams;t!=null&&t.status&&s.append("status",t.status),t!=null&&t.page&&s.append("page",t.page.toString()),t!=null&&t.limit&&s.append("limit",t.limit.toString()),t!=null&&t.search&&s.append("search",t.search);const a=await fetch(`${M}/documents?${s}`,{headers:this.getAuthHeaders()});if(!a.ok)throw new Error("Failed to fetch documents");return a.json()}static async getUserDocuments(){const t=await fetch(`${M}/documents/my`,{headers:this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch user documents");return t.json()}static async getFacultyByDepartment(t,s){const a=new URLSearchParams;a.append("department",t),s&&a.append("designation",s);const n=await fetch(`${M}/users/faculty-by-department?${a}`,{headers:this.getAuthHeaders()});if(!n.ok)throw new Error("Failed to fetch faculty members");return n.json()}static async getAssignedDocuments(){const t=await fetch(`${M}/documents/assigned`,{headers:this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch assigned documents");return t.json()}static async getLetterTemplates(t){const s=t?`?category=${t}`:"",a=await fetch(`${M}/letters/templates${s}`,{headers:{"Content-Type":"application/json"}});if(!a.ok)throw new Error("Failed to fetch letter templates");return a.json()}static async getLetterTemplate(t){const s=await fetch(`${M}/letters/templates/${t}`,{headers:{"Content-Type":"application/json"}});if(!s.ok)throw new Error("Failed to fetch letter template");return s.json()}static async generateLetter(t){console.log(" API Service: Generating letter with FormData"),console.log(" API Service: Using URL:",`${M}/letters/generate`);const s=this.getAuthHeaders(),{"Content-Type":a,...n}=s,i=await fetch(`${M}/letters/generate`,{method:"POST",headers:n,body:t});if(console.log(" API Service: Response status:",i.status),console.log(" API Service: Response headers:",Object.fromEntries(i.headers.entries())),!i.ok){let l="Failed to generate letter",d=null;try{d=await i.json(),console.log(" API Service: Error data:",d),console.log(" API Service: Response status:",i.status),console.log(" API Service: Response statusText:",i.statusText),l=d.message||d.errors||l}catch{console.log(" API Service: Could not parse error response"),console.log(" API Service: Raw response text:",await i.text())}throw console.log(" API Service: Final error message:",l),new Error(l)}const o=await i.json();return console.log(" API Service: Success result:",o),o}static async getUserLetters(){const t=await fetch(`${M}/letters/my`,{headers:this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch user letters");return t.json()}static async getAssignedLetters(){try{return await(await fetch(`${M}/letters/assigned`,{headers:this.getAuthHeaders()})).json()}catch(t){throw t instanceof TypeError&&t.message.includes("fetch")?new Error("Unable to connect to server. Please check if the backend server is running."):t}}static async approveLetter(t,s){console.log(" API Service: Approving letter:",t),console.log(" API Service: Comment:",s),console.log(" API Service: Auth headers:",this.getAuthHeaders());const a=await fetch(`${M}/letters/${t}/approve`,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify({comment:s})});if(console.log(" API Service: Approve response status:",a.status),console.log(" API Service: Approve response headers:",Object.fromEntries(a.headers.entries())),!a.ok){let n="Failed to approve letter";try{const i=await a.json();console.log(" API Service: Approve error data:",i),n=i.message||i.errors||n}catch{console.log(" API Service: Could not parse error response")}throw new Error(n)}return a.json()}static async rejectLetter(t,s){const a=await fetch(`${M}/letters/${t}/reject`,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify({reason:s})});if(!a.ok)throw new Error("Failed to reject letter");return a.json()}static async signLetter(t,s){console.log(" API Service: Signing letter with ID:",t),console.log(" API Service: Signature data:",s);const a=await fetch(`${M}/letters/${t}/sign`,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify({signatureData:s})});if(console.log(" API Service: Sign letter response status:",a.status),!a.ok){let i="Failed to sign letter";try{const o=await a.json();console.log(" API Service: Sign letter error data:",o),i=o.message||o.errors||i}catch{console.log(" API Service: Could not parse sign letter error response")}throw new Error(i)}const n=await a.json();return console.log(" API Service: Sign letter success result:",n),n}static async sendReminder(t,s){console.log(" API Service: Sending reminder for letter ID:",t);const a=await fetch(`${M}/letters/${t}/reminder`,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify({message:s})});if(console.log(" API Service: Reminder response status:",a.status),!a.ok){let i="Failed to send reminder";try{const o=await a.json();console.log(" API Service: Reminder error data:",o),i=o.message||o.errors||i}catch{console.log(" API Service: Could not parse reminder error response")}throw new Error(i)}const n=await a.json();return console.log(" API Service: Reminder success result:",n),n}static async downloadLetter(t){console.log(" API Service: Downloading letter with ID:",t),console.log(" API Service: Using URL:",`${M}/letters/${t}/download`);const s=await fetch(`${M}/letters/${t}/download`,{headers:this.getAuthHeaders()});if(console.log(" API Service: Download letter response status:",s.status),!s.ok){let n="Failed to download letter";try{const i=await s.json();console.log(" API Service: Download letter error data:",i),n=i.message||i.errors||n}catch{console.log(" API Service: Could not parse download letter error response")}throw new Error(n)}const a=await s.blob();return console.log(" API Service: Download letter blob size:",a.size,"bytes"),a}static async getDocumentById(t){const s=await fetch(`${M}/documents/${t}`,{headers:this.getAuthHeaders()});if(!s.ok)throw new Error("Failed to fetch document");return s.json()}static async downloadDocument(t){console.log(" API Service: Downloading document with ID:",t),console.log(" API Service: Using URL:",`${M}/documents/${t}/download`),console.log(" API Service: Auth headers:",this.getAuthHeaders());const s=await fetch(`${M}/documents/${t}/download`,{headers:this.getAuthHeaders()});if(console.log(" API Service: Download response status:",s.status),console.log(" API Service: Download response headers:",Object.fromEntries(s.headers.entries())),!s.ok){let n="Failed to download document";try{const i=await s.json();console.log(" API Service: Download error data:",i),n=i.message||i.errors||n}catch{console.log(" API Service: Could not parse download error response")}throw new Error(n)}const a=await s.blob();return console.log(" API Service: Download blob size:",a.size,"bytes"),console.log(" API Service: Download blob type:",a.type),a}static async downloadSignedDocument(t){console.log(" API Service: Downloading signed document with ID:",t),console.log(" API Service: Using URL:",`${M}/documents/${t}/download-signed`),console.log(" API Service: Auth headers:",this.getAuthHeaders());const s=await fetch(`${M}/documents/${t}/download-signed`,{headers:this.getAuthHeaders()});if(console.log(" API Service: Signed download response status:",s.status),console.log(" API Service: Signed download response headers:",Object.fromEntries(s.headers.entries())),!s.ok){let n="Failed to download signed document";try{const i=await s.json();console.log(" API Service: Signed download error data:",i),n=i.message||i.errors||n}catch{console.log(" API Service: Could not parse signed download error response")}throw new Error(n)}const a=await s.blob();return console.log(" API Service: Signed download blob size:",a.size,"bytes"),console.log(" API Service: Signed download blob type:",a.type),a}static async downloadCleanLetter(t){console.log(" API Service: Downloading clean letter with ID:",t),console.log(" API Service: Using URL:",`${M}/letters/${t}/download-clean`);const s=await fetch(`${M}/letters/${t}/download-clean`,{headers:this.getAuthHeaders()});if(console.log(" API Service: Clean download response status:",s.status),!s.ok){let n="Failed to download clean letter";try{const i=await s.json();console.log(" API Service: Clean download error data:",i),n=i.message||i.errors||n}catch{console.log(" API Service: Could not parse clean download error response")}throw new Error(n)}const a=await s.blob();return console.log(" API Service: Clean download blob size:",a.size,"bytes"),console.log(" API Service: Clean download blob type:",a.type),a}static async downloadSignedLetter(t){console.log(" API Service: Downloading signed letter with ID:",t),console.log(" API Service: Using URL:",`${M}/letters/${t}/download-signed`);const s=await fetch(`${M}/letters/${t}/download-signed`,{headers:this.getAuthHeaders()});if(console.log(" API Service: Signed letter download response status:",s.status),!s.ok){let n="Failed to download signed letter";try{const i=await s.json();console.log(" API Service: Signed letter download error data:",i),n=i.message||i.errors||n}catch{console.log(" API Service: Could not parse signed letter download error response")}throw new Error(n)}const a=await s.blob();return console.log(" API Service: Signed letter download blob size:",a.size,"bytes"),console.log(" API Service: Signed letter download blob type:",a.type),a}static async signDocument(t,s){console.log(" API Service: Signing document with ID:",t),console.log(" API Service: Signature data:",s);const a=await fetch(`${M}/documents/${t}/sign`,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify({signatureData:s})});if(console.log(" API Service: Sign response status:",a.status),!a.ok){let i="Failed to sign document";try{const o=await a.json();console.log(" API Service: Sign error data:",o),i=o.message||o.errors||i}catch{console.log(" API Service: Could not parse sign error response")}throw new Error(i)}const n=await a.json();return console.log(" API Service: Sign success result:",n),n}static async getSignedDocument(t){console.log(" API Service: Getting signed document with ID:",t);const s=await fetch(`${M}/documents/${t}/signed`,{headers:this.getAuthHeaders()});if(console.log(" API Service: Get signed response status:",s.status),!s.ok){let n="Failed to get signed document";try{const i=await s.json();console.log(" API Service: Get signed error data:",i),n=i.message||i.errors||n}catch{console.log(" API Service: Could not parse get signed error response")}throw new Error(n)}const a=await s.json();return console.log(" API Service: Get signed success result:",a),a}static async approveDocument(t){console.log(" API Service: Approving document with ID:",t);const s=await fetch(`${M}/documents/${t}/approve`,{method:"POST",headers:this.getAuthHeaders()});if(console.log(" API Service: Approve response status:",s.status),!s.ok){let n="Failed to approve document";try{const i=await s.json();console.log(" API Service: Approve error data:",i),n=i.message||i.errors||n}catch{console.log(" API Service: Could not parse approve error response")}throw new Error(n)}const a=await s.json();return console.log(" API Service: Approve success result:",a),a}static async getPendingDocuments(t){const s=new URLSearchParams;t!=null&&t.page&&s.append("page",t.page.toString()),t!=null&&t.limit&&s.append("limit",t.limit.toString()),t!=null&&t.priority&&s.append("priority",t.priority),t!=null&&t.documentType&&s.append("documentType",t.documentType),t!=null&&t.search&&s.append("search",t.search);const a=await fetch(`${M}/approvals/pending?${s}`,{headers:this.getAuthHeaders()});if(!a.ok)throw new Error("Failed to fetch pending documents");return a.json()}static async rejectDocument(t,s,a){const n=await fetch(`${M}/approvals/${t}/reject`,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify({reason:s,comment:a})});if(!n.ok)throw new Error("Failed to reject document");return n.json()}static async getApprovalStats(){try{return await(await fetch(`${M}/approvals/stats`,{headers:this.getAuthHeaders()})).json()}catch(t){throw t instanceof TypeError&&t.message.includes("fetch")?new Error("Unable to connect to server. Please check if the backend server is running."):t}}static async uploadSignature(t){const s=await fetch(`${M}/signatures/upload`,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify({signature:t})});if(!s.ok)throw new Error("Failed to upload signature");return s.json()}static async getSignatureFromProfile(t){try{return await(await fetch(`${M}/signatures/profile/${t}`,{headers:this.getAuthHeaders()})).json()}catch(s){throw s instanceof TypeError&&s.message.includes("fetch")?new Error("Unable to connect to server. Please check if the backend server is running."):s}}static async getFacultyApprovalHistory(t,s={}){try{const{status:a,limit:n=50,skip:i=0,sortBy:o="approved_at",sortOrder:l="desc"}=s,d=t?`${M}/letters/approval-history/${t}`:`${M}/letters/approval-history`,m=new URLSearchParams;a&&m.append("status",a),n&&m.append("limit",n.toString()),i&&m.append("skip",i.toString()),o&&m.append("sortBy",o),l&&m.append("sortOrder",l);const p=m.toString(),j=p?`${d}?${p}`:d,f=await fetch(j,{headers:this.getAuthHeaders()}),w=await f.json();if(!f.ok)throw new Error(w.message||"Failed to fetch approval history");return w}catch(a){throw a instanceof TypeError&&a.message.includes("fetch")?new Error("Unable to connect to server. Please check if the backend server is running."):a}}static async getDocumentApprovalHistory(t){try{const s=await fetch(`${M}/letters/${t}/approval-history`,{headers:this.getAuthHeaders()}),a=await s.json();if(!s.ok)throw new Error(a.message||"Failed to fetch document approval history");return a}catch(s){throw s instanceof TypeError&&s.message.includes("fetch")?new Error("Unable to connect to server. Please check if the backend server is running."):s}}static async getSignatureStatus(){const t=await fetch(`${M}/signatures/status`,{headers:this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to get signature status");return t.json()}static async removeSignature(){const t=await fetch(`${M}/signatures/remove`,{method:"DELETE",headers:this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to remove signature");return t.json()}static async getFacultyList(){const t=await fetch(`${M}/users/faculty/list`,{headers:this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch faculty list");return t.json()}static async getDashboardAnalytics(){const t=await fetch(`${M}/analytics/dashboard`,{headers:this.getAuthHeaders()}),s=await t.json();if(!t.ok)throw new Error(s.message||"Failed to fetch dashboard analytics");return s}static async getAllUsers(){return await(await fetch(`${M}/users/all`,{headers:this.getAuthHeaders()})).json()}static async getAllDocuments(){return await(await fetch(`${M}/documents/all`,{headers:this.getAuthHeaders()})).json()}static async getSystemStats(){const t=await fetch(`${M}/analytics/system-stats`,{headers:this.getAuthHeaders()}),s=await t.json();if(!t.ok)throw new Error(s.message||"Failed to fetch system stats");return s}static async updateUserStatus(t,s){const a=await fetch(`${M}/users/${t}/status`,{method:"PUT",headers:this.getAuthHeaders(),body:JSON.stringify({isActive:s})}),n=await a.json();if(!a.ok)throw new Error(n.message||"Failed to update user status");return n}static async updateUserRole(t,s){const a=await fetch(`${M}/users/${t}/role`,{method:"PUT",headers:this.getAuthHeaders(),body:JSON.stringify({role:s})}),n=await a.json();if(!a.ok)throw new Error(n.message||"Failed to update user role");return n}static async updateUser(t,s){const a=await fetch(`${M}/users/${t}`,{method:"PUT",headers:this.getAuthHeaders(),body:JSON.stringify(s)}),n=await a.json();if(!a.ok)throw new Error(n.message||"Failed to update user");return n}static async deleteUser(t){const s=await fetch(`${M}/users/${t}`,{method:"DELETE",headers:this.getAuthHeaders()}),a=await s.json();if(!s.ok)throw new Error(a.message||"Failed to delete user");return a}static async generateLetterPDF(t,s="clean"){console.log(" API Service: Generating PDF for letter:",t,"Type:",s);const a=await fetch(`${M}/letters/${t}/generate-pdf`,{method:"POST",headers:{...this.getAuthHeaders(),"Content-Type":"application/json"},body:JSON.stringify({type:s})});if(console.log(" API Service: PDF generation response status:",a.status),!a.ok){let i="Failed to generate PDF";try{const o=await a.json();console.log(" API Service: PDF generation error data:",o),i=o.message||o.errors||i}catch{console.log(" API Service: Could not parse PDF generation error response")}throw new Error(i)}const n=await a.json();return console.log(" API Service: PDF generation response data:",n),n.data}static async downloadCleanPDF(t){console.log(" API Service: Downloading clean PDF for letter:",t);const s=await fetch(`${M}/letters/${t}/download-clean-pdf`,{headers:this.getAuthHeaders()});if(console.log(" API Service: Clean PDF download response status:",s.status),!s.ok){let n="Failed to download clean PDF";try{const i=await s.json();console.log(" API Service: Clean PDF download error data:",i),n=i.message||i.errors||n}catch{console.log(" API Service: Could not parse clean PDF download error response")}throw new Error(n)}const a=await s.blob();return console.log(" API Service: Clean PDF download blob size:",a.size,"bytes"),console.log(" API Service: Clean PDF download blob type:",a.type),a}static async downloadSignedPDF(t){console.log(" API Service: Downloading signed PDF for letter:",t);const s=await fetch(`${M}/letters/${t}/download-signed-pdf`,{headers:this.getAuthHeaders()});if(console.log(" API Service: Signed PDF download response status:",s.status),!s.ok){let n="Failed to download signed PDF";try{const i=await s.json();console.log(" API Service: Signed PDF download error data:",i),n=i.message||i.errors||n}catch{console.log(" API Service: Could not parse signed PDF download error response")}throw new Error(n)}const a=await s.blob();return console.log(" API Service: Signed PDF download blob size:",a.size,"bytes"),console.log(" API Service: Signed PDF download blob type:",a.type),a}static isAuthenticated(){return!!localStorage.getItem("token")}static getToken(){return localStorage.getItem("token")}}const kr=()=>{const{theme:r,toggleTheme:t}=jo();return e.jsx(g,{variant:"ghost",size:"sm",onClick:t,className:"flex items-center space-x-2 hover:bg-muted/50 transition-all duration-300",title:`Switch to ${r==="dark"?"light":"dark"} mode`,children:r==="dark"?e.jsxs(e.Fragment,{children:[e.jsx(Ur,{className:"h-4 w-4 text-yellow-500"}),e.jsx("span",{className:"hidden sm:inline text-sm",children:"Light"})]}):e.jsxs(e.Fragment,{children:[e.jsx($r,{className:"h-4 w-4 text-blue-400"}),e.jsx("span",{className:"hidden sm:inline text-sm",children:"Dark"})]})})},W=h.forwardRef(({className:r,type:t,...s},a)=>e.jsx("input",{type:t,className:pe("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:a,...s}));W.displayName="Input";const k=h.forwardRef(({className:r,...t},s)=>e.jsx("label",{ref:s,className:pe("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",r),...t}));k.displayName="Label";const U=h.forwardRef(({className:r,...t},s)=>e.jsx("div",{ref:s,className:pe("rounded-lg border bg-card text-card-foreground shadow-sm",r),...t}));U.displayName="Card";const te=h.forwardRef(({className:r,...t},s)=>e.jsx("div",{ref:s,className:pe("flex flex-col space-y-1.5 p-6",r),...t}));te.displayName="CardHeader";const se=h.forwardRef(({className:r,...t},s)=>e.jsx("h3",{ref:s,className:pe("text-2xl font-semibold leading-none tracking-tight",r),...t}));se.displayName="CardTitle";const oe=h.forwardRef(({className:r,...t},s)=>e.jsx("p",{ref:s,className:pe("text-sm text-muted-foreground",r),...t}));oe.displayName="CardDescription";const z=h.forwardRef(({className:r,...t},s)=>e.jsx("div",{ref:s,className:pe("p-6 pt-0",r),...t}));z.displayName="CardContent";const fl=h.forwardRef(({className:r,...t},s)=>e.jsx("div",{ref:s,className:pe("flex items-center p-6 pt-0",r),...t}));fl.displayName="CardFooter";const ys=h.createContext(null),be=h.forwardRef(({children:r,className:t,value:s="",onValueChange:a,...n})=>{const[i,o]=h.useState(!1),l=h.useRef(null);h.useEffect(()=>{const m=p=>{l.current&&!l.current.contains(p.target)&&o(!1)};return document.addEventListener("mousedown",m),()=>{document.removeEventListener("mousedown",m)}},[]);const d=m=>{console.log(` Select: Value changed to "${m}"`),a==null||a(m),o(!1)};return e.jsx(ys.Provider,{value:{value:s,onValueChange:d,isOpen:i,setIsOpen:o},children:e.jsx("div",{ref:l,className:pe("relative",t),...n,children:r})})});be.displayName="Select";const je=h.forwardRef(({className:r,children:t,...s},a)=>{const n=h.useContext(ys);if(!n)throw new Error("SelectTrigger must be used within a Select");const{isOpen:i,setIsOpen:o}=n;return e.jsxs("button",{ref:a,type:"button",className:pe("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),onClick:()=>o(!i),...s,children:[t,e.jsx(Mr,{className:pe("h-4 w-4 opacity-50 transition-transform",i&&"rotate-180")})]})});je.displayName="SelectTrigger";const we=h.forwardRef(({className:r,children:t,...s},a)=>{const n=h.useContext(ys);if(!n)throw new Error("SelectContent must be used within a Select");const{isOpen:i}=n;return i?e.jsx("div",{ref:a,className:pe("absolute z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 slide-in-from-top-2",r),...s,children:t}):null});we.displayName="SelectContent";const P=h.forwardRef(({className:r,value:t,children:s,...a},n)=>{const i=h.useContext(ys);if(!i)throw new Error("SelectItem must be used within a Select");const{value:o,onValueChange:l}=i,d=o===t;return e.jsx("div",{ref:n,className:pe("relative flex w-full cursor-pointer select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",d&&"bg-accent text-accent-foreground",r),"data-value":t,onClick:()=>{console.log(` SelectItem: Clicked on value "${t}"`),l(t)},...a,children:s})});P.displayName="SelectItem";const Ne=h.forwardRef(({className:r,children:t,...s},a)=>e.jsx("span",{ref:a,className:pe("block truncate",r),...s,children:t}));Ne.displayName="SelectValue";const yl=({isOpen:r,onClose:t})=>{const{user:s,updateUser:a}=Te(),{toast:n}=Pe(),[i,o]=h.useState({name:"",email:"",phone:"",address:"",department:"",studentId:"",year:"",semester:"",designation:"",specialization:""}),[l,d]=h.useState(!1),[m,p]=h.useState(!1);h.useEffect(()=>{s&&o({name:s.name||"",email:s.email||"",phone:s.phone||"",address:s.address||"",department:s.department||"",studentId:s.studentId||"",year:s.year||"",semester:s.semester||"",designation:s.designation||"",specialization:s.specialization||""})},[s]);const j=(x,y)=>{console.log(` ProfileEditor: Updating field "${x}" with value "${y}"`),o(T=>{const V={...T,[x]:y};return console.log(" ProfileEditor: Updated form data:",V),V})},f=async()=>{d(!0);try{console.log(" ProfileEditor: Sending profile data:",i);const x=await Z.updateProfile(i);if(console.log(" ProfileEditor: Received response:",x),x.success)a(x.data.user),n({title:"Profile updated successfully!",description:"Your profile information has been saved."}),p(!1);else throw new Error(x.message||"Failed to update profile")}catch(x){console.error(" ProfileEditor: Profile update error:",x),n({title:"Error",description:x instanceof Error?x.message:"Failed to update profile",variant:"destructive"})}finally{d(!1)}},w=()=>{s&&o({name:s.name||"",email:s.email||"",phone:s.phone||"",address:s.address||"",department:s.department||"",studentId:s.studentId||"",year:s.year||"",semester:s.semester||"",designation:s.designation||"",specialization:s.specialization||""}),p(!1)},L=(s==null?void 0:s.role)==="student",v=(s==null?void 0:s.role)==="faculty";return r?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-background rounded-lg shadow-2xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"p-2 bg-veltech-gradient rounded-lg",children:e.jsx(he,{className:"h-6 w-6 text-white"})}),e.jsx("h2",{className:"text-2xl font-bold",children:"Edit Profile"})]}),e.jsx(g,{variant:"ghost",size:"sm",onClick:t,className:"text-muted-foreground hover:text-foreground",children:e.jsx(st,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs(U,{children:[e.jsxs(te,{children:[e.jsxs(se,{className:"flex items-center space-x-2",children:[e.jsx(he,{className:"h-5 w-5"}),e.jsx("span",{children:"Basic Information"})]}),e.jsx(oe,{children:"Update your personal details"})]}),e.jsx(z,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"name",children:"Full Name"}),e.jsxs("div",{className:"relative",children:[e.jsx(W,{id:"name",value:i.name,onChange:x=>j("name",x.target.value),disabled:!m,className:"pl-10"}),e.jsx(he,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"email",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(W,{id:"email",type:"email",value:i.email,onChange:x=>j("email",x.target.value),disabled:!m,className:"pl-10"}),e.jsx(Ht,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"phone",children:"Phone Number"}),e.jsxs("div",{className:"relative",children:[e.jsx(W,{id:"phone",value:i.phone,onChange:x=>j("phone",x.target.value),disabled:!m,className:"pl-10"}),e.jsx(Pn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"address",children:"Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(W,{id:"address",value:i.address,onChange:x=>j("address",x.target.value),disabled:!m,className:"pl-10"}),e.jsx(Nn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"})]})]})]})})]}),e.jsxs(U,{children:[e.jsxs(te,{children:[e.jsxs(se,{className:"flex items-center space-x-2",children:[e.jsx(xn,{className:"h-5 w-5"}),e.jsx("span",{children:"Academic Information"})]}),e.jsx(oe,{children:L?"Your academic details":"Your professional details"})]}),e.jsx(z,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"department",children:"Department"}),m?e.jsxs(be,{value:i.department,onValueChange:x=>j("department",x),children:[e.jsx(je,{children:e.jsx(Ne,{children:i.department||"Select department"})}),e.jsxs(we,{children:[e.jsx(P,{value:"Computer Science Engineering",children:"Computer Science Engineering"}),e.jsx(P,{value:"Electronics and Communication Engineering",children:"Electronics and Communication Engineering"}),e.jsx(P,{value:"Mechanical Engineering",children:"Mechanical Engineering"}),e.jsx(P,{value:"Civil Engineering",children:"Civil Engineering"}),e.jsx(P,{value:"Electrical Engineering",children:"Electrical Engineering"}),e.jsx(P,{value:"Information Technology",children:"Information Technology"}),e.jsx(P,{value:"Aerospace Engineering",children:"Aerospace Engineering"}),e.jsx(P,{value:"Biotechnology",children:"Biotechnology"}),e.jsx(P,{value:"Chemical Engineering",children:"Chemical Engineering"}),e.jsx(P,{value:"Automobile Engineering",children:"Automobile Engineering"})]})]}):e.jsx("div",{className:"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background",children:e.jsx("span",{className:"text-muted-foreground",children:i.department||"No department selected"})})]}),L&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"studentId",children:"Student ID"}),e.jsx(W,{id:"studentId",value:i.studentId,onChange:x=>j("studentId",x.target.value),disabled:!m})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"year",children:"Academic Year"}),m?e.jsxs(be,{value:i.year,onValueChange:x=>j("year",x),children:[e.jsx(je,{children:e.jsx(Ne,{children:i.year||"Select year"})}),e.jsxs(we,{children:[e.jsx(P,{value:"1st Year",children:"1st Year"}),e.jsx(P,{value:"2nd Year",children:"2nd Year"}),e.jsx(P,{value:"3rd Year",children:"3rd Year"}),e.jsx(P,{value:"4th Year",children:"4th Year"})]})]}):e.jsx("div",{className:"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background",children:e.jsx("span",{className:"text-muted-foreground",children:i.year||"No year selected"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"semester",children:"Semester"}),m?e.jsxs(be,{value:i.semester,onValueChange:x=>j("semester",x),children:[e.jsx(je,{children:e.jsx(Ne,{children:i.semester||"Select semester"})}),e.jsxs(we,{children:[e.jsx(P,{value:"1st Semester",children:"1st Semester"}),e.jsx(P,{value:"2nd Semester",children:"2nd Semester"}),e.jsx(P,{value:"3rd Semester",children:"3rd Semester"}),e.jsx(P,{value:"4th Semester",children:"4th Semester"}),e.jsx(P,{value:"5th Semester",children:"5th Semester"}),e.jsx(P,{value:"6th Semester",children:"6th Semester"}),e.jsx(P,{value:"7th Semester",children:"7th Semester"}),e.jsx(P,{value:"8th Semester",children:"8th Semester"})]})]}):e.jsx("div",{className:"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background",children:e.jsx("span",{className:"text-muted-foreground",children:i.semester||"No semester selected"})})]})]}),v&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"designation",children:"Designation"}),m?e.jsxs(be,{value:i.designation,onValueChange:x=>j("designation",x),children:[e.jsx(je,{children:e.jsx(Ne,{children:i.designation||"Select designation"})}),e.jsxs(we,{children:[e.jsx(P,{value:"Professor",children:"Professor"}),e.jsx(P,{value:"Associate Professor",children:"Associate Professor"}),e.jsx(P,{value:"Assistant Professor",children:"Assistant Professor"}),e.jsx(P,{value:"Lecturer",children:"Lecturer"}),e.jsx(P,{value:"HOD",children:"Head of Department"}),e.jsx(P,{value:"Dean",children:"Dean"}),e.jsx(P,{value:"Mentor",children:"Mentor"})]})]}):e.jsx("div",{className:"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background",children:e.jsx("span",{className:"text-muted-foreground",children:i.designation||"No designation selected"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"specialization",children:"Specialization"}),e.jsx(W,{id:"specialization",value:i.specialization,onChange:x=>j("specialization",x.target.value),disabled:!m,placeholder:"e.g., Computer Science, Electronics"})]})]})]})})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[e.jsx("div",{className:"flex items-center space-x-2",children:m?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(g,{onClick:f,disabled:l,className:"flex items-center space-x-2 btn-veltech",children:[e.jsx(Es,{className:"h-4 w-4"}),e.jsx("span",{children:l?"Saving...":"Save Changes"})]}),e.jsxs(g,{onClick:w,variant:"outline",className:"flex items-center space-x-2",children:[e.jsx(st,{className:"h-4 w-4"}),e.jsx("span",{children:"Cancel"})]})]}):e.jsxs(g,{onClick:()=>p(!0),className:"flex items-center space-x-2",children:[e.jsx(An,{className:"h-4 w-4"}),e.jsx("span",{children:"Edit Profile"})]})}),e.jsx(g,{onClick:t,variant:"ghost",className:"text-muted-foreground hover:text-foreground",children:"Close"})]})]})]})}):null},vl=({children:r})=>{const{user:t,logout:s,isAuthenticated:a,loading:n}=Te(),i=ka(),o=Kt(),{toast:l}=Pe(),[d,m]=h.useState(!1),[p,j]=h.useState(!1),f=async()=>{try{a&&await Z.logout(),s(),l({title:"Logged out successfully",description:"You have been logged out of your account."}),o("/")}catch(L){console.error("Logout error:",L),s(),l({title:"Logged out",description:"You have been logged out of your account."}),o("/")}},w=L=>i.pathname===L;return n?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):e.jsxs("div",{className:"min-h-screen relative",children:[e.jsx("header",{className:"glass-card-ultra sticky top-0 z-50 mx-4 mt-4 mb-6 animate-fade-in",children:e.jsx("div",{className:"container-responsive",children:e.jsxs("div",{className:"flex items-center justify-between h-20",children:[e.jsx("div",{className:"flex items-center space-x-2 sm:space-x-4",children:e.jsxs(ce,{to:"/",className:"flex items-center space-x-4 group hover-scale",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"p-4 rounded-3xl shadow-2xl group-hover:scale-110 transition-all duration-500 bg-gradient-to-br from-blue-500 via-purple-500 to-pink-500",children:e.jsx(ae,{className:"h-7 w-7 text-white"})}),e.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 rounded-3xl blur opacity-30 group-hover:opacity-50 transition-opacity duration-500"})]}),e.jsxs("div",{className:"hidden sm:block",children:[e.jsx("span",{className:"text-3xl font-bold bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent",children:"DocuFlow"}),e.jsx("p",{className:"text-sm text-gray-300 -mt-1 font-medium",children:"Document Approval System"})]}),e.jsx("div",{className:"sm:hidden",children:e.jsx("span",{className:"text-2xl font-bold bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent",children:"DocuFlow"})})]})}),a&&e.jsx("div",{className:"md:hidden",children:e.jsx(g,{variant:"ghost",size:"sm",className:"text-muted-foreground",onClick:()=>j(!p),children:p?e.jsx(st,{className:"h-5 w-5"}):e.jsx(kn,{className:"h-5 w-5"})})}),a&&e.jsxs("nav",{className:"hidden md:flex items-center space-x-2",children:[e.jsxs(ce,{to:"/",className:`relative px-6 py-3 rounded-2xl font-medium transition-all duration-300 group ${w("/")?"bg-gradient-to-r from-blue-500 to-purple-500 text-white shadow-lg shadow-blue-500/25":"text-gray-300 hover:text-white hover:bg-white/10"}`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(cs,{className:"h-5 w-5"}),e.jsx("span",{children:"Home"})]}),w("/")&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500 to-purple-500 rounded-2xl blur opacity-30"})]}),(t==null?void 0:t.role)==="student"&&e.jsxs(ce,{to:"/student-dashboard",className:`relative px-6 py-3 rounded-2xl font-medium transition-all duration-300 group ${w("/student-dashboard")?"bg-gradient-to-r from-green-500 to-teal-500 text-white shadow-lg shadow-green-500/25":"text-gray-300 hover:text-white hover:bg-white/10"}`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ae,{className:"h-5 w-5"}),e.jsx("span",{children:"Dashboard"})]}),w("/student-dashboard")&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-green-500 to-teal-500 rounded-2xl blur opacity-30"})]}),(t==null?void 0:t.role)==="faculty"&&e.jsxs(ce,{to:"/faculty-dashboard",className:`relative px-6 py-3 rounded-2xl font-medium transition-all duration-300 group ${w("/faculty-dashboard")?"bg-gradient-to-r from-orange-500 to-red-500 text-white shadow-lg shadow-orange-500/25":"text-gray-300 hover:text-white hover:bg-white/10"}`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ae,{className:"h-5 w-5"}),e.jsx("span",{children:"Dashboard"})]}),w("/faculty-dashboard")&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-orange-500 to-red-500 rounded-2xl blur opacity-30"})]}),(t==null?void 0:t.role)==="admin"&&e.jsxs(ce,{to:"/admin-dashboard",className:`relative px-6 py-3 rounded-2xl font-medium transition-all duration-300 group ${w("/admin-dashboard")?"bg-gradient-to-r from-purple-500 to-pink-500 text-white shadow-lg shadow-purple-500/25":"text-gray-300 hover:text-white hover:bg-white/10"}`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ae,{className:"h-5 w-5"}),e.jsx("span",{children:"Admin Dashboard"})]}),w("/admin-dashboard")&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-500 to-pink-500 rounded-2xl blur opacity-30"})]})]}),e.jsx("div",{className:"flex items-center space-x-3 sm:space-x-4",children:a?e.jsxs(e.Fragment,{children:[e.jsx(kr,{}),e.jsxs("div",{className:"hidden sm:flex items-center space-x-4 text-sm",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-purple-500 rounded-2xl shadow-lg",children:e.jsx(he,{className:"h-5 w-5 text-white"})}),e.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-blue-500 to-purple-500 rounded-2xl blur opacity-30"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-white font-semibold",children:t==null?void 0:t.name}),e.jsx(ne,{className:"text-xs bg-gradient-to-r from-green-500 to-teal-500 text-white border-0 shadow-lg",children:t==null?void 0:t.role})]})]}),e.jsxs("div",{className:"hidden sm:flex items-center space-x-3",children:[e.jsxs(g,{variant:"outline",size:"sm",onClick:()=>m(!0),className:"px-4 py-2 bg-white/10 border-white/20 text-white hover:bg-white/20 hover:border-white/30 transition-all duration-300 rounded-xl",children:[e.jsx(qt,{className:"h-4 w-4 mr-2"}),e.jsx("span",{children:"Profile"})]}),e.jsxs(g,{variant:"outline",size:"sm",onClick:f,className:"px-4 py-2 bg-red-500/20 border-red-500/30 text-red-300 hover:bg-red-500/30 hover:border-red-500/50 transition-all duration-300 rounded-xl",children:[e.jsx(_s,{className:"h-4 w-4 mr-2"}),e.jsx("span",{children:"Logout"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-3 sm:space-x-4",children:[e.jsx(kr,{}),e.jsx(g,{asChild:!0,variant:"outline",size:"sm",className:"px-4 py-2 bg-white/10 border-white/20 text-white hover:bg-white/20 hover:border-white/30 transition-all duration-300 rounded-xl",children:e.jsx(ce,{to:"/login",children:"Login"})}),e.jsx(g,{asChild:!0,size:"sm",className:"px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-500 text-white hover:from-blue-600 hover:to-purple-600 transition-all duration-300 rounded-xl shadow-lg",children:e.jsx(ce,{to:"/register",children:"Register"})})]})})]})})}),a&&p&&e.jsx("div",{className:"mobile-nav-overlay",onClick:()=>j(!1),children:e.jsxs("div",{className:"mobile-nav",onClick:L=>L.stopPropagation(),children:[e.jsx("div",{className:"p-6 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-3 bg-veltech-gradient rounded-xl shadow-lg",children:e.jsx(he,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-foreground",children:t==null?void 0:t.name}),e.jsx(ne,{variant:"outline",className:"text-xs bg-veltech-gradient text-white border-0 shadow-sm",children:t==null?void 0:t.role})]})]}),e.jsx(g,{variant:"ghost",size:"sm",onClick:()=>j(!1),className:"text-muted-foreground hover:bg-white/50 rounded-xl",children:e.jsx(st,{className:"h-5 w-5"})})]})}),e.jsxs("nav",{className:"p-6 space-y-3",children:[e.jsxs(ce,{to:"/",className:`nav-link hover-lift ${w("/")?"active":"hover:bg-gray-100"}`,onClick:()=>j(!1),children:[e.jsx(cs,{className:"h-5 w-5"}),e.jsx("span",{children:"Home"})]}),(t==null?void 0:t.role)==="student"&&e.jsxs(ce,{to:"/student-dashboard",className:`nav-link hover-lift ${w("/student-dashboard")?"active":"hover:bg-gray-100"}`,onClick:()=>j(!1),children:[e.jsx(ae,{className:"h-5 w-5"}),e.jsx("span",{children:"Dashboard"})]}),(t==null?void 0:t.role)==="faculty"&&e.jsxs(ce,{to:"/faculty-dashboard",className:`nav-link hover-lift ${w("/faculty-dashboard")?"active":"hover:bg-gray-100"}`,onClick:()=>j(!1),children:[e.jsx(ae,{className:"h-5 w-5"}),e.jsx("span",{children:"Dashboard"})]}),(t==null?void 0:t.role)==="admin"&&e.jsxs(ce,{to:"/admin-dashboard",className:`nav-link hover-lift ${w("/admin-dashboard")?"active":"hover:bg-gray-100"}`,onClick:()=>j(!1),children:[e.jsx(ae,{className:"h-5 w-5"}),e.jsx("span",{children:"Admin Dashboard"})]})]}),e.jsxs("div",{className:"p-4 border-t border-gray-200 space-y-2",children:[e.jsxs(g,{variant:"outline",size:"sm",onClick:()=>{m(!0),j(!1)},className:"w-full flex items-center justify-center space-x-2 hover:bg-blue-50 hover:text-blue-600 hover:border-blue-200 transition-all duration-300",children:[e.jsx(qt,{className:"h-4 w-4"}),e.jsx("span",{children:"Profile"})]}),e.jsxs(g,{variant:"outline",size:"sm",onClick:()=>{f(),j(!1)},className:"w-full flex items-center justify-center space-x-2 hover:bg-red-50 hover:text-red-600 hover:border-red-200 transition-all duration-300",children:[e.jsx(_s,{className:"h-4 w-4"}),e.jsx("span",{children:"Logout"})]})]})]})}),e.jsx("main",{className:"flex-1 px-4 pb-8 animate-fade-in",children:e.jsx("div",{className:"container-responsive",children:r})}),e.jsx("footer",{className:"glass-card mx-4 mt-8 mb-4 animate-fade-in",children:e.jsx("div",{className:"container-responsive py-8",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-3 mb-6",children:[e.jsx("div",{className:"p-3 rounded-2xl shadow-lg bg-veltech-gradient",children:e.jsx(ae,{className:"h-6 w-6 text-white"})}),e.jsx("span",{className:"text-2xl font-bold text-gradient",children:"DocuFlow"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3 font-medium",children:" 2024 Digital Document Approval System. All rights reserved."}),e.jsx("p",{className:"text-xs text-muted-foreground px-4 leading-relaxed",children:"Streamlining academic document approval processes with digital signatures and tracking."}),e.jsx("p",{className:"text-xs text-muted-foreground mt-3 font-medium",children:"Powered suraj"})]})})}),e.jsx(yl,{isOpen:d,onClose:()=>m(!1)})]})},bl=()=>e.jsxs("div",{className:"min-h-screen",children:[e.jsxs("section",{className:"relative py-32 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-900/20 via-purple-900/20 to-pink-900/20"}),e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("div",{className:"absolute top-20 left-10 w-96 h-96 bg-blue-500/30 rounded-full blur-3xl animate-float"}),e.jsx("div",{className:"absolute bottom-20 right-10 w-80 h-80 bg-purple-500/30 rounded-full blur-3xl animate-float",style:{animationDelay:"2s"}}),e.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-64 h-64 bg-pink-500/20 rounded-full blur-3xl animate-float",style:{animationDelay:"4s"}})]}),e.jsx("div",{className:"relative container-responsive text-center",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx("div",{className:"animate-float mb-12",children:e.jsxs("div",{className:"relative inline-block",children:[e.jsx("div",{className:"w-32 h-32 bg-gradient-to-br from-blue-500 via-purple-500 to-pink-500 rounded-3xl shadow-2xl flex items-center justify-center",children:e.jsx(ae,{className:"h-16 w-16 text-white"})}),e.jsx("div",{className:"absolute -inset-4 bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 rounded-3xl blur opacity-30 animate-pulse"})]})}),e.jsxs("h1",{className:"text-8xl font-bold mb-8 leading-tight animate-fade-in",children:["Digital Document",e.jsx("span",{className:"block bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent mt-2",children:"Approval System"})]}),e.jsx("p",{className:"text-2xl text-gray-300 mb-12 leading-relaxed max-w-4xl mx-auto animate-slide-up font-light",children:"Streamline your academic document approval process with our modern, efficient platform. Submit, track, and approve documents seamlessly with digital signatures and real-time tracking."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-6 justify-center animate-bounce-in",children:[e.jsx(g,{asChild:!0,size:"lg",className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white hover:from-blue-600 hover:to-purple-600 shadow-2xl hover:shadow-3xl transition-all duration-500 hover:-translate-y-2 text-lg px-8 py-4 rounded-2xl font-semibold",children:e.jsx(ce,{to:"/register",children:"Get Started"})}),e.jsx(g,{asChild:!0,size:"lg",variant:"outline",className:"bg-white/10 border-white/30 text-white hover:bg-white/20 backdrop-blur-sm text-lg px-8 py-4 rounded-2xl font-semibold",children:e.jsx(ce,{to:"/login",children:"Sign In"})})]})]})})]}),e.jsxs("section",{className:"py-24 relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-gray-900/50 to-gray-800/50"}),e.jsxs("div",{className:"container-responsive relative",children:[e.jsxs("div",{className:"text-center mb-20 animate-fade-in",children:[e.jsxs("h2",{className:"text-6xl font-bold text-white mb-6",children:["Why Choose ",e.jsx("span",{className:"bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent",children:"DocuFlow"}),"?"]}),e.jsx("p",{className:"text-xl text-gray-300 max-w-4xl mx-auto leading-relaxed",children:"Experience the future of document approval with our comprehensive platform designed for modern educational institutions."})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-8 lg:gap-12",children:[e.jsxs(U,{className:"text-center glass-card-ultra hover-lift animate-slide-in-left group",children:[e.jsxs(te,{className:"pb-6",children:[e.jsx("div",{className:"mx-auto w-24 h-24 bg-gradient-to-br from-blue-500 to-purple-500 rounded-3xl flex items-center justify-center mb-6 shadow-2xl group-hover:scale-110 transition-all duration-500",children:e.jsx(ae,{className:"h-12 w-12 text-white"})}),e.jsx(se,{className:"text-2xl mb-4 text-white",children:"Easy Document Upload"}),e.jsx(oe,{className:"text-lg leading-relaxed text-gray-300",children:"Upload PDF and DOCX documents with automatic summary generation and intelligent approval routing."})]}),e.jsx(z,{children:e.jsxs("div",{className:"text-sm text-gray-300 bg-blue-500/20 p-4 rounded-xl border border-blue-500/30",children:[e.jsx("span",{className:"font-semibold text-blue-300",children:"Smart Processing:"})," Supports multiple file formats with AI-powered analysis"]})})]}),e.jsxs(U,{className:"text-center glass-card-ultra hover-lift animate-slide-up group",children:[e.jsxs(te,{className:"pb-6",children:[e.jsx("div",{className:"mx-auto w-24 h-24 bg-gradient-to-br from-green-500 to-teal-500 rounded-3xl flex items-center justify-center mb-6 shadow-2xl group-hover:scale-110 transition-all duration-500",children:e.jsx(ut,{className:"h-12 w-12 text-white"})}),e.jsx(se,{className:"text-2xl mb-4 text-white",children:"Role-Based Access"}),e.jsx(oe,{className:"text-lg leading-relaxed text-gray-300",children:"Dedicated dashboards for students and faculty with appropriate permissions and secure workflows."})]}),e.jsx(z,{children:e.jsxs("div",{className:"text-sm text-gray-300 bg-green-500/20 p-4 rounded-xl border border-green-500/30",children:[e.jsx("span",{className:"font-semibold text-green-300",children:"Secure Access:"})," VTU ID integration with enterprise-grade security"]})})]}),e.jsxs(U,{className:"text-center glass-card-ultra hover-lift animate-slide-in-right group",children:[e.jsxs(te,{className:"pb-6",children:[e.jsx("div",{className:"mx-auto w-24 h-24 bg-gradient-to-br from-orange-500 to-pink-500 rounded-3xl flex items-center justify-center mb-6 shadow-2xl group-hover:scale-110 transition-all duration-500",children:e.jsx(Ee,{className:"h-12 w-12 text-white"})}),e.jsx(se,{className:"text-2xl mb-4 text-white",children:"Real-time Tracking"}),e.jsx(oe,{className:"text-lg leading-relaxed text-gray-300",children:"Track your document approval status in real-time with detailed progress updates and notifications."})]}),e.jsx(z,{children:e.jsxs("div",{className:"text-sm text-gray-300 bg-orange-500/20 p-4 rounded-xl border border-orange-500/30",children:[e.jsx("span",{className:"font-semibold text-orange-300",children:"Live Updates:"})," Instant notifications and comprehensive status tracking"]})})]})]})]})]}),e.jsxs("section",{className:"py-20 relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-red-900/20 via-orange-900/20 to-yellow-900/20"}),e.jsx("div",{className:"container-responsive text-center relative",children:e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsx("div",{className:"animate-bounce-in mb-8",children:e.jsx("div",{className:"inline-flex items-center justify-center w-24 h-24 bg-gradient-to-r from-red-500 to-orange-500 rounded-3xl shadow-2xl",children:e.jsx(wt,{className:"h-12 w-12 text-white"})})}),e.jsx("h2",{className:"text-5xl font-bold text-white mb-6 animate-fade-in",children:"Administrator Access"}),e.jsx("p",{className:"text-xl text-gray-300 mb-8 leading-relaxed animate-slide-up",children:"Need to manage the system? Contact the system administrator for admin account setup and system configuration."}),e.jsxs("div",{className:"text-sm text-gray-300 bg-red-500/20 p-6 rounded-2xl border border-red-500/30 shadow-lg animate-scale-in",children:[e.jsx("p",{className:"font-semibold mb-2 text-lg text-red-300",children:"Administrator Access Required"}),e.jsx("p",{className:"leading-relaxed",children:"Please contact the system administrator to request admin privileges and system management access."})]})]})})]}),e.jsxs("section",{className:"py-24 relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-900/20 via-purple-900/20 to-pink-900/20"}),e.jsx("div",{className:"container-responsive text-center relative",children:e.jsxs("div",{className:"max-w-5xl mx-auto",children:[e.jsx("div",{className:"animate-bounce-in mb-8",children:e.jsx("div",{className:"inline-flex items-center justify-center w-24 h-24 bg-gradient-to-br from-blue-500 via-purple-500 to-pink-500 rounded-3xl shadow-2xl",children:e.jsx(wt,{className:"h-12 w-12 text-white"})})}),e.jsx("h2",{className:"text-6xl font-bold text-white mb-6 animate-fade-in",children:"Ready to Get Started?"}),e.jsx("p",{className:"text-xl text-gray-300 mb-12 leading-relaxed animate-slide-up",children:"Join thousands of students and faculty already using DocuFlow for seamless document management and approval workflows."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-6 justify-center animate-bounce-in",children:[e.jsx(g,{asChild:!0,size:"lg",className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white hover:from-blue-600 hover:to-purple-600 text-lg px-8 py-4 rounded-2xl font-semibold shadow-2xl hover:shadow-3xl transition-all duration-300",children:e.jsx(ce,{to:"/register",children:"Create Account"})}),e.jsx(g,{asChild:!0,size:"lg",variant:"outline",className:"bg-white/10 border-white/30 text-white hover:bg-white/20 text-lg px-8 py-4 rounded-2xl font-semibold transition-all duration-300",children:e.jsx(ce,{to:"/login",children:"Sign In"})})]})]})})]})]}),jl=()=>{const r=Kt(),{login:t}=Te(),{toast:s}=Pe(),[a,n]=h.useState({email:"",password:"",role:"student"}),[i,o]=h.useState(!1),[l,d]=h.useState(!1),[m,p]=h.useState(null),[j,f]=h.useState(!1),[w,L]=h.useState(""),[v,x]=h.useState(!1),[y,T]=h.useState("");h.useEffect(()=>{(async()=>{try{const I=await fetch("http://localhost:5000/health");p(I.ok)}catch{p(!1)}})()},[]);const V=async $=>{$.preventDefault(),d(!0);try{console.log(" Login attempt started"),console.log("Login form data:",a);const I=await Z.login(a.email,a.password);if(console.log(" Login response:",I),console.log(" Response type:",typeof I),console.log(" Response success:",I==null?void 0:I.success),console.log(" Response data:",I==null?void 0:I.data),console.log(" Full response object:",JSON.stringify(I,null,2)),I&&I.success){console.log(" API call successful, processing login...");const B=I.data.user,S=I.data.token;if(console.log(" User data:",B),console.log(" Token received:",S?"Yes":"No"),B.role!==a.role){console.log(" Role mismatch:",`Expected ${a.role}, got ${B.role}`),L(`Invalid access! This account is registered as ${B.role}. Please select the correct role (${B.role}) and try again.`),f(!0),d(!1);return}console.log(" Role validation passed"),t(B,S),s({title:"Login successful!",description:`Welcome back, ${B.name}!`}),B.role==="student"?r("/student-dashboard"):B.role==="faculty"?r("/faculty-dashboard"):r("/")}else throw console.log(" Unexpected response structure"),console.log(" Response:",I),new Error("Unexpected response from server")}catch(I){console.error(" Login error:",I),console.error("Error details:",{message:I instanceof Error?I.message:"Unknown error",stack:I instanceof Error?I.stack:void 0,error:I});let B="Invalid credentials. Please try again.";I instanceof Error&&(B=I.message,I.message.includes("Unable to connect to server")?B="Server connection failed. Please check if the backend server is running.":I.message.includes("Invalid credentials")?B="Invalid email or password. Please check your credentials and try again.":I.message.includes("Account is deactivated")&&(B="Your account has been deactivated. Please contact the administrator.")),T(B),x(!0)}finally{d(!1)}},R=($,I)=>{n($==="role"?B=>({...B,role:I,email:"",password:""}):B=>({...B,[$]:I}))};return e.jsxs("div",{className:"min-h-screen flex items-center justify-center p-4",children:[e.jsxs(U,{className:"w-full max-w-md glass-card-ultra shadow-2xl animate-scale-in",children:[e.jsxs(te,{className:"text-center p-6 sm:p-8",children:[e.jsx("div",{className:"mx-auto w-20 h-20 sm:w-24 sm:h-24 bg-gradient-to-br from-blue-500 via-purple-500 to-pink-500 rounded-3xl flex items-center justify-center mb-6 shadow-2xl animate-float",children:e.jsx(lr,{className:"h-10 w-10 sm:h-12 sm:w-12 text-white"})}),e.jsx(se,{className:"text-3xl sm:text-4xl font-bold bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent mb-2",children:"Welcome Back"}),e.jsx(oe,{className:"text-base sm:text-lg text-gray-300",children:"Sign in to your DocuFlow account to continue"}),e.jsx("div",{className:"mt-4 flex items-center justify-center gap-2 text-sm",children:m===null?e.jsxs("div",{className:"flex items-center gap-2 text-gray-400",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-500"}),"Checking connection..."]}):m?e.jsxs("div",{className:"flex items-center gap-2 text-green-400",children:[e.jsx(Br,{className:"h-4 w-4"}),"Server connected"]}):e.jsxs("div",{className:"flex items-center gap-2 text-red-400",children:[e.jsx(hs,{className:"h-4 w-4"}),"Server disconnected"]})})]}),e.jsxs(z,{className:"p-6 sm:p-8",children:[e.jsxs("form",{onSubmit:V,className:"space-y-6 sm:space-y-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(k,{htmlFor:"role",className:"text-base sm:text-lg font-semibold text-white",children:"I am a"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(g,{type:"button",variant:a.role==="student"?"default":"outline",onClick:()=>R("role","student"),className:`flex-1 text-base sm:text-lg py-3 rounded-xl transition-all duration-300 ${a.role==="student"?"bg-gradient-to-r from-blue-500 to-purple-500 text-white shadow-lg hover:shadow-xl":"bg-white/10 border-white/20 text-white hover:bg-white/20 hover:border-white/30"}`,children:[e.jsx(he,{className:"h-5 w-5 mr-2"}),"Student"]}),e.jsxs(g,{type:"button",variant:a.role==="faculty"?"default":"outline",onClick:()=>R("role","faculty"),className:`flex-1 text-base sm:text-lg py-3 rounded-xl transition-all duration-300 ${a.role==="faculty"?"bg-gradient-to-r from-blue-500 to-purple-500 text-white shadow-lg hover:shadow-xl":"bg-white/10 border-white/20 text-white hover:bg-white/20 hover:border-white/30"}`,children:[e.jsx(he,{className:"h-5 w-5 mr-2"}),"Faculty"]})]}),e.jsx("div",{className:"p-4 bg-orange-500/20 border border-orange-500/30 rounded-xl shadow-sm",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(tt,{className:"h-5 w-5 text-orange-300 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-orange-300 mb-2",children:"Important: Role Selection Required"}),e.jsx("p",{className:"text-sm text-gray-300 leading-relaxed",children:"You can only login with the role you registered with. Selecting the wrong role will show an error popup."})]})]})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(k,{htmlFor:"email",className:"text-base sm:text-lg font-semibold text-white",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(W,{id:"email",type:"email",placeholder:"Enter your email address",value:a.email,onChange:$=>R("email",$.target.value),required:!0,className:"pl-12 pr-4 py-3 text-base sm:text-lg rounded-xl bg-white/10 border-white/20 text-white placeholder-gray-400 focus:border-blue-500 focus:ring-4 focus:ring-blue-500/20 transition-all duration-300"}),e.jsx(he,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(k,{htmlFor:"password",className:"text-base sm:text-lg font-semibold text-white",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(W,{id:"password",type:i?"text":"password",placeholder:"Enter your password",value:a.password,onChange:$=>R("password",$.target.value),required:!0,className:"pl-12 pr-12 py-3 text-base sm:text-lg rounded-xl bg-white/10 border-white/20 text-white placeholder-gray-400 focus:border-blue-500 focus:ring-4 focus:ring-blue-500/20 transition-all duration-300"}),e.jsx(ht,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx(g,{type:"button",variant:"ghost",size:"sm",onClick:()=>o(!i),className:"absolute right-2 top-1/2 transform -translate-y-1/2 h-8 w-8 rounded-lg hover:bg-white/10 transition-colors duration-200",children:i?e.jsx(It,{className:"h-5 w-5 text-gray-400"}):e.jsx(Me,{className:"h-5 w-5 text-gray-400"})})]})]}),e.jsx(g,{type:"submit",className:"w-full bg-gradient-to-r from-blue-500 to-purple-500 text-white h-12 sm:h-14 text-base sm:text-lg font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:translate-y-0",disabled:l||m===!1,children:l?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 sm:h-6 sm:w-6 border-b-2 border-white mr-3"}),e.jsx("span",{className:"text-base sm:text-lg",children:"Signing in..."})]}):m===!1?e.jsxs(e.Fragment,{children:[e.jsx(hs,{className:"h-5 w-5 sm:h-6 sm:w-6 mr-3"}),e.jsx("span",{className:"text-base sm:text-lg",children:"Server Offline"})]}):e.jsxs(e.Fragment,{children:[e.jsx(lr,{className:"h-5 w-5 sm:h-6 sm:w-6 mr-3"}),e.jsx("span",{className:"text-base sm:text-lg",children:"Sign In"})]})}),m===!1&&e.jsx("div",{className:"p-4 bg-red-500/20 border-2 border-red-500/30 rounded-xl shadow-sm",children:e.jsxs("p",{className:"text-sm text-red-300 font-medium",children:[e.jsx("strong",{children:"Server Connection Issue:"})," The backend server is not responding. Please ensure the server is running on port 5000."]})})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx(ce,{to:"/forgot-password",className:"text-base text-blue-400 hover:text-blue-300 hover:underline font-semibold transition-colors duration-200",children:"Forgot your password?"})}),e.jsxs("div",{className:"mt-8 text-center space-y-4",children:[e.jsxs("p",{className:"text-base text-gray-300",children:["Don't have an account?"," ",e.jsx(ce,{to:"/register",className:"text-blue-400 hover:text-blue-300 hover:underline font-semibold transition-colors duration-200",children:"Sign up"})]}),e.jsxs("div",{className:"text-sm text-gray-300 p-4 bg-white/10 rounded-xl border border-white/20 shadow-sm",children:[e.jsx("p",{className:"font-semibold text-white mb-2",children:"Need Administrator Access?"}),e.jsx("p",{className:"text-sm mb-3 text-gray-300",children:"Administrators have a separate secure login portal."}),e.jsxs(ce,{to:"/admin-login",className:"inline-flex items-center text-sm text-red-400 hover:text-red-300 font-semibold transition-colors duration-200",children:[e.jsx(wt,{className:"h-4 w-4 mr-2"}),"Admin Login Portal"]})]})]})]})]}),j&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",children:e.jsx("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full mx-4 p-8 animate-scale-in",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"p-3 bg-red-100 rounded-xl",children:e.jsx(tt,{className:"h-8 w-8 text-red-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-bold text-red-900 mb-3",children:"Role Mismatch"}),e.jsx("p",{className:"text-base text-red-700 mb-6 leading-relaxed",children:w}),e.jsx("div",{className:"flex justify-end",children:e.jsx(g,{onClick:()=>{f(!1),L("")},className:"bg-red-600 hover:bg-red-700 text-white px-6 py-2 rounded-xl font-semibold transition-all duration-300 hover:shadow-lg",children:"Close"})})]}),e.jsx(g,{variant:"ghost",size:"sm",onClick:()=>{f(!1),L("")},className:"text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg p-2",children:""})]})})}),v&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",children:e.jsx("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full mx-4 p-8 animate-scale-in",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"p-3 bg-red-100 rounded-xl",children:e.jsx(tt,{className:"h-8 w-8 text-red-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-bold text-red-900 mb-3",children:"Login Failed"}),e.jsx("p",{className:"text-base text-red-700 mb-6 leading-relaxed",children:y}),e.jsx("div",{className:"flex justify-end",children:e.jsx(g,{onClick:()=>{x(!1),T("")},className:"bg-red-600 hover:bg-red-700 text-white px-6 py-2 rounded-xl font-semibold transition-all duration-300 hover:shadow-lg",children:"Close"})})]}),e.jsx(g,{variant:"ghost",size:"sm",onClick:()=>{x(!1),T("")},className:"text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg p-2",children:""})]})})})]})},wl=()=>{const r=Kt(),{login:t}=Te(),{toast:s}=Pe(),[a,n]=h.useState({email:"",password:""}),[i,o]=h.useState(!1),[l,d]=h.useState(!1),[m,p]=h.useState(null),[j,f]=h.useState(!1),[w,L]=h.useState(""),[v,x]=h.useState(!1),[y,T]=h.useState("");h.useEffect(()=>{(async()=>{try{const I=await fetch("http://localhost:5000/health");p(I.ok)}catch{p(!1)}})()},[]);const V=async $=>{$.preventDefault(),d(!0);try{const I=await Z.login(a.email,a.password);if(I&&I.success){const B=I.data.user,S=I.data.token;if(B.role!=="admin"){L(`Access denied! This account is registered as ${B.role}. Only administrators can access this portal. Please use the regular login portal.`),f(!0),d(!1);return}t(B,S),s({title:"Admin Login successful!",description:`Welcome back, ${B.name}!`}),r("/admin-dashboard")}else throw new Error("Unexpected response from server")}catch(I){console.error("Admin login error:",I);let B="Invalid admin credentials. Please try again.";I instanceof Error&&(B=I.message,I.message.includes("Unable to connect to server")?B="Server connection failed. Please check if the backend server is running.":I.message.includes("Invalid credentials")?B="Invalid admin email or password. Please check your credentials and try again.":I.message.includes("Account is deactivated")&&(B="Your admin account has been deactivated. Please contact the system administrator.")),T(B),x(!0)}finally{d(!1)}},R=($,I)=>{n(B=>({...B,[$]:I}))};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-red-50 to-orange-50 p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsx("div",{className:"mb-4",children:e.jsxs(ce,{to:"/login",className:"inline-flex items-center text-sm text-muted-foreground hover:text-primary transition-colors",children:[e.jsx(Vt,{className:"h-4 w-4 mr-1"}),"Back to Student/Faculty Login"]})}),e.jsxs(U,{className:"shadow-xl border-red-100",children:[e.jsxs(te,{className:"text-center",children:[e.jsx("div",{className:"mx-auto w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center mb-4",children:e.jsx(wt,{className:"h-6 w-6 text-red-600"})}),e.jsx(se,{className:"text-2xl text-red-800",children:"Administrator Access"}),e.jsx(oe,{className:"text-red-600",children:"Secure admin login for system management"}),e.jsx("div",{className:"mt-4 flex items-center justify-center gap-2 text-sm",children:m===null?e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-red-600"}),"Checking connection..."]}):m?e.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[e.jsx(Br,{className:"h-4 w-4"}),"Server connected"]}):e.jsxs("div",{className:"flex items-center gap-2 text-red-600",children:[e.jsx(hs,{className:"h-4 w-4"}),"Server disconnected"]})})]}),e.jsxs(z,{children:[e.jsxs("form",{onSubmit:V,className:"space-y-4",children:[e.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-red-700",children:[e.jsx("strong",{children:"Admin Access Only:"})," This login is restricted to system administrators."]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"email",children:"Admin Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(W,{id:"email",type:"email",placeholder:"Enter admin email",value:a.email,onChange:$=>R("email",$.target.value),required:!0,className:"pl-10"}),e.jsx(he,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"password",children:"Admin Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(W,{id:"password",type:i?"text":"password",placeholder:"Enter admin password",value:a.password,onChange:$=>R("password",$.target.value),required:!0,className:"pl-10 pr-10"}),e.jsx(ht,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(g,{type:"button",variant:"ghost",size:"sm",onClick:()=>o(!i),className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",children:i?e.jsx(It,{className:"h-4 w-4 text-muted-foreground"}):e.jsx(Me,{className:"h-4 w-4 text-muted-foreground"})})]})]}),e.jsx(g,{type:"submit",className:"w-full bg-red-600 hover:bg-red-700",disabled:l||m===!1,children:l?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Authenticating..."]}):m===!1?e.jsxs(e.Fragment,{children:[e.jsx(hs,{className:"h-4 w-4 mr-2"}),"Server Offline"]}):e.jsxs(e.Fragment,{children:[e.jsx(wt,{className:"h-4 w-4 mr-2"}),"Admin Sign In"]})}),m===!1&&e.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-red-700",children:[e.jsx("strong",{children:"Server Connection Issue:"})," The backend server is not responding. Please ensure the server is running on port 5000."]})})]}),e.jsx("div",{className:"mt-6 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-yellow-700",children:[e.jsx("strong",{children:"Security Notice:"})," Admin access is logged and monitored. Unauthorized access attempts will be reported."]})})]})]}),j&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsx("div",{className:"bg-white rounded-lg shadow-lg max-w-md w-full mx-4 p-6",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:e.jsx(wt,{className:"h-6 w-6 text-red-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-red-900 mb-2",children:"Admin Access Denied"}),e.jsx("p",{className:"text-sm text-red-700 mb-4",children:w}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(g,{variant:"outline",onClick:()=>{f(!1),L("")},children:"Close"}),e.jsxs(g,{onClick:()=>{f(!1),L(""),r("/login")},className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(he,{className:"h-4 w-4 mr-2"}),"Go to Login"]})]})]}),e.jsx(g,{variant:"ghost",size:"sm",onClick:()=>{f(!1),L("")},className:"text-gray-400 hover:text-gray-600",children:""})]})})}),v&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsx("div",{className:"bg-white rounded-lg shadow-lg max-w-md w-full mx-4 p-6",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:e.jsx(tt,{className:"h-6 w-6 text-red-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-red-900 mb-2",children:"Admin Login Failed"}),e.jsx("p",{className:"text-sm text-red-700 mb-4",children:y}),e.jsx("div",{className:"flex justify-end",children:e.jsx(g,{onClick:()=>{x(!1),T("")},className:"bg-red-600 hover:bg-red-700 text-white",children:"Close"})})]}),e.jsx(g,{variant:"ghost",size:"sm",onClick:()=>{x(!1),T("")},className:"text-gray-400 hover:text-gray-600",children:""})]})})})]})})},Nl=["Computer Science","Electronics and Communication","Mechanical Engineering","Civil Engineering","Electrical Engineering","Information Science","Aerospace Engineering","Chemical Engineering"],Sl=["Mentor","HOD","Dean","Assistant Professor","Professor"],kl=()=>{const r=Kt(),{login:t}=Te(),{toast:s}=Pe(),[a,n]=h.useState({name:"",email:"",password:"",confirmPassword:"",role:"student",vtuId:"",facultyId:"",designation:"",department:""}),[i,o]=h.useState(!1),[l,d]=h.useState(!1),[m,p]=h.useState(!1),j=async w=>{if(w.preventDefault(),console.log(" Registration form submitted"),console.log("Form data:",a),a.password!==a.confirmPassword){console.log(" Password mismatch"),s({title:"Password mismatch",description:"Passwords do not match. Please try again.",variant:"destructive"});return}if(a.password.length<6){console.log(" Password too short"),s({title:"Password too short",description:"Password must be at least 6 characters long.",variant:"destructive"});return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.email)){console.log(" Invalid email format"),s({title:"Invalid email",description:"Please enter a valid email address.",variant:"destructive"});return}if(a.name.trim().length<2){console.log(" Name too short"),s({title:"Name too short",description:"Please enter your full name (at least 2 characters).",variant:"destructive"});return}if(a.role==="student"){if(!a.vtuId.trim()){console.log(" Missing VTU ID"),s({title:"VTU ID required",description:"Please enter your VTU ID.",variant:"destructive"});return}if(!/^[A-Za-z]{2,}\d+$/.test(a.vtuId.trim())){console.log(" Invalid VTU ID format"),s({title:"Invalid VTU ID format",description:"VTU ID should contain letters followed by numbers (e.g., VTU123456).",variant:"destructive"});return}}if(a.role==="faculty"){if(!a.facultyId.trim()){console.log(" Missing Faculty ID"),s({title:"Faculty ID required",description:"Please enter your Faculty ID.",variant:"destructive"});return}if(a.facultyId.trim().length<3){console.log(" Faculty ID too short"),s({title:"Faculty ID too short",description:"Faculty ID should be at least 3 characters long.",variant:"destructive"});return}}p(!0);try{if(!a.department.trim()){console.log(" Missing department"),s({title:"Department required",description:"Please select your department.",variant:"destructive"});return}if(a.role==="faculty"&&!a.designation.trim()){console.log(" Missing designation"),s({title:"Designation required",description:"Please select your designation.",variant:"destructive"});return}const v={name:a.name,email:a.email,password:a.password,role:a.role,vtuId:a.role==="student"?a.vtuId:void 0,facultyId:a.role==="faculty"?a.facultyId:void 0,designation:a.role==="faculty"?a.designation:void 0,department:a.department};console.log(" Sending registration data:",v);const x=await Z.register(v);if(console.log(" Registration response:",x),x.success){const y=x.data.user,T=x.data.token;t(y,T),s({title:"Registration successful!",description:`Welcome to DDAS, ${y.name}!`}),y.role==="student"?r("/student-dashboard"):y.role==="faculty"?r("/faculty-dashboard"):r("/")}else throw new Error(x.message||"Registration failed")}catch(v){console.error(" Registration error:",v),console.error("Error details:",{message:v instanceof Error?v.message:"Unknown error",stack:v instanceof Error?v.stack:void 0,error:v}),s({title:"Registration failed",description:v instanceof Error?v.message:"Something went wrong. Please try again.",variant:"destructive"})}finally{p(!1)}},f=(w,L)=>{n(w==="role"?v=>({...v,role:L,vtuId:"",facultyId:"",designation:"",department:""}):v=>({...v,[w]:L}))};return e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:e.jsxs(U,{className:"w-full max-w-md glass-card-ultra shadow-2xl",children:[e.jsxs(te,{className:"text-center p-6 sm:p-8",children:[e.jsx("div",{className:"mx-auto w-20 h-20 sm:w-24 sm:h-24 bg-gradient-to-br from-blue-500 via-purple-500 to-pink-500 rounded-3xl flex items-center justify-center mb-6 shadow-2xl animate-float",children:e.jsx(Kn,{className:"h-10 w-10 sm:h-12 sm:w-12 text-white"})}),e.jsx(se,{className:"text-3xl sm:text-4xl font-bold bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent mb-2",children:"Create Account"}),e.jsx(oe,{className:"text-base sm:text-lg text-gray-300",children:"Join DocuFlow to streamline your document approval process"})]}),e.jsx(z,{className:"p-6 sm:p-8",children:e.jsxs("form",{onSubmit:j,className:"space-y-6 sm:space-y-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(k,{htmlFor:"role",className:"text-base sm:text-lg font-semibold text-white",children:"I am a"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(g,{type:"button",variant:a.role==="student"?"default":"outline",onClick:()=>f("role","student"),className:`flex-1 text-base sm:text-lg py-3 rounded-xl transition-all duration-300 ${a.role==="student"?"bg-gradient-to-r from-blue-500 to-purple-500 text-white shadow-lg hover:shadow-xl":"bg-white/10 border-white/20 text-white hover:bg-white/20 hover:border-white/30"}`,children:[e.jsx(he,{className:"h-5 w-5 mr-2"}),"Student"]}),e.jsxs(g,{type:"button",variant:a.role==="faculty"?"default":"outline",onClick:()=>f("role","faculty"),className:`flex-1 text-base sm:text-lg py-3 rounded-xl transition-all duration-300 ${a.role==="faculty"?"bg-gradient-to-r from-blue-500 to-purple-500 text-white shadow-lg hover:shadow-xl":"bg-white/10 border-white/20 text-white hover:bg-white/20 hover:border-white/30"}`,children:[e.jsx(he,{className:"h-5 w-5 mr-2"}),"Faculty"]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(k,{htmlFor:"name",className:"text-base sm:text-lg font-semibold text-white",children:"Full Name"}),e.jsxs("div",{className:"relative",children:[e.jsx(W,{id:"name",type:"text",placeholder:"Enter your full name",value:a.name,onChange:w=>f("name",w.target.value),required:!0,className:"pl-12 pr-4 py-3 text-base sm:text-lg rounded-xl bg-white/10 border-white/20 text-white placeholder-gray-400 focus:border-blue-500 focus:ring-4 focus:ring-blue-500/20 transition-all duration-300"}),e.jsx(he,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(k,{htmlFor:"email",className:"text-base sm:text-lg font-semibold text-white",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(W,{id:"email",type:"email",placeholder:"Enter your email",value:a.email,onChange:w=>f("email",w.target.value),required:!0,className:"pl-12 pr-4 py-3 text-base sm:text-lg rounded-xl bg-white/10 border-white/20 text-white placeholder-gray-400 focus:border-blue-500 focus:ring-4 focus:ring-blue-500/20 transition-all duration-300"}),e.jsx(Ht,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"})]})]}),a.role==="student"&&e.jsxs("div",{className:"space-y-3",children:[e.jsx(k,{htmlFor:"vtuId",className:"text-base sm:text-lg font-semibold text-white",children:"VTU ID"}),e.jsxs("div",{className:"relative",children:[e.jsx(W,{id:"vtuId",type:"text",placeholder:"Enter your VTU ID",value:a.vtuId,onChange:w=>f("vtuId",w.target.value),required:!0,className:"pl-12 pr-4 py-3 text-base sm:text-lg rounded-xl bg-white/10 border-white/20 text-white placeholder-gray-400 focus:border-blue-500 focus:ring-4 focus:ring-blue-500/20 transition-all duration-300"}),e.jsx(he,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"})]})]}),a.role==="faculty"&&e.jsxs("div",{className:"space-y-3",children:[e.jsx(k,{htmlFor:"facultyId",className:"text-base sm:text-lg font-semibold text-white",children:"Faculty ID"}),e.jsxs("div",{className:"relative",children:[e.jsx(W,{id:"facultyId",type:"text",placeholder:"Enter your Faculty ID",value:a.facultyId,onChange:w=>f("facultyId",w.target.value),required:!0,className:"pl-12 pr-4 py-3 text-base sm:text-lg rounded-xl bg-white/10 border-white/20 text-white placeholder-gray-400 focus:border-blue-500 focus:ring-4 focus:ring-blue-500/20 transition-all duration-300"}),e.jsx(he,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(k,{htmlFor:"department",className:"text-base sm:text-lg font-semibold text-white",children:"Department *"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:a.department,onChange:w=>{console.log("Department selected:",w.target.value),f("department",w.target.value)},className:"w-full pl-12 pr-4 py-3 text-base sm:text-lg rounded-xl bg-white/10 border-white/20 text-white focus:border-blue-500 focus:ring-4 focus:ring-blue-500/20 transition-all duration-300 appearance-none cursor-pointer",required:!0,style:{backgroundImage:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e")`,backgroundPosition:"right 12px center",backgroundRepeat:"no-repeat",backgroundSize:"16px"},children:[e.jsx("option",{value:"",className:"bg-gray-800 text-white",children:"Select your department"}),Nl.map(w=>e.jsx("option",{value:w,className:"bg-gray-800 text-white",children:w},w))]}),e.jsx(Ya,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"})]}),e.jsxs("p",{className:"text-sm text-gray-300",children:["Current selection: ",a.department||"None"]})]}),a.role==="faculty"&&e.jsxs("div",{className:"space-y-3",children:[e.jsx(k,{htmlFor:"designation",className:"text-base sm:text-lg font-semibold text-white",children:"Designation *"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:a.designation,onChange:w=>{console.log("Designation selected:",w.target.value),f("designation",w.target.value)},className:"w-full pl-12 pr-4 py-3 text-base sm:text-lg rounded-xl bg-white/10 border-white/20 text-white focus:border-blue-500 focus:ring-4 focus:ring-blue-500/20 transition-all duration-300 appearance-none cursor-pointer",required:!0,style:{backgroundImage:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e")`,backgroundPosition:"right 12px center",backgroundRepeat:"no-repeat",backgroundSize:"16px"},children:[e.jsx("option",{value:"",className:"bg-gray-800 text-white",children:"Select your designation"}),Sl.map(w=>e.jsx("option",{value:w,className:"bg-gray-800 text-white",children:w},w))]}),e.jsx(he,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"})]}),e.jsxs("p",{className:"text-sm text-gray-300",children:["Current selection: ",a.designation||"None"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"password",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(W,{id:"password",type:i?"text":"password",placeholder:"Enter your password",value:a.password,onChange:w=>f("password",w.target.value),required:!0,className:"pl-10 pr-10"}),e.jsx(ht,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(g,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>o(!i),children:i?e.jsx(It,{className:"h-4 w-4 text-muted-foreground"}):e.jsx(Me,{className:"h-4 w-4 text-muted-foreground"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"confirmPassword",children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(W,{id:"confirmPassword",type:l?"text":"password",placeholder:"Confirm your password",value:a.confirmPassword,onChange:w=>f("confirmPassword",w.target.value),required:!0,className:"pl-10 pr-10"}),e.jsx(ht,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(g,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>d(!l),children:l?e.jsx(It,{className:"h-4 w-4 text-muted-foreground"}):e.jsx(Me,{className:"h-4 w-4 text-muted-foreground"})})]})]}),e.jsx(g,{type:"submit",className:"w-full",disabled:m,children:m?"Creating Account...":"Create Account"}),e.jsxs("div",{className:"text-center text-sm text-muted-foreground",children:["Already have an account?"," ",e.jsx(ce,{to:"/login",className:"font-semibold text-primary hover:underline",children:"Sign in here"})]}),e.jsxs("div",{className:"text-center text-sm text-muted-foreground border-t pt-4",children:[e.jsx("p",{className:"mb-2",children:"Need administrator access?"}),e.jsx("p",{className:"text-xs",children:"Contact the system administrator for admin account setup"})]})]})})]})})},Dl=()=>{const{toast:r}=Pe(),[t,s]=h.useState(""),[a,n]=h.useState(!1),[i,o]=h.useState(!1),l=async d=>{d.preventDefault(),n(!0);try{const m=await Z.forgotPassword(t);m.success&&(o(!0),r({title:"Reset email sent!",description:m.message}))}catch(m){console.error("Forgot password error:",m),r({title:"Error",description:m instanceof Error?m.message:"Something went wrong. Please try again.",variant:"destructive"})}finally{n(!1)}};return i?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary/5 to-primary/10 p-4",children:e.jsxs(U,{className:"w-full max-w-md shadow-xl",children:[e.jsxs(te,{className:"text-center",children:[e.jsx("div",{className:"mx-auto w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mb-4",children:e.jsx(Ee,{className:"h-6 w-6 text-green-600"})}),e.jsx(se,{className:"text-2xl",children:"Check Your Email"}),e.jsx(oe,{children:"We've sent password reset instructions to your email address"})]}),e.jsxs(z,{className:"text-center space-y-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"If you don't see the email, check your spam folder or try again."}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{onClick:()=>{o(!1),s("")},variant:"outline",className:"w-full",children:"Try Different Email"}),e.jsx(g,{asChild:!0,variant:"ghost",className:"w-full",children:e.jsxs(ce,{to:"/login",children:[e.jsx(Vt,{className:"h-4 w-4 mr-2"}),"Back to Login"]})})]})]})]})}):e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary/5 to-primary/10 p-4",children:e.jsxs(U,{className:"w-full max-w-md shadow-xl",children:[e.jsxs(te,{className:"text-center",children:[e.jsx("div",{className:"mx-auto w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center mb-4",children:e.jsx(Ht,{className:"h-6 w-6 text-primary"})}),e.jsx(se,{className:"text-2xl",children:"Forgot Password?"}),e.jsx(oe,{children:"Enter your email address and we'll send you a link to reset your password"})]}),e.jsxs(z,{children:[e.jsxs("form",{onSubmit:l,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"email",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(W,{id:"email",type:"email",placeholder:"Enter your email address",value:t,onChange:d=>s(d.target.value),required:!0,className:"pl-10"}),e.jsx(Ht,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"})]})]}),e.jsx(g,{type:"submit",className:"w-full",disabled:a,children:a?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Sending..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ht,{className:"h-4 w-4 mr-2"}),"Send Reset Link"]})})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx(g,{asChild:!0,variant:"ghost",className:"w-full",children:e.jsxs(ce,{to:"/login",children:[e.jsx(Vt,{className:"h-4 w-4 mr-2"}),"Back to Login"]})})})]})]})})},Cl=()=>{const{toast:r}=Pe(),[t]=Da(),s=Kt(),[a,n]=h.useState({newPassword:"",confirmPassword:""}),[i,o]=h.useState(!1),[l,d]=h.useState(!1),[m,p]=h.useState(!1),[j,f]=h.useState(!1),[w,L]=h.useState("");h.useEffect(()=>{const y=t.get("token");y?L(y):(r({title:"Invalid Link",description:"Password reset link is invalid or missing token.",variant:"destructive"}),s("/login"))},[t,s,r]);const v=async y=>{if(y.preventDefault(),a.newPassword!==a.confirmPassword){r({title:"Password mismatch",description:"Passwords do not match. Please try again.",variant:"destructive"});return}if(a.newPassword.length<6){r({title:"Password too short",description:"Password must be at least 6 characters long.",variant:"destructive"});return}p(!0);try{(await Z.resetPassword(w,a.newPassword)).success&&(f(!0),r({title:"Password reset successful!",description:"Your password has been updated successfully."}))}catch(T){console.error("Reset password error:",T),r({title:"Reset failed",description:T instanceof Error?T.message:"Something went wrong. Please try again.",variant:"destructive"})}finally{p(!1)}},x=(y,T)=>{n(V=>({...V,[y]:T}))};return j?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary/5 to-primary/10 p-4",children:e.jsxs(U,{className:"w-full max-w-md shadow-xl",children:[e.jsxs(te,{className:"text-center",children:[e.jsx("div",{className:"mx-auto w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mb-4",children:e.jsx(Ee,{className:"h-6 w-6 text-green-600"})}),e.jsx(se,{className:"text-2xl",children:"Password Reset Complete!"}),e.jsx(oe,{children:"Your password has been successfully updated"})]}),e.jsxs(z,{className:"text-center space-y-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"You can now log in with your new password."}),e.jsx(g,{asChild:!0,className:"w-full",children:e.jsx(ce,{to:"/login",children:"Continue to Login"})})]})]})}):e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary/5 to-primary/10 p-4",children:e.jsxs(U,{className:"w-full max-w-md shadow-xl",children:[e.jsxs(te,{className:"text-center",children:[e.jsx("div",{className:"mx-auto w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center mb-4",children:e.jsx(ht,{className:"h-6 w-6 text-primary"})}),e.jsx(se,{className:"text-2xl",children:"Reset Your Password"}),e.jsx(oe,{children:"Enter your new password below"})]}),e.jsxs(z,{children:[e.jsxs("form",{onSubmit:v,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"newPassword",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(W,{id:"newPassword",type:i?"text":"password",placeholder:"Enter your new password",value:a.newPassword,onChange:y=>x("newPassword",y.target.value),required:!0,className:"pl-10 pr-10"}),e.jsx(ht,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(g,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>o(!i),children:i?e.jsx(It,{className:"h-4 w-4 text-muted-foreground"}):e.jsx(Me,{className:"h-4 w-4 text-muted-foreground"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"confirmPassword",children:"Confirm New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(W,{id:"confirmPassword",type:l?"text":"password",placeholder:"Confirm your new password",value:a.confirmPassword,onChange:y=>x("confirmPassword",y.target.value),required:!0,className:"pl-10 pr-10"}),e.jsx(ht,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(g,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>d(!l),children:l?e.jsx(It,{className:"h-4 w-4 text-muted-foreground"}):e.jsx(Me,{className:"h-4 w-4 text-muted-foreground"})})]})]}),e.jsx(g,{type:"submit",className:"w-full",disabled:m,children:m?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Resetting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ht,{className:"h-4 w-4 mr-2"}),"Reset Password"]})})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx(g,{asChild:!0,variant:"ghost",className:"w-full",children:e.jsxs(ce,{to:"/login",children:[e.jsx(Vt,{className:"h-4 w-4 mr-2"}),"Back to Login"]})})})]})]})})},Jt=h.forwardRef(({className:r,...t},s)=>e.jsx("textarea",{className:pe("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:s,...t}));Jt.displayName="Textarea";const Dr=[{id:"application",name:"Application Letter",description:"Template for formal application letters",category:"application",template:`From: {{fromName}}
{{fromAddress}}
{{fromEmail}}
{{fromPhone}}

Date: {{date}}

To: {{toName}}
{{toDesignation}}
{{toDepartment}}
{{institutionName}}

Subject: {{subject}}

{{salutation}},

{{mainBody}}

I hope you will consider my application favorably.

Thank you for your time and consideration.

Yours sincerely,
{{fromName}}

_________________________
{{facultySignature}}`,fields:[{name:"fromName",label:"Your Name",type:"text",required:!0,placeholder:"Enter your full name"},{name:"fromAddress",label:"Your Address",type:"textarea",required:!0,placeholder:"Enter your address"},{name:"fromEmail",label:"Your Email",type:"text",required:!0,placeholder:"Enter your email"},{name:"fromPhone",label:"Your Phone",type:"text",required:!0,placeholder:"Enter your phone number"},{name:"date",label:"Date",type:"date",required:!0},{name:"toName",label:"Recipient Name",type:"text",required:!0,placeholder:"Enter recipient name"},{name:"toDesignation",label:"Recipient Designation",type:"text",required:!0,placeholder:"e.g., HOD, Dean"},{name:"toDepartment",label:"Department",type:"text",required:!0,placeholder:"Enter department name"},{name:"institutionName",label:"Institution Name",type:"text",required:!0,placeholder:"Enter institution name"},{name:"subject",label:"Subject",type:"text",required:!0,placeholder:"Enter letter subject"},{name:"salutation",label:"Salutation",type:"text",required:!0,placeholder:"e.g., Respected Sir/Madam"},{name:"mainBody",label:"Main Body",type:"textarea",required:!0,placeholder:"Write the main content of your letter"},{name:"facultySignature",label:"Faculty Signature Space",type:"text",required:!1,placeholder:"Space for faculty signature"}]},{id:"custom",name:"Custom Letter",description:"Simple notepad to write any custom letter for submission or approval",category:"custom",template:`{{customContent}}

_________________________
{{facultySignature}}`,fields:[{name:"customContent",label:"Write Your Letter",type:"textarea",required:!0,placeholder:"Write your complete letter here. Include all details like your name, recipient details, subject, content, etc. This will be submitted for approval and signing."}]}],Al=()=>{const{user:r}=Te(),{toast:t}=Pe(),[s,a]=h.useState([]),[n,i]=h.useState(null),[o,l]=h.useState({}),[d,m]=h.useState({mentors:[],hods:[],deans:[]}),[p,j]=h.useState({assignedMentor:"",assignedHOD:"",assignedDean:""}),[f,w]=h.useState(null),[L,v]=h.useState(!1),[x,y]=h.useState("");h.useEffect(()=>{V(),T()},[]);const T=async()=>{console.log(" Using hardcoded templates"),a(Dr),console.log(" Loaded templates:",Dr.length)};h.useEffect(()=>{n&&R()},[n,o]);const V=async()=>{if(!(r!=null&&r.department)){console.log("No user department found in E-Letter Generator:",r);return}console.log("Loading faculty options for E-Letter Generator, department:",r.department);try{const[S,C,O]=await Promise.all([Z.getFacultyByDepartment(r.department,"Mentor"),Z.getFacultyByDepartment(r.department,"HOD"),Z.getFacultyByDepartment(r.department,"Dean")]);console.log("E-Letter Generator faculty responses:",{mentorsResponse:S,hodsResponse:C,deansResponse:O}),m({mentors:S.success?S.data.faculty:[],hods:C.success?C.data.faculty:[],deans:O.success?O.data.faculty:[]})}catch(S){console.error("Error loading faculty options in E-Letter Generator:",S),t({title:"Warning",description:"Could not load faculty options. Please refresh the page.",variant:"destructive"})}},R=()=>{if(!n)return;let S=n.template;Object.keys(o).forEach(C=>{const O=`{{${C}}}`;S=S.replace(new RegExp(O,"g"),o[C]||"")}),y(S)},$=(S,C)=>{l(O=>({...O,[S]:C}))},I=async()=>{var D;if(!n){t({title:"Error",description:"Please select a template",variant:"destructive"});return}const C=n.fields.filter(A=>A.required).filter(A=>!o[A.name]);if(C.length>0){t({title:"Error",description:`Please fill in all required fields: ${C.map(A=>A.label).join(", ")}`,variant:"destructive"});return}if(!p.assignedMentor&&!p.assignedHOD&&!p.assignedDean){t({title:"Error",description:"Please select at least one faculty member for approval",variant:"destructive"});return}const O=localStorage.getItem("token");if(!O){t({title:"Not authenticated",description:"Please log in to generate letters.",variant:"destructive"});return}if(!r){t({title:"User not found",description:"Please log in again.",variant:"destructive"});return}try{if(v(!0),console.log(" E-Letter generation started"),console.log("Current user:",r),console.log("Auth token:",O),console.log("Is authenticated:",!!r&&!!O),console.log("Selected template:",n),console.log("Form data:",o),console.log("Workflow selection:",p),n.id==="custom"){console.log(" Generating Custom Letter and submitting for approval...");let ue=n.template;Object.keys(o).forEach(ke=>{const N=`{{${ke}}}`;ue=ue.replace(new RegExp(N,"g"),o[ke]||"")});const le=new FormData;le.append("templateId",n.id),le.append("title",`Custom Letter - ${new Date().toLocaleDateString()}`),le.append("fields",JSON.stringify(o)),le.append("content",ue),p.assignedMentor&&p.assignedMentor.trim()&&le.append("assignedMentor",p.assignedMentor),p.assignedHOD&&p.assignedHOD.trim()&&le.append("assignedHOD",p.assignedHOD),p.assignedDean&&p.assignedDean.trim()&&le.append("assignedDean",p.assignedDean),f&&le.append("proofFile",f),console.log(" Submitting Custom Letter to API for workflow..."),console.log(" FormData contents:");for(let[ke,N]of le.entries())console.log(`  ${ke}:`,N);console.log(" FormData size:",((D=le.get("content"))==null?void 0:D.toString().length)||0,"characters"),console.log(" Proof file:",f?`${f.name} (${f.size} bytes)`:"None");const xe=await Z.generateLetter(le);if(console.log(" Custom Letter submission response:",xe),xe.success)t({title:"Custom Letter Submitted!",description:"Your custom letter has been submitted for approval."}),i(null),l({}),j({assignedMentor:"",assignedHOD:"",assignedDean:""}),w(null),y("");else throw new Error(xe.message||"Failed to submit custom letter");return}console.log(" Generating Application Letter via API...");let A=n.template;Object.keys(o).forEach(ue=>{const le=`{{${ue}}}`;A=A.replace(new RegExp(le,"g"),o[ue]||"")});const E=new FormData;E.append("templateId",n.id),E.append("title",`${n.name} - ${o.fromName||"Letter"}`),E.append("fields",JSON.stringify(o)),p.assignedMentor&&p.assignedMentor.trim()&&E.append("assignedMentor",p.assignedMentor),p.assignedHOD&&p.assignedHOD.trim()&&E.append("assignedHOD",p.assignedHOD),p.assignedDean&&p.assignedDean.trim()&&E.append("assignedDean",p.assignedDean),f&&E.append("proofFile",f),console.log(" Sending letter data to API with proof file:",(f==null?void 0:f.name)||"No proof file");const J=await Z.generateLetter(E);if(console.log(" Letter generation response:",J),J.success)t({title:"Application Letter Generated!",description:"Your application letter has been created and submitted for approval."}),i(null),l({}),j({assignedMentor:"",assignedHOD:"",assignedDean:""}),w(null),y("");else throw new Error(J.message||"Failed to generate letter")}catch(A){console.error(" Error generating letter:",A),console.error(" Error details:",{message:A instanceof Error?A.message:"Unknown error",stack:A instanceof Error?A.stack:void 0,error:A});let E="Unknown error occurred";A instanceof Error&&(E=A.message,A.message.includes("Invalid token")?E="Your session has expired. Please log in again.":A.message.includes("Failed to fetch")?E="Unable to connect to server. Please check your internet connection.":A.message.includes("401")?E="Authentication failed. Please log in again.":A.message.includes("403")?E="You do not have permission to perform this action.":A.message.includes("500")&&(E="Server error. Please try again later.")),t({title:"Error",description:`Failed to generate letter: ${E}`,variant:"destructive"})}finally{v(!1)}},B=S=>{var O;const C=o[S.name]||"";switch(S.type){case"textarea":return e.jsx(Jt,{id:S.name,value:C,onChange:D=>$(S.name,D.target.value),placeholder:S.placeholder,className:"bg-background",rows:3});case"select":return e.jsxs(be,{value:C,onValueChange:D=>$(S.name,D),children:[e.jsx(je,{className:"bg-background",children:e.jsx(Ne,{})}),e.jsx(we,{children:(O=S.options)==null?void 0:O.map(D=>e.jsx(P,{value:D,children:D},D))})]});default:return e.jsx(W,{id:S.name,type:S.type,value:C,onChange:D=>$(S.name,D.target.value),placeholder:S.placeholder,className:"bg-background"})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Choose a Letter Template"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Select a template to create your formal letter"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.map(S=>e.jsx("div",{onClick:()=>i(S),className:`p-4 border-2 rounded-lg cursor-pointer transition-all duration-200 ${(n==null?void 0:n.id)===S.id?"border-blue-500 bg-blue-50 shadow-md":"border-gray-200 hover:border-blue-300 hover:shadow-sm"}`,children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${(n==null?void 0:n.id)===S.id?"bg-blue-100":"bg-gray-100"}`,children:e.jsx(ae,{className:`h-5 w-5 ${(n==null?void 0:n.id)===S.id?"text-blue-600":"text-gray-600"}`})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:S.name}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:S.description}),e.jsx("span",{className:"inline-block mt-2 px-2 py-1 text-xs bg-gray-100 text-gray-600 rounded-full",children:S.category})]})]})},S.id))})]}),n&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(Qe,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Fill Letter Details"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Complete the form to generate your letter"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.fields.map(S=>e.jsxs("div",{className:S.type==="textarea"?"md:col-span-2":"",children:[e.jsxs(k,{htmlFor:S.name,className:"text-sm font-medium text-gray-700",children:[S.label,S.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx("div",{className:"mt-1",children:B(S)})]},S.name))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"h-5 w-5"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Approval Workflow"})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{children:"Select Mentor (Optional)"}),e.jsxs("select",{value:p.assignedMentor,onChange:S=>{console.log("E-Letter Mentor selected:",S.target.value),j(C=>({...C,assignedMentor:S.target.value}))},className:"w-full p-2 border border-gray-300 rounded-md bg-white",children:[e.jsx("option",{value:"",children:"Select mentor"}),d.mentors.map(S=>e.jsxs("option",{value:S._id,children:[S.name," (",S.designation,")"]},S._id))]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Selected: ",p.assignedMentor||"None"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{children:"Select HOD (Optional)"}),e.jsxs("select",{value:p.assignedHOD,onChange:S=>{console.log("E-Letter HOD selected:",S.target.value),j(C=>({...C,assignedHOD:S.target.value}))},className:"w-full p-2 border border-gray-300 rounded-md bg-white",children:[e.jsx("option",{value:"",children:"Select HOD"}),d.hods.map(S=>e.jsxs("option",{value:S._id,children:[S.name," (",S.designation,")"]},S._id))]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Selected: ",p.assignedHOD||"None"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{children:"Select Dean (Optional)"}),e.jsxs("select",{value:p.assignedDean,onChange:S=>{console.log("E-Letter Dean selected:",S.target.value),j(C=>({...C,assignedDean:S.target.value}))},className:"w-full p-2 border border-gray-300 rounded-md bg-white",children:[e.jsx("option",{value:"",children:"Select Dean"}),d.deans.map(S=>e.jsxs("option",{value:S._id,children:[S.name," (",S.designation,")"]},S._id))]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Selected: ",p.assignedDean||"None"]})]})]}),e.jsxs("div",{className:"text-sm text-muted-foreground bg-muted p-3 rounded-lg",children:[e.jsx("p",{className:"font-medium mb-1",children:"Workflow Information:"}),e.jsx("p",{children:" Select at least one faculty member for approval"}),e.jsx("p",{children:" Letter will be routed to selected faculty in order: Mentor  HOD  Dean"}),e.jsx("p",{children:" Faculty will be able to e-sign the letter after approval"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ae,{className:"h-5 w-5"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Proof Attachment (Optional)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"proofFile",children:"Attach Supporting Document"}),e.jsx(W,{id:"proofFile",type:"file",accept:".pdf,.doc,.docx,.jpg,.jpeg,.png",onChange:S=>{var O;const C=((O=S.target.files)==null?void 0:O[0])||null;w(C),console.log("Proof file selected:",(C==null?void 0:C.name)||"None")},className:"bg-background"}),f&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Selected: ",f.name," (",(f.size/1024/1024).toFixed(2)," MB)"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Supported formats: PDF, DOC, DOCX, JPG, PNG (Max 10MB)"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Me,{className:"h-5 w-5"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Letter Preview"})]}),e.jsx(U,{className:"bg-background",children:e.jsx(z,{className:"p-6",children:e.jsx("div",{className:"whitespace-pre-wrap text-sm leading-relaxed p-4 border rounded-lg bg-white",style:{fontFamily:"'Times New Roman', Times, serif",fontSize:"12pt"},children:x||"Fill in the form to see preview..."})})})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(g,{onClick:I,disabled:L,className:"w-full md:w-auto",children:L?e.jsxs(e.Fragment,{children:[e.jsx(ds,{className:"mr-2 h-4 w-4 animate-spin"}),"Generating Letter..."]}):"Generate & Submit Letter"})})]})]})},_l=()=>{const[r,t]=h.useState(!1),[s,a]=h.useState([]),[n,i]=h.useState(""),[o,l]=h.useState(!1),d=h.useRef(null),m=[{id:"1",question:"How do I create a new letter?",answer:'To create a new letter, click on the "Create E-Letter" section in your dashboard. You can use the available templates to generate formal letters quickly.',category:"Letter Creation"},{id:"2",question:"What is the approval process?",answer:"Your letters go through a digital approval workflow: Mentor  HOD  Dean. Each approver reviews and either approves or rejects your letter with feedback.",category:"Approval Process"},{id:"3",question:"How long does approval take?",answer:"Approval time varies depending on faculty availability. Typically, it takes 2-5 business days for each approval step in the workflow.",category:"Timeline"},{id:"4",question:"Can I track my letter status?",answer:'Yes! In the "My Letters" section, you can see the real-time status of all your submitted letters including pending, approved, or rejected status.',category:"Tracking"},{id:"5",question:"What if my letter gets rejected?",answer:"If your letter is rejected, you will see the rejection reason. You can then modify your letter and resubmit it for approval.",category:"Rejection"},{id:"6",question:"How do I download my approved letter?",answer:'Once your letter is approved or signed, you will see a "Download" button next to your letter in the "My Letters" section.',category:"Download"},{id:"7",question:"What file formats are supported?",answer:"The system supports PDF files for document uploads. For E-Letters, the system generates HTML format documents that can be easily downloaded.",category:"File Formats"},{id:"8",question:"Can I edit my letter after submission?",answer:"No, you cannot edit a letter once it's submitted. If changes are needed, you would need to create a new letter or wait for rejection feedback.",category:"Editing"},{id:"9",question:"Who can I contact for technical support?",answer:"For technical issues, please contact your system administrator or IT support team. They can help with login issues, system errors, or other technical problems.",category:"Support"},{id:"10",question:"Is my data secure?",answer:"Yes, the system uses secure authentication and all your documents are encrypted. Only authorized faculty members can access your submitted letters.",category:"Security"},{id:"11",question:"How can I send a reminder for my pending letter?",answer:'If your letter is taking too long to get approved, you can send a friendly reminder to the faculty member. Click on "Send Reminder" next to your pending letter in the "My Letters" section. You can send one reminder per day.',category:"Reminders"},{id:"12",question:"What if my letter is stuck in approval?",answer:"If your letter has been pending for more than 5 business days, you can send a reminder to the faculty member. The system will automatically determine who to send the reminder to based on the current approval stage.",category:"Reminders"}],p=()=>{var v;(v=d.current)==null||v.scrollIntoView({behavior:"smooth"})};h.useEffect(()=>{p()},[s]),h.useEffect(()=>{r&&s.length===0&&a([{id:"welcome",text:"Hello! I'm your Veltech digital assistant. I can help you with questions about the document approval system. You can ask me anything or browse the Quick Help section below!",isUser:!1,timestamp:new Date}])},[r]);const j=()=>{if(!n.trim())return;const v={id:Date.now().toString(),text:n,isUser:!0,timestamp:new Date};a(x=>[...x,v]),i(""),setTimeout(()=>{const x=f(n),y={id:(Date.now()+1).toString(),text:x,isUser:!1,timestamp:new Date};a(T=>[...T,y])},1e3)},f=v=>{const x=v.toLowerCase();return x.includes("hello")||x.includes("hi")?"Hello! How can I help you today? You can ask me about creating letters, tracking approvals, or any other questions about the system.":x.includes("letter")&&x.includes("create")?'To create a new letter, go to the "Create E-Letter" section in your dashboard. You can use templates to generate formal letters quickly. Would you like to know more about the approval process?':x.includes("approval")||x.includes("approve")?'The approval process follows this workflow: Mentor  HOD  Dean. Each step typically takes 2-5 business days. You can track the status in the "My Letters" section.':x.includes("status")||x.includes("track")?'You can track your letter status in the "My Letters" section. It shows real-time updates including pending, approved, or rejected status with timestamps.':x.includes("download")?`Once your letter is approved or signed, you'll see a download button next to it in the "My Letters" section. The system generates HTML format documents.`:x.includes("reject")||x.includes("rejected")?"If your letter is rejected, you'll see the rejection reason. You can then create a new letter with the necessary changes and resubmit it.":x.includes("help")||x.includes("support")?"I'm here to help! You can browse the Quick Help section below for common questions, or ask me anything specific about the document approval system.":x.includes("reminder")||x.includes("remind")?'If your letter is taking too long to get approved, you can send a friendly reminder to the faculty member. Go to the "My Letters" section and click "Send Reminder" next to your pending letter. You can send one reminder per day to avoid spamming faculty members.':x.includes("stuck")||x.includes("pending")||x.includes("long")?"If your letter has been pending for more than 5 business days, you can send a reminder to the faculty member. The system will automatically determine who to send the reminder to based on the current approval stage (Mentor  HOD  Dean).":`I understand you're asking about: "`+v+'". While I can help with general questions about the document approval system, for specific issues, please check the Quick Help section below or contact your system administrator.'},w=v=>{const x={id:Date.now().toString(),text:`**${v.question}**

${v.answer}`,isUser:!1,timestamp:new Date};a(y=>[...y,x]),l(!1)},L=v=>{v.key==="Enter"&&!v.shiftKey&&(v.preventDefault(),j())};return e.jsxs(e.Fragment,{children:[!r&&e.jsx("div",{className:"fixed bottom-6 right-6 z-50",children:e.jsx(g,{onClick:()=>t(!0),className:"h-14 w-14 rounded-full bg-blue-600 hover:bg-blue-700 text-white shadow-lg hover:shadow-xl transition-all duration-300 animate-pulse relative",size:"lg",children:e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 100 100",className:"text-white",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"veltechGradBtn",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#ffffff"}),e.jsx("stop",{offset:"100%",stopColor:"#e0e7ff"})]})}),e.jsx("rect",{x:"15",y:"25",width:"70",height:"50",rx:"6",fill:"url(#veltechGradBtn)",stroke:"white",strokeWidth:"1.5"}),e.jsx("text",{x:"50",y:"40",textAnchor:"middle",fontSize:"10",fontWeight:"bold",fill:"#1e40af",children:"V"}),e.jsx("text",{x:"50",y:"52",textAnchor:"middle",fontSize:"6",fill:"#1e40af",children:"TECH"}),e.jsx("circle",{cx:"25",cy:"32",r:"2",fill:"#3b82f6"}),e.jsx("circle",{cx:"75",cy:"32",r:"2",fill:"#3b82f6"})]})})})}),r&&e.jsxs("div",{className:"fixed bottom-6 right-6 z-50 w-96 h-[600px] bg-white rounded-lg shadow-2xl border border-gray-200 flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white p-4 rounded-t-lg flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 100 100",className:"text-white",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"veltechGrad",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#ffffff"}),e.jsx("stop",{offset:"100%",stopColor:"#e0e7ff"})]})}),e.jsx("rect",{x:"10",y:"20",width:"80",height:"60",rx:"8",fill:"url(#veltechGrad)",stroke:"white",strokeWidth:"2"}),e.jsx("text",{x:"50",y:"45",textAnchor:"middle",fontSize:"12",fontWeight:"bold",fill:"#1e40af",children:"V"}),e.jsx("text",{x:"50",y:"60",textAnchor:"middle",fontSize:"8",fill:"#1e40af",children:"TECH"}),e.jsx("circle",{cx:"20",cy:"30",r:"3",fill:"#3b82f6"}),e.jsx("circle",{cx:"80",cy:"30",r:"3",fill:"#3b82f6"})]})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Veltech Assistant"}),e.jsx("p",{className:"text-xs text-blue-100",children:"Ask me anything!"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(g,{variant:"ghost",size:"sm",onClick:()=>l(!o),className:"text-white hover:bg-white/20 h-8 w-8 p-0",children:e.jsx(an,{className:"h-4 w-4"})}),e.jsx(g,{variant:"ghost",size:"sm",onClick:()=>t(!1),className:"text-white hover:bg-white/20 h-8 w-8 p-0",children:e.jsx(st,{className:"h-4 w-4"})})]})]}),o&&e.jsx("div",{className:"bg-gray-50 border-b border-gray-200 max-h-48 overflow-y-auto",children:e.jsxs("div",{className:"p-3",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Quick Help"}),e.jsx("div",{className:"space-y-2",children:m.slice(0,5).map(v=>e.jsxs("button",{onClick:()=>w(v),className:"w-full text-left p-2 text-xs bg-white rounded border hover:bg-blue-50 hover:border-blue-300 transition-colors",children:[e.jsx("div",{className:"font-medium text-gray-900",children:v.question}),e.jsxs("div",{className:"text-gray-500 mt-1",children:[v.answer.substring(0,60),"..."]})]},v.id))})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[s.map(v=>e.jsx("div",{className:`flex ${v.isUser?"justify-end":"justify-start"}`,children:e.jsx("div",{className:`max-w-[80%] p-3 rounded-lg ${v.isUser?"bg-blue-600 text-white":"bg-gray-100 text-gray-900"}`,children:e.jsxs("div",{className:"flex items-start space-x-2",children:[!v.isUser&&e.jsx(Ga,{className:"h-4 w-4 mt-0.5 text-blue-600 flex-shrink-0"}),v.isUser&&e.jsx(he,{className:"h-4 w-4 mt-0.5 text-blue-200 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm whitespace-pre-wrap",children:v.text}),e.jsx("p",{className:`text-xs mt-1 ${v.isUser?"text-blue-200":"text-gray-500"}`,children:v.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]})})},v.id)),e.jsx("div",{ref:d})]}),e.jsxs("div",{className:"p-4 border-t border-gray-200",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(W,{value:n,onChange:v=>i(v.target.value),onKeyPress:L,placeholder:"Type your message...",className:"flex-1"}),e.jsx(g,{onClick:j,disabled:!n.trim(),size:"sm",className:"bg-blue-600 hover:bg-blue-700",children:e.jsx(Ps,{className:"h-4 w-4"})})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2 text-center",children:"Press Enter to send  Click Quick Help for instant answers"})]})]})]})},El=()=>{const{user:r}=Te(),{toast:t}=Pe(),{lastUpdate:s,isConnected:a}=Js(),[n,i]=h.useState([]),[o,l]=h.useState(!0),[d,m]=h.useState(null),[p,j]=h.useState(!1),[f,w]=h.useState(!1),[L,v]=h.useState(""),[x,y]=h.useState(!1),[T,V]=h.useState(null),[R,$]=h.useState(0);h.useEffect(()=>{J();const N=setInterval(()=>{J()},3e4);return()=>clearInterval(N)},[]),h.useEffect(()=>{if(s&&s.type==="approval_updated"){const N=s.data;if(N.studentId===(r==null?void 0:r._id)){console.log(" Real-time approval update received:",N),t({title:"Letter Status Updated",description:`Your letter has been ${N.status} by ${N.approverName}`});const X=Date.now();N.facultyId!==(r==null?void 0:r._id)&&X-R>2e3&&($(X),J())}}},[s,r,t,R]);const I=N=>{const X=[];return N.assignedMentor&&X.push("Mentor"),N.assignedHOD&&X.push("HOD"),N.assignedDean&&X.push("Dean"),X.length>0?X.join("  "):"No workflow assigned"},B=N=>{m(N),j(!0)},S=()=>{j(!1),m(null)},C=N=>{m(N),v(""),w(!0)},O=()=>{w(!1),m(null),v("")},D=async()=>{if(d){y(!0);try{const N=await Z.sendReminder(d.id,L);t({title:"Reminder Sent Successfully",description:`Reminder sent to ${N.data.recipient.role} (${N.data.recipient.name}). You can send another reminder in 24 hours.`}),J(),O()}catch(N){console.error("Error sending reminder:",N),t({title:"Failed to Send Reminder",description:N instanceof Error?N.message:"Please try again later.",variant:"destructive"})}finally{y(!1)}}},A=async N=>{try{console.log(" Starting letter download for:",N);const X=N.status==="signed"?"signed":"clean";console.log(" Downloading PDF type:",X);let G,fe;X==="signed"?(G=await Z.downloadSignedPDF(N.id),fe=`SIGNED_${N.fileName}_${N.id}.pdf`,console.log(" Signed PDF blob:",G)):(G=await Z.downloadCleanPDF(N.id),fe=`CLEAN_${N.fileName}_${N.id}.pdf`,console.log(" Clean PDF blob:",G));const Ie=URL.createObjectURL(G),De=document.createElement("a");De.href=Ie,De.download=fe,document.body.appendChild(De),De.click(),document.body.removeChild(De),URL.revokeObjectURL(Ie),t({title:`${X==="signed"?"Signed":"Clean"} PDF Downloaded!`,description:`Your ${X} letter PDF has been downloaded successfully.`})}catch(X){console.error(" Error downloading letter:",X),t({title:"Error",description:`Failed to download letter: ${X instanceof Error?X.message:"Unknown error"}`,variant:"destructive"})}},E=async N=>{try{if(console.log(" Starting signed letter download for:",N),N.status==="signed")try{console.log(" Downloading signed PDF from backend...");const De=await Z.downloadSignedPDF(N.id);console.log(" Signed PDF blob:",De);const Ce=URL.createObjectURL(De),Le=document.createElement("a");Le.href=Ce,Le.download=`SIGNED_${N.fileName}.pdf`,document.body.appendChild(Le),Le.click(),document.body.removeChild(Le),URL.revokeObjectURL(Ce),t({title:"Signed PDF Downloaded!",description:"Your signed letter PDF has been downloaded successfully."});return}catch(De){console.log(" Signed letter download failed:",De);try{console.log(" Trying fallback: downloading regular letter content...");const Ce=await Z.downloadLetter(N.id);console.log(" Letter blob:",Ce);const Le=URL.createObjectURL(Ce),$e=document.createElement("a");$e.href=Le,$e.download=`LETTER_${N.fileName}`,document.body.appendChild($e),$e.click(),document.body.removeChild($e),URL.revokeObjectURL(Le),t({title:"Letter Downloaded",description:"Letter content has been downloaded (signed version not available)."});return}catch(Ce){throw console.log(" Fallback download also failed:",Ce),Ce}}console.log(" Downloading original letter...");const X=await Z.downloadLetter(N.id);console.log(" Letter blob:",X);const G=N.status==="signed"?`SIGNED_${N.fileName}_${N.id}.html`:`APPROVED_${N.fileName}_${N.id}.html`,fe=URL.createObjectURL(X),Ie=document.createElement("a");Ie.href=fe,Ie.download=G,document.body.appendChild(Ie),Ie.click(),document.body.removeChild(Ie),URL.revokeObjectURL(fe),t({title:"Letter Downloaded!",description:`Your ${N.status==="signed"?"signed":"approved"} letter has been downloaded successfully.`})}catch(X){console.error(" Error downloading letter:",X),t({title:"Error",description:`Failed to download letter: ${X instanceof Error?X.message:"Unknown error"}`,variant:"destructive"})}},J=async()=>{try{l(!0);const N=await Z.getUserLetters();if(N.success){const X=N.data.letters.map(G=>{var fe;return{id:G._id,fileName:G.title,summary:`Letter: ${G.title}`,approvalPath:I(G),status:G.status,submittedAt:G.submittedAt,approvedAt:G.approvedAt,approvedBy:(fe=G.approvedBy)==null?void 0:fe.name,rejectionReason:G.rejectionReason,downloadHistory:G.downloadHistory||[],workflowStep:G.workflowStep,assignedMentor:G.assignedMentor?`${G.assignedMentor.name} (${G.assignedMentor.designation})`:null,assignedHOD:G.assignedHOD?`${G.assignedHOD.name} (${G.assignedHOD.designation})`:null,assignedDean:G.assignedDean?`${G.assignedDean.name} (${G.assignedDean.designation})`:null,currentApprover:G.currentApprover?`${G.currentApprover.name} (${G.currentApprover.designation})`:null,proofFile:G.proofFile}});i(X),V(new Date)}}catch(N){console.error("Error loading letters:",N),t({title:"Error",description:"Failed to load your letters",variant:"destructive"})}finally{l(!1)}},ue=N=>{switch(N){case"pending":return"status-pending";case"approved":return"status-approved";case"signed":return"status-signed";case"rejected":return"status-rejected";default:return"bg-muted text-muted-foreground"}},le=N=>{switch(N){case"pending":return e.jsx(qe,{className:"h-4 w-4"});case"approved":return e.jsx(Ee,{className:"h-4 w-4"});case"signed":return e.jsx(Ee,{className:"h-4 w-4"});case"rejected":return e.jsx(vt,{className:"h-4 w-4"});default:return e.jsx(ae,{className:"h-4 w-4"})}},xe=N=>{switch(N){case"pending":return"Pending Approval";case"approved":return"Approved (Ready for Signing)";case"signed":return"Digitally Signed";case"rejected":return"Rejected";default:return N}},ke=N=>new Date(N).toLocaleString();return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsxs("div",{className:"container-responsive py-4 sm:py-6",children:[e.jsx("div",{className:"mb-6 sm:mb-8",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between w-full space-y-4 lg:space-y-0",children:[e.jsxs("div",{className:"text-center lg:text-left",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-gray-900 mb-2",children:"Student Dashboard"}),e.jsxs("p",{className:"text-lg text-gray-600",children:["Welcome back, ",e.jsx("span",{className:"font-semibold text-blue-600",children:r==null?void 0:r.name})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Create and manage your formal letters with digital approval workflow"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center space-y-2 sm:space-y-0 sm:space-x-2 lg:flex-col lg:space-x-0 lg:space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(g,{onClick:J,variant:"outline",size:"sm",className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"h-4 w-4"}),e.jsx("span",{children:"Refresh"})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${a?"bg-green-500":"bg-red-500"}`}),e.jsx("span",{className:"text-xs text-gray-500",children:a?"Live":"Offline"})]})]}),T&&e.jsxs("p",{className:"text-xs text-gray-500",children:["Last updated: ",T.toLocaleTimeString()]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 sm:gap-8",children:[e.jsx("div",{className:"space-y-4 sm:space-y-6",children:e.jsxs(U,{className:"shadow-sm border",children:[e.jsx(te,{className:"bg-blue-600 text-white rounded-t-lg p-4 sm:p-6",children:e.jsxs(se,{className:"flex items-center space-x-2 text-lg sm:text-xl",children:[e.jsx(Qe,{className:"h-5 w-5 sm:h-6 sm:w-6"}),e.jsxs("div",{children:[e.jsx("span",{children:"Create E-Letter"}),e.jsx("p",{className:"text-blue-100 text-sm font-normal mt-1",children:"Use templates to create formal letters and submit for approval"})]})]})}),e.jsx(z,{className:"p-4 sm:p-6",children:e.jsx("div",{className:"h-[400px] sm:h-[500px] lg:h-[600px] overflow-y-auto custom-scrollbar",children:e.jsx(Al,{})})})]})}),e.jsx("div",{className:"space-y-4 sm:space-y-6",children:e.jsxs(U,{className:"shadow-sm border",children:[e.jsx(te,{className:"bg-green-600 text-white rounded-t-lg p-4 sm:p-6",children:e.jsxs(se,{className:"flex items-center space-x-2 text-lg sm:text-xl",children:[e.jsx(ae,{className:"h-5 w-5 sm:h-6 sm:w-6"}),e.jsxs("div",{children:[e.jsx("span",{children:"My Letters"}),e.jsx("p",{className:"text-green-100 text-sm font-normal mt-1",children:"Track the status of your submitted letters"})]})]})}),e.jsx(z,{className:"p-4 sm:p-6",children:e.jsx("div",{className:"h-[400px] sm:h-[500px] lg:h-[600px] flex flex-col",children:o?e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 bg-blue-100 rounded-full mb-4",children:e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"})}),e.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Loading your letters..."})]})}):n.length===0?e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 bg-gray-100 rounded-full mb-4",children:e.jsx(ae,{className:"h-6 w-6 text-gray-400"})}),e.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-2",children:"No letters submitted yet"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Create your first E-Letter to get started with the approval process"}),e.jsxs("div",{className:"inline-flex items-center px-3 py-2 bg-blue-50 text-blue-600 rounded-lg",children:[e.jsx(Qe,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"text-sm font-medium",children:"Start by creating a letter"})]})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4 pb-3 border-b border-gray-200 space-y-2 sm:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ae,{className:"h-4 w-4 text-green-600"}),e.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Your Letters"}),e.jsxs("span",{className:"bg-green-100 text-green-800 text-xs font-medium px-2 py-1 rounded-full",children:[n.length," ",n.length===1?"letter":"letters"]})]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Last updated: ",new Date().toLocaleTimeString()]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto space-y-3 pr-2 custom-scrollbar",children:n.map(N=>e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between mb-3 space-y-2 sm:space-y-0",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx(ae,{className:"h-4 w-4 text-blue-600"}),e.jsx("h3",{className:"font-semibold text-gray-900 text-base",children:N.fileName})]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Submitted on ",new Date(N.submittedAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})]})]}),e.jsx("div",{className:"sm:ml-4",children:e.jsx(ne,{className:`${ue(N.status)} px-2 py-1 text-xs font-medium`,children:e.jsxs("span",{className:"flex items-center space-x-1",children:[le(N.status),e.jsx("span",{children:xe(N.status)})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 mb-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(ae,{className:"h-3 w-3 text-gray-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-900",children:"Letter Type"}),e.jsx("p",{className:"text-xs text-gray-600",children:N.summary})]})]}),e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(ut,{className:"h-3 w-3 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-900",children:"Approval Path"}),e.jsx("p",{className:"text-xs text-gray-600",children:N.approvalPath})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[N.approvedAt&&e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(Ee,{className:"h-3 w-3 text-green-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-900",children:"Approved On"}),e.jsx("p",{className:"text-xs text-gray-600",children:ke(N.approvedAt)})]})]}),N.approvedBy&&e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(he,{className:"h-3 w-3 text-purple-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-900",children:"Approved By"}),e.jsx("p",{className:"text-xs text-gray-600",children:N.approvedBy})]})]})]})]}),N.rejectionReason&&e.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg mb-3",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(vt,{className:"h-4 w-4 text-red-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-red-900",children:"Rejection Reason"}),e.jsx("p",{className:"text-sm text-red-700 mt-1",children:N.rejectionReason})]})]})}),N.downloadHistory&&N.downloadHistory.length>0&&e.jsxs("div",{className:"mt-3 p-3 bg-gray-50 rounded border",children:[e.jsxs("h4",{className:"font-medium text-sm mb-2 flex items-center space-x-1",children:[e.jsx(Re,{className:"h-3 w-3"}),e.jsx("span",{children:"Download History"})]}),e.jsx("div",{className:"space-y-1",children:N.downloadHistory.map(X=>e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-600",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Bs,{className:"h-3 w-3"}),e.jsx("span",{children:ke(X.downloadedAt)})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(he,{className:"h-3 w-3"}),e.jsx("span",{children:X.downloadedBy}),e.jsx(ne,{variant:"outline",size:"sm",children:X.userRole})]})]},X.id))})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between pt-3 border-t border-gray-200 space-y-2 sm:space-y-0",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-2 sm:space-y-0 sm:space-x-2",children:[e.jsxs(g,{variant:"outline",size:"sm",className:"flex items-center space-x-2",onClick:()=>B(N),children:[e.jsx(Me,{className:"h-3 w-3"}),e.jsx("span",{children:"View Details"})]}),N.status==="pending"&&e.jsxs(g,{variant:"outline",size:"sm",className:"flex items-center space-x-2",onClick:()=>C(N),children:[e.jsx(js,{className:"h-3 w-3"}),e.jsx("span",{children:"Send Reminder"})]})]}),(N.status==="approved"||N.status==="signed")&&e.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2",children:[e.jsxs(g,{size:"sm",onClick:()=>A(N),className:"flex items-center space-x-2",children:[e.jsx(Re,{className:"h-3 w-3"}),e.jsx("span",{children:N.status==="signed"?"Download Signed Letter":"Download Letter"})]}),N.status==="signed"&&e.jsxs(g,{size:"sm",onClick:()=>E(N),className:"flex items-center space-x-2",children:[e.jsx(Re,{className:"h-3 w-3"}),e.jsx("span",{children:"Download Signed Letter"})]})]})]})]},N.id))})]})})})]})})]})]}),p&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Document Details"}),e.jsx(g,{variant:"ghost",size:"sm",onClick:S,className:"text-gray-500 hover:text-gray-700",children:""})]}),e.jsx("div",{className:"p-6",children:d&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(k,{className:"text-sm font-medium text-gray-500",children:"File Name"}),e.jsx("p",{className:"text-sm",children:d.fileName})]}),e.jsxs("div",{children:[e.jsx(k,{className:"text-sm font-medium text-gray-500",children:"Status"}),e.jsx(ne,{variant:d.status==="approved"?"default":d.status==="rejected"?"destructive":"secondary",children:d.status})]})]}),e.jsxs("div",{children:[e.jsx(k,{className:"text-sm font-medium text-gray-500",children:"Description"}),e.jsx("p",{className:"text-sm mt-1",children:d.summary})]}),e.jsxs("div",{children:[e.jsx(k,{className:"text-sm font-medium text-gray-500",children:"Approval Path"}),e.jsx("p",{className:"text-sm mt-1",children:d.approvalPath})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(k,{className:"text-sm font-medium text-gray-500",children:"Submitted At"}),e.jsx("p",{className:"text-sm",children:new Date(d.submittedAt).toLocaleString()})]}),d.approvedAt&&e.jsxs("div",{children:[e.jsx(k,{className:"text-sm font-medium text-gray-500",children:"Approved At"}),e.jsx("p",{className:"text-sm",children:new Date(d.approvedAt).toLocaleString()})]})]}),d.approvedBy&&e.jsxs("div",{children:[e.jsx(k,{className:"text-sm font-medium text-gray-500",children:"Approved By"}),e.jsx("p",{className:"text-sm",children:d.approvedBy})]}),d.rejectionReason&&e.jsxs("div",{children:[e.jsx(k,{className:"text-sm font-medium text-gray-500",children:"Rejection Reason"}),e.jsx("p",{className:"text-sm text-red-600",children:d.rejectionReason})]}),d.workflowStep&&e.jsxs("div",{children:[e.jsx(k,{className:"text-sm font-medium text-gray-500",children:"Current Workflow Step"}),e.jsx("p",{className:"text-sm",children:d.workflowStep})]}),d.currentApprover&&e.jsxs("div",{children:[e.jsx(k,{className:"text-sm font-medium text-gray-500",children:"Current Approver"}),e.jsx("p",{className:"text-sm",children:d.currentApprover})]}),(d.assignedMentor||d.assignedHOD||d.assignedDean)&&e.jsxs("div",{children:[e.jsx(k,{className:"text-sm font-medium text-gray-500",children:"Assigned Faculty"}),e.jsxs("div",{className:"text-sm space-y-1",children:[d.assignedMentor&&e.jsxs("p",{children:[e.jsx("strong",{children:"Mentor:"})," ",d.assignedMentor]}),d.assignedHOD&&e.jsxs("p",{children:[e.jsx("strong",{children:"HOD:"})," ",d.assignedHOD]}),d.assignedDean&&e.jsxs("p",{children:[e.jsx("strong",{children:"Dean:"})," ",d.assignedDean]})]})]})]})})]})}),f&&d&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg max-w-md w-full mx-4",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[e.jsxs("h2",{className:"text-xl font-semibold flex items-center space-x-2",children:[e.jsx(js,{className:"h-5 w-5 text-orange-600"}),e.jsx("span",{children:"Send Reminder"})]}),e.jsx(g,{variant:"ghost",size:"sm",onClick:O,className:"text-gray-500 hover:text-gray-700",children:""})]}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-4 bg-orange-50 border border-orange-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(js,{className:"h-5 w-5 text-orange-600 mt-0.5"}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-medium text-orange-900",children:["Reminder for: ",d.fileName]}),e.jsx("p",{className:"text-sm text-orange-700 mt-1",children:"This will send a friendly reminder to the faculty member currently reviewing your letter."})]})]})}),e.jsxs("div",{children:[e.jsx(k,{htmlFor:"reminderMessage",className:"text-sm font-medium text-gray-700",children:"Custom Message (Optional)"}),e.jsx(Jt,{id:"reminderMessage",value:L,onChange:N=>v(N.target.value),placeholder:"Add a custom message to your reminder (optional)...",className:"mt-2",rows:4,maxLength:500}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[L.length,"/500 characters. Leave empty to use the default message."]})]}),e.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("div",{className:"p-1 bg-blue-100 rounded",children:e.jsx(Ps,{className:"h-4 w-4 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-900",children:"Reminder Policy"}),e.jsxs("p",{className:"text-xs text-blue-700 mt-1",children:[" You can send one reminder per day per letter",e.jsx("br",{})," Reminders are sent to the current approver in the workflow",e.jsx("br",{})," Be respectful and professional in your message"]})]})]})})]})}),e.jsxs("div",{className:"flex justify-end space-x-3 p-6 border-t bg-gray-50",children:[e.jsx(g,{variant:"outline",onClick:O,disabled:x,children:"Cancel"}),e.jsx(g,{onClick:D,disabled:x,className:"bg-orange-600 hover:bg-orange-700 text-white",children:x?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Sending..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ps,{className:"h-4 w-4 mr-2"}),"Send Reminder"]})})]})]})}),e.jsx(_l,{})]})},ya=h.forwardRef(({children:r,className:t,defaultValue:s,value:a,onValueChange:n,...i},o)=>{const[l,d]=h.useState(a||s||""),m=p=>{d(p),n==null||n(p)};return e.jsx("div",{ref:o,className:pe("",t),...i,children:as.Children.map(r,p=>as.isValidElement(p)?as.cloneElement(p,{value:l,onValueChange:m}):p)})});ya.displayName="Tabs";const va=h.forwardRef(({className:r,...t},s)=>e.jsx("div",{ref:s,className:pe("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",r),...t}));va.displayName="TabsList";const bt=h.forwardRef(({className:r,value:t,children:s,...a},n)=>e.jsx("button",{ref:n,className:pe("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",r),"data-state":t==="active"?"active":"inactive",...a,children:s}));bt.displayName="TabsTrigger";const jt=h.forwardRef(({className:r,value:t,children:s,...a},n)=>e.jsx("div",{ref:n,className:pe("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",r),"data-state":t==="active"?"active":"inactive",...a,children:s}));jt.displayName="TabsContent";const Pl=()=>{const{user:r,updateSignature:t,removeSignature:s}=Te(),{toast:a}=Pe(),n=h.useRef(null),i=h.useRef(null),[o,l]=h.useState(!1),[d,m]=h.useState("upload"),[p,j]=h.useState(null),[f,w]=h.useState(!1),[L,v]=h.useState(!1);h.useEffect(()=>{x()},[]);const x=async()=>{if(r!=null&&r._id){v(!0);try{const C=await Z.getSignatureStatus();j(C)}catch(C){console.error("Error checking signature status:",C),a({title:"Error",description:"Failed to check signature status",variant:"destructive"})}finally{v(!1)}}},y=async C=>{var D;const O=(D=C.target.files)==null?void 0:D[0];if(O)if(O.type.startsWith("image/")){w(!0);try{const A=new FileReader;A.onload=async E=>{var ue;const J=(ue=E.target)==null?void 0:ue.result;await Z.uploadSignature(J),t(J),await x(),a({title:"Signature uploaded!",description:"Your signature has been saved successfully"})},A.readAsDataURL(O)}catch(A){console.error("Error uploading signature:",A),a({title:"Upload failed",description:"Failed to upload signature. Please try again.",variant:"destructive"})}finally{w(!1)}}else a({title:"Invalid file type",description:"Please select an image file (PNG, JPG, etc.)",variant:"destructive"})},T=C=>{l(!0);const O=i.current;if(O){const D=O.getContext("2d");if(D){const A=O.getBoundingClientRect();D.beginPath(),D.moveTo(C.clientX-A.left,C.clientY-A.top)}}},V=C=>{if(!o)return;const O=i.current;if(O){const D=O.getContext("2d");if(D){const A=O.getBoundingClientRect();D.lineTo(C.clientX-A.left,C.clientY-A.top),D.stroke()}}},R=()=>{l(!1)},$=async()=>{const C=i.current;if(C){w(!0);try{const O=C.toDataURL("image/png");await Z.uploadSignature(O),t(O),await x(),a({title:"Signature saved!",description:"Your drawn signature has been saved successfully"});const D=C.getContext("2d");D&&D.clearRect(0,0,C.width,C.height)}catch(O){console.error("Error saving signature:",O),a({title:"Save failed",description:"Failed to save signature. Please try again.",variant:"destructive"})}finally{w(!1)}}},I=()=>{const C=i.current;if(C){const O=C.getContext("2d");O&&O.clearRect(0,0,C.width,C.height)}},B=async()=>{w(!0);try{await Z.removeSignature(),s(),await x(),a({title:"Signature removed",description:"Your signature has been removed"})}catch(C){console.error("Error removing signature:",C),a({title:"Remove failed",description:"Failed to remove signature. Please try again.",variant:"destructive"})}finally{w(!1)}},S=()=>{if(r!=null&&r.signature){const C=document.createElement("a");C.href=r.signature,C.download=`${(r==null?void 0:r.name)||"signature"}_signature.png`,C.click()}};return e.jsxs(U,{className:"shadow-soft",children:[e.jsxs(te,{children:[e.jsxs(se,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Qe,{className:"h-5 w-5"}),e.jsx("span",{children:"Digital Signature Management"})]}),e.jsx(g,{variant:"outline",size:"sm",onClick:x,disabled:L,children:L?e.jsx(Se,{className:"h-4 w-4 animate-spin"}):e.jsx(Se,{className:"h-4 w-4"})})]}),e.jsx(oe,{children:"Upload or draw your digital signature for document approval"})]}),e.jsxs(z,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(k,{children:"Signature Status"}),e.jsx("div",{className:"flex items-center space-x-3",children:p?e.jsxs(e.Fragment,{children:[p.hasSignature?e.jsxs(ne,{variant:"default",className:"flex items-center space-x-1",children:[e.jsx(Ee,{className:"h-3 w-3"}),e.jsx("span",{children:"Active"})]}):e.jsxs(ne,{variant:"destructive",className:"flex items-center space-x-1",children:[e.jsx(tn,{className:"h-3 w-3"}),e.jsx("span",{children:"Not Uploaded"})]}),p.signatureUploadedAt&&e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Uploaded: ",new Date(p.signatureUploadedAt).toLocaleDateString()]}),p.signatureSize>0&&e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Size: ",(p.signatureSize/1024).toFixed(1)," KB"]})]}):e.jsxs(ne,{variant:"outline",className:"flex items-center space-x-1",children:[e.jsx(qe,{className:"h-3 w-3"}),e.jsx("span",{children:"Checking..."})]})})]}),(r==null?void 0:r.signature)&&e.jsxs("div",{className:"space-y-3",children:[e.jsx(k,{children:"Current Signature"}),e.jsxs("div",{className:"border border-border rounded-lg p-4 bg-muted/20",children:[e.jsx("img",{src:r==null?void 0:r.signature,alt:"Your signature",className:"max-h-20 object-contain mx-auto"}),e.jsxs("div",{className:"text-center mt-2 text-sm text-muted-foreground",children:["Uploaded: ",r!=null&&r.signatureUploadedAt?new Date(r.signatureUploadedAt).toLocaleDateString():"Unknown"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(g,{variant:"outline",size:"sm",onClick:S,disabled:f,children:[e.jsx(Re,{className:"h-4 w-4 mr-2"}),"Download"]}),e.jsxs(g,{variant:"destructive",size:"sm",onClick:B,disabled:f,children:[f?e.jsx(Se,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(zr,{className:"h-4 w-4 mr-2"}),"Remove"]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(g,{variant:d==="upload"?"default":"outline",size:"sm",onClick:()=>m("upload"),children:[e.jsx(Wn,{className:"h-4 w-4 mr-2"}),"Upload Image"]}),e.jsxs(g,{variant:d==="draw"?"default":"outline",size:"sm",onClick:()=>m("draw"),children:[e.jsx(Qe,{className:"h-4 w-4 mr-2"}),"Draw Signature"]})]}),d==="upload"&&e.jsxs("div",{className:"space-y-3",children:[e.jsx(k,{htmlFor:"signature-upload",children:"Upload Signature Image"}),e.jsx(W,{id:"signature-upload",ref:n,type:"file",accept:"image/*",onChange:y,className:"bg-background",disabled:f}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Supported formats: PNG, JPG, JPEG. Recommended size: 200x100px"}),f&&e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:[e.jsx(Se,{className:"h-4 w-4 animate-spin"}),e.jsx("span",{children:"Uploading signature..."})]})]}),d==="draw"&&e.jsxs("div",{className:"space-y-3",children:[e.jsx(k,{children:"Draw Your Signature"}),e.jsx("div",{className:"border border-border rounded-lg p-4 bg-white",children:e.jsx("canvas",{ref:i,width:400,height:150,className:"border border-gray-300 rounded cursor-crosshair",onMouseDown:T,onMouseMove:V,onMouseUp:R,onMouseLeave:R,style:{touchAction:"none"}})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(g,{onClick:$,size:"sm",disabled:f,children:[f?e.jsx(Se,{className:"h-4 w-4 mr-2 animate-spin"}):null,"Save Signature"]}),e.jsxs(g,{variant:"outline",onClick:I,size:"sm",disabled:f,children:[e.jsx(st,{className:"h-4 w-4 mr-2"}),"Clear"]})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:'Use your mouse to draw your signature. Click "Save Signature" when done.'})]})]})]})]})};let Rl=class{constructor(t){vs(this,"metadata");vs(this,"downloadHistory");this.metadata=t,this.downloadHistory=[]}async generateSignedDocument(){const t=this.generateHTMLDocument();return new Blob([t],{type:"text/html"})}generateHTMLDocument(){const t=new Date().toLocaleDateString(),s=new Date().toLocaleTimeString(),a=this.generateDocumentId(),n=this.generateSignatureHash();return`
      <!DOCTYPE html>
      <html lang="en">
      <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Signed Document - ${this.metadata.fileName}</title>
        <style>
          @page {
            size: A4;
            margin: 1in;
          }
          
          * {
            box-sizing: border-box;
          }
          
          body { 
            font-family: 'Times New Roman', Times, serif; 
            margin: 0;
            padding: 0;
            line-height: 1.6;
            color: #000;
            background: white;
          }
          
          .document-container {
            max-width: 8.5in;
            margin: 0 auto;
            padding: 0.5in;
            background: white;
            min-height: 11in;
          }
          
          /* Header Section */
          .header {
            text-align: center;
            margin-bottom: 40px;
            border-bottom: 3px solid #1e40af;
            padding-bottom: 20px;
          }
          
          .logo-section {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
          }
          
          .veltech-logo {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, #1e40af, #3b82f6);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 24px;
            margin-right: 20px;
            position: relative;
            overflow: hidden;
          }
          
          .veltech-logo::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 60px;
            height: 60px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            border: 2px solid rgba(255, 255, 255, 0.3);
          }
          
          .veltech-logo svg {
            width: 40px;
            height: 40px;
            z-index: 1;
            position: relative;
          }
          
          .university-info h1 {
            font-size: 28px;
            font-weight: bold;
            color: #1e40af;
            margin: 0;
            text-transform: uppercase;
            letter-spacing: 1px;
          }
          
          .university-info p {
            font-size: 14px;
            color: #666;
            margin: 5px 0 0 0;
            font-style: italic;
          }
          
          .document-title {
            font-size: 24px;
            font-weight: bold;
            color: #1e40af;
            margin: 20px 0 10px 0;
            text-transform: uppercase;
            letter-spacing: 1px;
          }
          
          .document-subtitle {
            font-size: 16px;
            color: #666;
            margin-bottom: 10px;
          }
          
          /* Document Info */
          .document-info {
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 30px;
          }
          
          .info-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
          }
          
          .info-item {
            display: flex;
            flex-direction: column;
          }
          
          .info-label {
            font-weight: bold;
            color: #374151;
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 5px;
          }
          
          .info-value {
            color: #111827;
            font-size: 14px;
          }
          
          /* Content Section */
          .content {
            margin-bottom: 40px;
          }
          
          .content h2 {
            font-size: 18px;
            font-weight: bold;
            color: #1e40af;
            margin-bottom: 15px;
            border-bottom: 2px solid #e5e7eb;
            padding-bottom: 5px;
          }
          
          .content p {
            margin-bottom: 15px;
            text-align: justify;
            font-size: 14px;
            line-height: 1.8;
          }
          
          /* Approval Stamp */
          .approval-stamp { 
            position: absolute; 
            top: 100px;
            right: 50px; 
            background: linear-gradient(135deg, #059669, #10b981);
            color: white; 
            padding: 15px 25px;
            border-radius: 8px;
            transform: rotate(15deg);
            font-weight: bold;
            font-size: 16px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            border: 3px solid white;
          }
          
          /* Signature Section */
          .signature-section { 
            margin-top: 60px;
            border-top: 2px solid #e5e7eb;
            padding-top: 30px;
          }
          
          .signature-title {
            font-size: 18px;
            font-weight: bold;
            color: #1e40af;
            margin-bottom: 30px;
            text-align: center;
          }
          
          .signatures-grid {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            gap: 60px;
            margin-bottom: 30px;
            flex-wrap: wrap;
          }
          
          .signature-block {
            text-align: center;
            padding: 0;
            border: none;
            background: transparent;
            flex: 1;
            min-width: 200px;
            max-width: 250px;
          }
          
          .signature-image {
            width: 180px;
            height: 80px;
            border: 1px solid #d1d5db;
            background: white;
            margin: 0 auto 20px auto;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 4px;
            font-size: 12px;
            color: #6b7280;
            position: relative;
          }
          
          .signature-image img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
          }
          
          .signature-line { 
            border-bottom: 2px solid #000;
            width: 180px;
            margin: 0 auto 15px auto;
            height: 2px;
          }
          
          .signature-name {
            font-weight: bold;
            font-size: 14px;
            color: #111827;
            margin-bottom: 8px;
            font-family: 'Times New Roman', Times, serif;
          }
          
          .signature-title-text {
            font-size: 12px;
            color: #6b7280;
            margin-bottom: 8px;
            font-family: 'Times New Roman', Times, serif;
          }
          
          .signature-date {
            font-size: 12px;
            color: #6b7280;
            font-style: italic;
            font-family: 'Times New Roman', Times, serif;
          }
          
          /* Handwritten signature font */
          .handwritten-signature {
            font-family: 'Brush Script MT', 'Lucida Handwriting', cursive;
            font-size: 16px;
            font-weight: normal;
            color: #1a1a1a;
            transform: rotate(-2deg);
            display: inline-block;
          }
          
          /* Signature container for better alignment */
          .signature-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            position: relative;
          }
          
          /* Signature placeholder styling */
          .signature-placeholder {
            font-family: 'Brush Script MT', 'Lucida Handwriting', cursive;
            font-size: 14px;
            color: #666;
            font-style: italic;
            opacity: 0.7;
          }
          
          /* Footer */
          .footer { 
            margin-top: 60px;
            border-top: 2px solid #e5e7eb;
            padding-top: 30px;
            font-size: 12px; 
            color: #6b7280;
          }
          
          .footer-info {
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
          }
          
          .footer-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
          }
          
          .footer-item {
            margin-bottom: 10px;
          }
          
          .footer-label {
            font-weight: bold;
            color: #374151;
            margin-bottom: 5px;
          }
          
          .footer-value {
            color: #6b7280;
            font-family: 'Courier New', monospace;
            font-size: 11px;
          }
          
          .watermark { 
            position: fixed; 
            top: 50%; 
            left: 50%; 
            transform: translate(-50%, -50%) rotate(-45deg); 
            font-size: 72px;
            color: rgba(30, 64, 175, 0.05);
            z-index: -1; 
            pointer-events: none; 
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 10px;
          }
          
          .security-notice {
            text-align: center;
            margin-top: 20px;
            padding: 15px;
            background: #fef3c7;
            border: 1px solid #f59e0b;
            border-radius: 8px;
            color: #92400e;
          }
          
          .security-notice h4 {
            margin: 0 0 10px 0;
            font-size: 14px;
            font-weight: bold;
          }
          
          .security-notice p {
            margin: 0;
            font-size: 12px;
            line-height: 1.5;
          }
          
          /* Print Styles */
          @media print {
            body { margin: 0; }
            .document-container { padding: 0; }
            .approval-stamp { position: fixed; }
            .watermark { display: block; }
          }
        </style>
      </head>
      <body>
        <div class="watermark">APPROVED</div>
        
        <div class="document-container">
          <!-- Header -->
        <div class="header">
            <div class="logo-section">
              <div class="veltech-logo">
                <svg viewBox="0 0 100 100" fill="currentColor">
                  <circle cx="50" cy="50" r="45" fill="none" stroke="currentColor" stroke-width="3"/>
                  <text x="50" y="35" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold">V</text>
                  <text x="50" y="55" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold">U</text>
                  <circle cx="50" cy="50" r="20" fill="none" stroke="currentColor" stroke-width="2"/>
                  <path d="M30 50 L50 30 L70 50 L50 70 Z" fill="currentColor" opacity="0.3"/>
                </svg>
              </div>
              <div class="university-info">
                <h1>Veltech University</h1>
                <p>Digital Document Approval System</p>
              </div>
            </div>
          <div class="document-title">${this.metadata.fileName}</div>
            <div class="document-subtitle">Official Document</div>
        </div>

          <!-- Approval Stamp -->
        <div class="approval-stamp">APPROVED</div>

          <!-- Document Information -->
          <div class="document-info">
            <div class="info-grid">
              <div class="info-item">
                <div class="info-label">Student Name</div>
                <div class="info-value">${this.metadata.studentName}</div>
              </div>
              <div class="info-item">
                <div class="info-label">Student ID</div>
                <div class="info-value">${this.metadata.studentId}</div>
              </div>
              <div class="info-item">
                <div class="info-label">Submitted Date</div>
                <div class="info-value">${new Date(this.metadata.submittedAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}</div>
              </div>
              <div class="info-item">
                <div class="info-label">Approved Date</div>
                <div class="info-value">${new Date(this.metadata.approvedAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}</div>
              </div>
            </div>
          </div>

          <!-- Document Content -->
        <div class="content">
          <h2>Document Summary</h2>
          <p>${this.metadata.summary}</p>
          
            <h2>Approval Details</h2>
            <p><strong>Approval Path:</strong> ${this.metadata.approvalPath}</p>
            <p><strong>Approved By:</strong> ${this.metadata.approvedBy}</p>
            <p><strong>Document Status:</strong> Approved and Digitally Signed</p>
        </div>

          <!-- Signature Section -->
        <div class="signature-section">
            <div class="signature-title">Digital Signatures</div>
            <div class="signatures-grid">
              ${this.generateSignatureBlocks()}
          </div>
        </div>

          <!-- Footer -->
        <div class="footer">
            <div class="footer-info">
              <div class="footer-grid">
                <div class="footer-item">
                  <div class="footer-label">Document ID</div>
                  <div class="footer-value">${a}</div>
                </div>
                <div class="footer-item">
                  <div class="footer-label">Generated On</div>
                  <div class="footer-value">${t} at ${s}</div>
                </div>
                <div class="footer-item">
                  <div class="footer-label">Digital Signature Hash</div>
                  <div class="footer-value">${n}</div>
                </div>
                <div class="footer-item">
                  <div class="footer-label">Verification URL</div>
                  <div class="footer-value">https://ddas.veltech.edu.in/verify/${a}</div>
            </div>
          </div>
        </div>

            <div class="security-notice">
              <h4> Security Notice</h4>
              <p>This document has been digitally signed and approved through the Veltech University Digital Document Approval System (DDAS). Any unauthorized modifications will invalidate the digital signature and render this document void.</p>
          </div>
          </div>
        </div>
      </body>
      </html>
    `}generateSignatureBlocks(){const t=this.metadata.signatures||[],s=new Date().toLocaleDateString();let a=`
      <div class="signature-block">
        <div class="signature-container">
          <div class="signature-image">
            ${this.metadata.facultySignature?`<img src="${this.metadata.facultySignature}" alt="Faculty Signature">`:`<div class="signature-placeholder">${this.metadata.facultyName}</div>`}
          </div>
          <div class="signature-line"></div>
          <div class="signature-name handwritten-signature">${this.metadata.facultyName}</div>
          <div class="signature-title-text">${this.metadata.facultyDesignation}</div>
          <div class="signature-date">Date: ${s}</div>
        </div>
      </div>
    `;if(t.forEach(n=>{a+=`
        <div class="signature-block">
          <div class="signature-container">
            <div class="signature-image">
              ${n.signature?`<img src="${n.signature}" alt="${n.name} Signature">`:`<div class="signature-placeholder">${n.name}</div>`}
            </div>
            <div class="signature-line"></div>
            <div class="signature-name handwritten-signature">${n.name}</div>
            <div class="signature-title-text">${n.designation}</div>
            <div class="signature-date">Date: ${new Date(n.signedAt).toLocaleDateString()}</div>
          </div>
        </div>
      `}),t.length===0){const n=this.metadata.approvalPath.toLowerCase();(n.includes("hod")||n.includes("head"))&&(a+=`
          <div class="signature-block">
            <div class="signature-container">
              <div class="signature-image">
                <div class="signature-placeholder">Dr. HOD Name</div>
              </div>
              <div class="signature-line"></div>
              <div class="signature-name handwritten-signature">Dr. [HOD Name]</div>
              <div class="signature-title-text">Head of Department</div>
              <div class="signature-date">Date: ${s}</div>
            </div>
          </div>
        `),(n.includes("dean")||n.includes("faculty"))&&(a+=`
          <div class="signature-block">
            <div class="signature-container">
              <div class="signature-image">
                <div class="signature-placeholder">Dr. Dean Name</div>
              </div>
              <div class="signature-line"></div>
              <div class="signature-name handwritten-signature">Dr. [Dean Name]</div>
              <div class="signature-title-text">Dean of Faculty</div>
              <div class="signature-date">Date: ${s}</div>
            </div>
          </div>
        `)}return a}generateDocumentId(){const t=Date.now(),s=Math.random().toString(36).substring(2,8);return`DDAS-${t}-${s}`.toUpperCase()}generateSignatureHash(){const t=`${this.metadata.fileName}-${this.metadata.studentId}-${this.metadata.approvedAt}-${this.metadata.facultyName}`;return btoa(t).substring(0,16).toUpperCase()}addDownloadRecord(t){this.downloadHistory.push(t)}getDownloadHistory(){return this.downloadHistory}async generatePDF(){return this.generateSignedDocument()}verifyDocumentIntegrity(){return!0}};async function Il(r,t){const s=new Rl(r);s.addDownloadRecord(t);const a=await s.generateSignedDocument(),n=s.generateDocumentId(),i=s.generateSignatureHash();return{document:a,documentId:n,signatureHash:i}}function Ll(r,t){const s=URL.createObjectURL(r),a=document.createElement("a");a.href=s,a.download=t,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s)}const Tl=({request:r,onDownload:t})=>{const{user:s}=Te(),{toast:a}=Pe(),[n,i]=h.useState(!1),o=async()=>{if(!(s!=null&&s.signature)){a({title:"No signature found",description:"Please upload your signature before generating signed documents",variant:"destructive"});return}i(!0);try{const m={fileName:r.fileName,studentName:r.studentName,studentId:r.studentId,summary:r.summary,approvalPath:r.approvalPath,submittedAt:r.submittedAt,approvedAt:r.approvedAt||new Date().toISOString(),approvedBy:r.approvedBy||`${s.name} (${s.designation||s.role})`,facultySignature:s.signature,facultyName:s.name,facultyDesignation:s.designation||s.role},p={id:Date.now().toString(),downloadedAt:new Date().toISOString(),downloadedBy:s.name,userRole:s.role,ipAddress:"192.168.1.1"},{document:j,documentId:f,signatureHash:w}=await Il(m,p),L={...r,downloadHistory:[...r.downloadHistory||[],p]};console.log("Document generated with signature:",{documentId:f,signatureHash:w,downloadRecord:L}),a({title:"Document generated!",description:`Signed document created with ID: ${f}`});const v=`SIGNED_${r.fileName.replace(/\.[^/.]+$/,"")}_${f}.html`;Ll(j,v),t(r.id)}catch(m){console.error("Error generating document:",m),a({title:"Error",description:"Failed to generate signed document",variant:"destructive"})}finally{i(!1)}},l=m=>new Date(m).toLocaleString(),d=m=>{switch(m){case"pending":return"bg-warning text-warning-foreground";case"approved":return"bg-success text-success-foreground";case"rejected":return"bg-destructive text-destructive-foreground";default:return"bg-muted text-muted-foreground"}};return e.jsxs(U,{className:"shadow-soft",children:[e.jsxs(te,{children:[e.jsxs(se,{className:"flex items-center space-x-2",children:[e.jsx(ae,{className:"h-5 w-5"}),e.jsx("span",{children:"Signed Document Generator"})]}),e.jsx(oe,{children:"Generate digitally signed documents with approval tracking"})]}),e.jsxs(z,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold text-lg",children:r.fileName}),e.jsx(ne,{className:d(r.status),children:r.status.toUpperCase()})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-muted-foreground",children:"Student:"}),e.jsxs("p",{className:"text-foreground",children:[r.studentName," (",r.studentId,")"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-muted-foreground",children:"Submitted:"}),e.jsx("p",{className:"text-foreground",children:l(r.submittedAt)})]}),r.approvedAt&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-muted-foreground",children:"Approved:"}),e.jsx("p",{className:"text-foreground",children:l(r.approvedAt)})]}),r.approvedBy&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-muted-foreground",children:"Approved By:"}),e.jsx("p",{className:"text-foreground",children:r.approvedBy})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-muted-foreground",children:"Summary:"}),e.jsx("p",{className:"text-foreground mt-1",children:r.summary})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-muted-foreground",children:"Approval Path:"}),e.jsx("p",{className:"text-foreground mt-1",children:r.approvalPath})]})]}),e.jsxs("div",{className:"border border-border rounded-lg p-4 bg-muted/20",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(he,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:"Digital Signature Status"})]}),s!=null&&s.signature?e.jsxs(ne,{variant:"outline",className:"bg-success/10 text-success border-success/20",children:[e.jsx(Ee,{className:"h-3 w-3 mr-1"}),"Signature Available"]}):e.jsx(ne,{variant:"outline",className:"bg-warning/10 text-warning border-warning/20",children:"No Signature"})]}),(s==null?void 0:s.signature)&&e.jsxs("div",{className:"mt-3 flex items-center space-x-3",children:[e.jsx("img",{src:s.signature,alt:"Your signature",className:"h-12 object-contain border border-border rounded bg-white p-1"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:e.jsxs("p",{children:["Signature uploaded: ",s.signatureUploadedAt?new Date(s.signatureUploadedAt).toLocaleDateString():"Unknown"]})})]})]}),r.downloadHistory&&r.downloadHistory.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h4",{className:"font-medium flex items-center space-x-2",children:[e.jsx(Re,{className:"h-4 w-4"}),e.jsx("span",{children:"Download History"})]}),e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:r.downloadHistory.map(m=>e.jsxs("div",{className:"flex items-center justify-between text-sm p-2 bg-muted/30 rounded border",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Bs,{className:"h-3 w-3 text-muted-foreground"}),e.jsx("span",{children:l(m.downloadedAt)})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(he,{className:"h-3 w-3 text-muted-foreground"}),e.jsx("span",{children:m.downloadedBy}),e.jsx(ne,{variant:"outline",size:"sm",children:m.userRole})]})]},m.id))})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(g,{onClick:o,disabled:!(s!=null&&s.signature)||n||r.status!=="approved",className:"flex-1",children:n?e.jsxs(e.Fragment,{children:[e.jsx(qe,{className:"h-4 w-4 mr-2 animate-spin"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ae,{className:"h-4 w-4 mr-2"}),"Generate Signed Document"]})}),e.jsxs(g,{variant:"outline",onClick:()=>t(r.id),disabled:r.status!=="approved",children:[e.jsx(Me,{className:"h-4 w-4 mr-2"}),"Preview"]})]}),!(s!=null&&s.signature)&&e.jsx("p",{className:"text-sm text-warning text-center",children:" Please upload your digital signature to generate signed documents"}),r.status!=="approved"&&e.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"Document must be approved before generating signed version"}),e.jsxs("div",{className:"text-xs text-muted-foreground text-center space-y-1",children:[e.jsx("p",{children:"Generated documents include:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"Digital signature overlay"}),e.jsx("li",{children:"Approval watermark"}),e.jsx("li",{children:"Download tracking footer"}),e.jsx("li",{children:"Verification hash"}),e.jsx("li",{children:"Timestamp and metadata"})]})]})]})]})},Fl=({document:r,onClose:t,onStatusChange:s})=>{const{toast:a}=Pe(),[n,i]=h.useState(!1),[o,l]=h.useState(""),[d,m]=h.useState(!1),[p]=h.useState(r.content||""),j=async()=>{i(!0);try{await s(r.id,"approved"),a({title:"Document Approved",description:"The document has been approved successfully."}),t()}catch{a({title:"Error",description:"Failed to approve document. Please try again.",variant:"destructive"})}finally{i(!1)}},f=async()=>{if(!o.trim()){a({title:"Rejection Reason Required",description:"Please provide a reason for rejection.",variant:"destructive"});return}i(!0);try{await s(r.id,"rejected",o),a({title:"Document Rejected",description:"The document has been rejected with the provided reason."}),t()}catch{a({title:"Error",description:"Failed to reject document. Please try again.",variant:"destructive"})}finally{i(!1)}},w=async()=>{try{if(r.fileUrl){const v=r.createElement("a");v.href=r.fileUrl,v.download=r.fileName,r.body.appendChild(v),v.click(),r.body.removeChild(v)}else{const v=p||r.summary,x=new Blob([v],{type:"text/plain"}),y=URL.createObjectURL(x),T=r.createElement("a");T.href=y,T.download=`${r.fileName}.txt`,r.body.appendChild(T),T.click(),r.body.removeChild(T),URL.revokeObjectURL(y)}a({title:"Download Started",description:"The document is being downloaded."})}catch{a({title:"Download Failed",description:"Failed to download the document. Please try again.",variant:"destructive"})}},L=v=>{switch(v){case"approved":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";case"pending":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(ae,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Document Review"}),e.jsx("p",{className:"text-sm text-gray-500",children:r.fileName})]})]}),e.jsx(g,{variant:"ghost",size:"sm",onClick:t,children:""})]}),e.jsxs("div",{className:"flex h-[calc(90vh-120px)]",children:[e.jsx("div",{className:"w-80 border-r p-6 overflow-y-auto",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Document Status"}),e.jsx(ne,{className:L(r.status),children:r.status.toUpperCase()})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Student Information"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(he,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-sm",children:r.studentName})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ae,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-sm",children:r.studentId})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Timeline"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Bs,{className:"h-4 w-4 text-gray-500"}),e.jsxs("span",{className:"text-sm",children:["Submitted: ",new Date(r.submittedAt).toLocaleDateString()]})]}),r.approvedAt&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"h-4 w-4 text-green-500"}),e.jsxs("span",{className:"text-sm",children:["Approved: ",new Date(r.approvedAt).toLocaleDateString()]})]}),r.approvedBy&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(he,{className:"h-4 w-4 text-gray-500"}),e.jsxs("span",{className:"text-sm",children:["By: ",r.approvedBy]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Approval Path"}),e.jsx("p",{className:"text-sm text-gray-600",children:r.approvalPath})]}),r.rejectionReason&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Rejection Reason"}),e.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-800",children:r.rejectionReason})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(g,{variant:"outline",className:"w-full",onClick:w,children:[e.jsx(Re,{className:"h-4 w-4 mr-2"}),"Download Document"]}),r.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsxs(g,{className:"w-full bg-green-600 hover:bg-green-700",onClick:j,disabled:n,children:[n?e.jsx(ds,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(Ee,{className:"h-4 w-4 mr-2"}),"Approve Document"]}),e.jsxs(g,{variant:"outline",className:"w-full text-red-600 border-red-600 hover:bg-red-50",onClick:()=>m(!d),children:[e.jsx(vt,{className:"h-4 w-4 mr-2"}),"Reject Document"]}),d&&e.jsxs("div",{className:"space-y-3 p-4 border border-red-200 rounded-lg bg-red-50",children:[e.jsxs("div",{children:[e.jsx(k,{htmlFor:"rejectionReason",className:"text-red-800 font-medium",children:"Rejection Reason *"}),e.jsx(Jt,{id:"rejectionReason",placeholder:"Please provide a detailed reason for rejection...",value:o,onChange:v=>l(v.target.value),className:"mt-2",rows:4})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(g,{size:"sm",className:"bg-red-600 hover:bg-red-700",onClick:f,disabled:n||!o.trim(),children:[n?e.jsx(ds,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(vt,{className:"h-4 w-4 mr-2"}),"Confirm Rejection"]}),e.jsx(g,{size:"sm",variant:"outline",onClick:()=>{m(!1),l("")},children:"Cancel"})]})]})]})]})]})}),e.jsx("div",{className:"flex-1 p-6 overflow-y-auto",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Me,{className:"h-5 w-5"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Document Content"})]}),e.jsx(U,{children:e.jsx(z,{className:"p-6",children:e.jsx("div",{className:"whitespace-pre-wrap text-sm leading-relaxed",style:{fontFamily:"'Times New Roman', Times, serif",fontSize:"12pt",lineHeight:"1.6"},children:p||r.summary||"Document content not available."})})}),!p&&!r.summary&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(tt,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Content Not Available"}),e.jsx("p",{className:"text-gray-500",children:"The document content could not be loaded."})]})]})})]})]})})};async function Ol(r,t){try{console.log(" Signing real document..."),console.log(" Original document type:",r.type),console.log(" Original document size:",r.size);const s=r.type;return s==="application/pdf"?await Ml(r,t):s.includes("text/")||s.includes("application/msword")||s.includes("application/vnd.openxmlformats-officedocument")?await $l(r,t):await Ul(r,t)}catch(s){return console.error(" Error signing real document:",s),{success:!1,error:s instanceof Error?s.message:"Unknown error"}}}async function Ml(r,t){try{console.log(" Processing PDF document...");const s=await ja(r),a=ba("PDF Document",s,t,"application/pdf");return{success:!0,signedDocumentBlob:new Blob([a],{type:"text/html"})}}catch(s){return console.error(" Error signing PDF:",s),{success:!1,error:s instanceof Error?s.message:"PDF signing failed"}}}async function $l(r,t){try{console.log(" Processing text document...");const s=await r.text(),a=`

_________________________________________________

DIGITALLY SIGNED DOCUMENT

Signed by: ${t.facultyName}
Designation: ${t.facultyDesignation}
Date: ${new Date(t.signedAt).toLocaleString()}
Document ID: ${t.documentId}

Digital Signature Verification:
- Document has been reviewed and approved
- Signature is legally binding
- Any modifications invalidate this signature

_________________________________________________`,n=s+a;return{success:!0,signedDocumentBlob:new Blob([n],{type:r.type})}}catch(s){return console.error(" Error signing text document:",s),{success:!1,error:s instanceof Error?s.message:"Text document signing failed"}}}async function Ul(r,t){try{console.log(" Creating signed wrapper document...");const s=await ja(r),a=ba(r.type,s,t,r.type);return{success:!0,signedDocumentBlob:new Blob([a],{type:"text/html"})}}catch(s){return console.error(" Error creating signed wrapper:",s),{success:!1,error:s instanceof Error?s.message:"Wrapper creation failed"}}}function ba(r,t,s,a){const n=new Date().toLocaleDateString(),i=new Date().toLocaleTimeString();return`
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Digitally Signed Document - ${s.documentId}</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            margin: 0; 
            padding: 20px;
            background: #f5f5f5;
        }
        .document-container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            border-radius: 8px;
            overflow: hidden;
        }
        .document-header {
            background: #2c3e50;
            color: white;
            padding: 20px;
            text-align: center;
        }
        .document-title {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 10px;
        }
        .document-id {
            font-size: 14px;
            opacity: 0.8;
        }
        .original-document {
            padding: 20px;
            border-bottom: 2px solid #eee;
        }
        .document-preview {
            border: 2px solid #ddd;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            background: #fafafa;
            min-height: 400px;
        }
        .signature-section {
            background: #f8f9fa;
            padding: 30px;
            border-top: 3px solid #28a745;
        }
        .signature-header {
            text-align: center;
            margin-bottom: 30px;
        }
        .approval-badge {
            display: inline-block;
            background: #28a745;
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            font-weight: bold;
            font-size: 18px;
        }
        .signature-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 40px;
            margin: 30px 0;
            padding: 20px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .signature-image {
            border: 3px solid #333;
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .signature-details {
            text-align: left;
        }
        .signature-line {
            border-bottom: 2px solid #333;
            width: 250px;
            margin: 15px 0;
        }
        .faculty-name {
            font-size: 20px;
            font-weight: bold;
            color: #2c3e50;
        }
        .faculty-designation {
            font-size: 16px;
            color: #7f8c8d;
            margin: 5px 0;
        }
        .signature-date {
            font-size: 14px;
            color: #95a5a6;
        }
        .verification-section {
            background: #e8f5e8;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
            border-left: 4px solid #28a745;
        }
        .verification-title {
            font-weight: bold;
            color: #27ae60;
            margin-bottom: 10px;
        }
        .verification-details {
            font-size: 14px;
            color: #2c3e50;
        }
        .footer {
            background: #34495e;
            color: white;
            padding: 20px;
            text-align: center;
            font-size: 12px;
        }
        .watermark {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(-45deg);
            font-size: 72px;
            color: rgba(0,0,0,0.05);
            z-index: -1;
            pointer-events: none;
            font-weight: bold;
        }
        .download-section {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            text-align: center;
        }
        .download-button {
            background: #2196f3;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            text-decoration: none;
            display: inline-block;
        }
        .download-button:hover {
            background: #1976d2;
        }
    </style>
</head>
<body>
    <div class="watermark">DIGITALLY SIGNED</div>
    
    <div class="document-container">
        <div class="document-header">
            <div class="document-title">DIGITALLY SIGNED DOCUMENT</div>
            <div class="document-id">Document ID: ${s.documentId}</div>
        </div>
        
        <div class="original-document">
            <h3>Original Document</h3>
            <div class="document-preview">
                <p><strong>Document Type:</strong> ${r}</p>
                <p><strong>Signed On:</strong> ${n} at ${i}</p>
                <p><strong>Status:</strong> <span style="color: #28a745; font-weight: bold;">APPROVED & SIGNED</span></p>
                
                <div class="download-section">
                    <p><strong>Download Original Document:</strong></p>
                    <a href="data:${a};base64,${t}" download="original-document" class="download-button">
                         Download Original File
                    </a>
                </div>
                
                <div style="margin: 20px 0; padding: 20px; background: #fff3cd; border-radius: 8px; border-left: 4px solid #ffc107;">
                    <p><strong>Note:</strong> This document has been digitally signed and approved by the authorized faculty member. The signature below verifies the authenticity and approval of this document.</p>
                </div>
            </div>
        </div>
        
        <div class="signature-section">
            <div class="signature-header">
                <div class="approval-badge"> APPROVED & SIGNED</div>
            </div>
            
            <div class="signature-container">
                <div class="signature-image">
                    <img src="${s.signature}" alt="Faculty Digital Signature" style="max-height: 120px; max-width: 250px;">
                </div>
                <div class="signature-details">
                    <div class="signature-line"></div>
                    <div class="faculty-name">${s.facultyName}</div>
                    <div class="faculty-designation">${s.facultyDesignation}</div>
                    <div class="signature-date">Date: ${n}</div>
                    <div class="signature-date">Time: ${i}</div>
                </div>
            </div>
            
            <div class="verification-section">
                <div class="verification-title">Digital Signature Verification</div>
                <div class="verification-details">
                    <p><strong>Document ID:</strong> ${s.documentId}</p>
                    <p><strong>Signed By:</strong> ${s.facultyName} (${s.facultyDesignation})</p>
                    <p><strong>Signature Date:</strong> ${s.signedAt}</p>
                    <p><strong>Verification Hash:</strong> ${zl(s)}</p>
                    <p><strong>System:</strong> Digital Document Approval System (DDAS)</p>
                </div>
            </div>
        </div>
        
        <div class="footer">
            <p><strong>This document has been digitally signed and approved through the Digital Document Approval System (DDAS)</strong></p>
            <p>Any unauthorized modifications will invalidate the digital signature</p>
            <p>For verification, contact the system administrator</p>
        </div>
    </div>
</body>
</html>`}function ja(r){return new Promise((t,s)=>{const a=new FileReader;a.onload=()=>{const n=a.result;t(n.split(",")[1])},a.onerror=s,a.readAsDataURL(r)})}function zl(r){const t=`${r.documentId}-${r.facultyName}-${r.signedAt}`;let s=0;for(let a=0;a<t.length;a++){const n=t.charCodeAt(a);s=(s<<5)-s+n,s=s&s}return Math.abs(s).toString(16).toUpperCase()}function Bl(r,t){try{console.log(" Downloading signed document:",t),console.log(" Blob size:",r.size,"bytes"),console.log(" Blob type:",r.type);const s=URL.createObjectURL(r);console.log(" Created blob URL:",s);const a=document.createElement("a");a.href=s,a.download=t,a.style.display="none",document.body.appendChild(a),console.log(" Triggering download..."),a.click(),setTimeout(()=>{document.body.removeChild(a),URL.revokeObjectURL(s),console.log(" Download cleanup completed")},1e3)}catch(s){throw console.error(" Error downloading signed document:",s),s}}const Hl=()=>{const{user:r}=Te(),{toast:t}=Pe(),{lastUpdate:s,isConnected:a}=Js(),[n,i]=h.useState([]),[o,l]=h.useState([]),[d,m]=h.useState(""),[p,j]=h.useState(null),[f,w]=h.useState(null),[L,v]=h.useState(!1),[x,y]=h.useState(!1),[T,V]=h.useState(!1),[R,$]=h.useState(!1),[I,B]=h.useState(!0),[S,C]=h.useState(null),[O,D]=h.useState(0),[A,E]=h.useState({pending:0,approved:0,rejected:0,total:0});h.useEffect(()=>{J(),fe(),ue();const u=setInterval(()=>{J(),fe(),ue()},3e4);return()=>clearInterval(u)},[]),h.useEffect(()=>{if(s){const u=s.data;console.log(" Real-time update received:",s.type,u);const F=Date.now();switch(s.type){case"approval_updated":t({title:"Approval Update",description:`Letter ${u.letterId} has been ${u.status} by ${u.approverName}`}),u.facultyId!==(r==null?void 0:r._id)&&F-O>2e3&&(D(F),J(),fe(),ue());break;case"document_updated":t({title:"Document Update",description:`Document ${u.documentId} status: ${u.status}`}),u.userId!==(r==null?void 0:r._id)&&F-O>2e3&&(D(F),J(),fe());break;case"user_activity":console.log(" User activity:",u);break;case"notification":t({title:u.title||"Notification",description:u.message||"You have a new notification"});break;case"system_message":t({title:"System Message",description:u.message});break;default:console.log(" Unknown update type:",s.type)}}},[s,t]);const J=async()=>{try{B(!0),console.log(" Loading assigned letters for faculty..."),console.log("Current user:",r);const u=await Z.getAssignedLetters();if(console.log(" Assigned letters response:",u),u&&u.success){console.log(" Raw letters data:",u.data.letters),console.log(" Successfully loaded at:",new Date().toLocaleTimeString());const F=u.data.letters.map(_=>{var Q,Ft,Xs,Zs,er,tr,sr,rr;return{id:_._id,studentName:((Q=_.submittedBy)==null?void 0:Q.name)||"Unknown Student",studentId:((Ft=_.submittedBy)==null?void 0:Ft.vtuId)||((Xs=_.submittedBy)==null?void 0:Xs.facultyId)||"Unknown ID",fileName:_.title||"Letter",summary:`Letter: ${_.title}`,content:_.content||"",approvalPath:le(_),status:_.status,submittedAt:_.submittedAt,approvedAt:_.approvedAt,approvedBy:(Zs=_.approvedBy)==null?void 0:Zs.name,rejectionReason:_.rejectionReason,downloadHistory:_.downloadHistory||[],workflowStep:_.workflowStep,assignedMentor:_.assignedMentor?`${_.assignedMentor.name} (${_.assignedMentor.designation})`:null,assignedHOD:_.assignedHOD?`${_.assignedHOD.name} (${_.assignedHOD.designation})`:null,assignedDean:_.assignedDean?`${_.assignedDean.name} (${_.assignedDean.designation})`:null,currentApprover:_.currentApprover?`${_.currentApprover.name} (${_.currentApprover.designation})`:null,debugInfo:{letterId:_._id,workflowStep:_.workflowStep,assignedMentorId:((er=_.assignedMentor)==null?void 0:er._id)||_.assignedMentor,assignedHODId:((tr=_.assignedHOD)==null?void 0:tr._id)||_.assignedHOD,assignedDeanId:((sr=_.assignedDean)==null?void 0:sr._id)||_.assignedDean,currentApproverId:((rr=_.currentApprover)==null?void 0:rr._id)||_.currentApprover}}});console.log(" Transformed requests:",F),console.log(" Sample transformed request:",F[0]),console.log(" Successfully loaded",F.length,"documents"),i(F),C(new Date)}else console.log(" Failed to load documents:",(u==null?void 0:u.message)||"Unknown error"),console.log(" Response object:",u),i([])}catch(u){console.error(" Error loading assigned documents:",u),t({title:"Error",description:"Failed to load assigned documents",variant:"destructive"})}finally{B(!1)}},ue=async()=>{try{console.log(" Loading approval history for faculty...");const u=await Z.getFacultyApprovalHistory();console.log(" Approval history response:",u),u&&u.success?(console.log(" Raw approval history data:",u.data.approvals),l(u.data.approvals),console.log(" Successfully loaded",u.data.approvals.length,"approval records")):(console.log(" Failed to load approval history:",(u==null?void 0:u.message)||"Unknown error"),l([]))}catch(u){console.error(" Error loading approval history:",u),t({title:"Error",description:"Failed to load approval history",variant:"destructive"})}},le=u=>{const F=[];return u.assignedMentor&&F.push("Mentor"),u.assignedHOD&&F.push("HOD"),u.assignedDean&&F.push("Dean"),F.join("  ")},xe=()=>{v(!1),w(null)},ke=u=>{j(u),m(""),y(!0)},N=()=>{y(!1),j(null),m("")},X=u=>{j(u),V(!0)},G=()=>{V(!1),j(null)},fe=async()=>{try{console.log(" Loading approval stats...");const u=await Z.getApprovalStats();if(console.log(" Stats response:",u),u&&u.success){const F={pending:u.data.counts.pending,approved:u.data.counts.approved,rejected:u.data.counts.rejected,total:u.data.counts.pending+u.data.counts.approved+u.data.counts.rejected};console.log(" Updated stats:",F),E(F)}else console.log(" Failed to load stats:",(u==null?void 0:u.message)||"Unknown error")}catch(u){console.error(" Error loading stats:",u)}},Ie=async u=>{try{console.log(" Approving letter:",u),console.log(" Current user ID:",r==null?void 0:r._id),console.log(" Current user role:",r==null?void 0:r.role);const F=n.find(Q=>Q.id===u);F&&F.debugInfo&&console.log(" Debug info for letter:",F.debugInfo);const _=await Z.approveLetter(u);if(console.log(" Approve response:",_),_.success){const Q=_.data.nextStep==="completed"?"Letter fully approved and ready for signing!":`Letter approved, moved to ${_.data.nextStep} stage`;t({title:"Request approved",description:Q}),J(),fe()}}catch(F){console.error(" Error approving letter:",F),console.error(" Error details:",{requestId:u,userId:r==null?void 0:r._id,userRole:r==null?void 0:r.role,errorMessage:F instanceof Error?F.message:"Unknown error"}),t({title:"Error",description:F instanceof Error?F.message:"Failed to approve letter",variant:"destructive"})}},De=async(u,F)=>{if(!F.trim()){t({title:"Rejection Reason Required",description:"You must provide a detailed reason for rejection. This helps students understand what needs to be improved.",variant:"destructive"});return}if(F.trim().length<10){t({title:"Insufficient Rejection Reason",description:"Please provide a more detailed reason (at least 10 characters) to help the student understand what needs to be improved.",variant:"destructive"});return}try{(await Z.rejectLetter(u,F)).success&&(t({title:"Request rejected",description:"The letter has been rejected with feedback"}),J(),fe(),m(""),j(null))}catch(_){console.error("Error rejecting letter:",_),t({title:"Error",description:"Failed to reject letter",variant:"destructive"})}},Ce=async(u,F,_)=>{try{F==="approved"?await Ie(u):F==="rejected"&&await De(u,_||"")}catch(Q){throw console.error(" Error changing document status:",Q),Q}},Le=()=>{t({title:"Download initiated",description:"Signed document is being prepared for download"})},$e=u=>{switch(u){case"pending":return"bg-warning text-warning-foreground";case"approved":return"bg-success text-success-foreground";case"rejected":return"bg-destructive text-destructive-foreground";default:return"bg-muted text-muted-foreground"}},Xt=u=>{switch(u){case"pending":return e.jsx(qe,{className:"h-4 w-4"});case"approved":return e.jsx(Ee,{className:"h-4 w-4"});case"rejected":return e.jsx(vt,{className:"h-4 w-4"});default:return e.jsx(ae,{className:"h-4 w-4"})}},q=n.filter(u=>u.status==="pending"),c=n.filter(u=>u.status!=="pending"),re=n.filter(u=>u.status==="approved");return e.jsxs("div",{className:"min-h-screen",children:[e.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[e.jsxs("div",{className:"mb-8 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl sm:text-5xl lg:text-6xl font-bold bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent",children:"Faculty Dashboard"}),e.jsxs("p",{className:"text-xl sm:text-2xl text-white mt-2",children:["Welcome back, ",e.jsx("span",{className:"font-semibold bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent",children:r==null?void 0:r.name})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(g,{onClick:()=>{J(),fe()},variant:"outline",size:"sm",className:"flex items-center space-x-2 bg-white/10 border-white/20 text-white hover:bg-white/20 hover:border-white/30 rounded-xl",children:[e.jsx(Se,{className:"h-4 w-4"}),e.jsx("span",{children:"Refresh"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${a?"bg-green-500 animate-pulse":"bg-red-500"}`}),e.jsx("span",{className:"text-xs text-gray-300",children:a?"Live Updates":"Offline"}),s&&e.jsxs("span",{className:"text-xs text-blue-400",children:["Last: ",new Date(s.timestamp).toLocaleTimeString()]})]})]})]}),S&&e.jsxs("div",{className:"flex items-center justify-between text-base text-gray-300 mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(qe,{className:"h-5 w-5"}),e.jsxs("span",{children:["Last updated: ",S.toLocaleTimeString()]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.jsx("span",{children:"Auto-refresh enabled (30s)"})]})]}),e.jsxs(ya,{defaultValue:"overview",className:"space-y-6",children:[e.jsxs(va,{className:"grid w-full grid-cols-5 bg-white/10 border-white/20 rounded-xl",children:[e.jsx(bt,{value:"overview",className:"data-[state=active]:bg-white/20 data-[state=active]:text-white text-gray-300 hover:text-white rounded-lg",children:"Overview"}),e.jsx(bt,{value:"approvals",className:"data-[state=active]:bg-white/20 data-[state=active]:text-white text-gray-300 hover:text-white rounded-lg",children:"Approvals"}),e.jsx(bt,{value:"history",className:"data-[state=active]:bg-white/20 data-[state=active]:text-white text-gray-300 hover:text-white rounded-lg",children:"Approval History"}),e.jsx(bt,{value:"signatures",className:"data-[state=active]:bg-white/20 data-[state=active]:text-white text-gray-300 hover:text-white rounded-lg",children:"Signatures"}),e.jsx(bt,{value:"documents",className:"data-[state=active]:bg-white/20 data-[state=active]:text-white text-gray-300 hover:text-white rounded-lg",children:"Signed Documents"})]}),e.jsxs(jt,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-4 gap-6",children:[e.jsx(U,{className:"glass-card-ultra hover-lift",children:e.jsx(z,{className:"p-6",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-orange-500/20 to-yellow-500/20 rounded-xl flex items-center justify-center",children:e.jsx(qe,{className:"h-6 w-6 text-orange-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-white",children:A.pending}),e.jsx("p",{className:"text-sm text-gray-300",children:"Pending Requests"})]})]})})}),e.jsx(U,{className:"glass-card-ultra hover-lift",children:e.jsx(z,{className:"p-6",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500/20 to-emerald-500/20 rounded-xl flex items-center justify-center",children:e.jsx(Ee,{className:"h-6 w-6 text-green-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-white",children:A.approved}),e.jsx("p",{className:"text-sm text-gray-300",children:"Approved"})]})]})})}),e.jsx(U,{className:"glass-card-ultra hover-lift",children:e.jsx(z,{className:"p-6",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500/20 to-purple-500/20 rounded-xl flex items-center justify-center",children:e.jsx(ut,{className:"h-6 w-6 text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-white",children:A.total}),e.jsx("p",{className:"text-sm text-gray-300",children:"Total Requests"})]})]})})}),e.jsx(U,{className:"glass-card-ultra hover-lift",children:e.jsx(z,{className:"p-6",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500/20 to-pink-500/20 rounded-xl flex items-center justify-center",children:e.jsx(Qe,{className:"h-6 w-6 text-purple-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:`text-2xl font-bold ${r!=null&&r.signature?"text-green-400":"text-red-400"}`,children:r!=null&&r.signature?"":""}),e.jsx("p",{className:"text-sm text-gray-300",children:r!=null&&r.signature?"Signature Active":"No Signature"}),(r==null?void 0:r.signature)&&(r==null?void 0:r.signatureUploadedAt)&&e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Uploaded: ",new Date(r.signatureUploadedAt).toLocaleDateString()]})]})]})})})]}),e.jsxs(U,{className:"glass-card-ultra hover-lift",children:[e.jsxs(te,{children:[e.jsx(se,{className:"text-xl font-bold text-white",children:"Quick Actions"}),e.jsx(oe,{className:"text-gray-300",children:"Common tasks and shortcuts"})]}),e.jsxs(z,{className:"flex gap-4",children:[e.jsxs(g,{onClick:()=>{var u;return(u=document.querySelector('[data-value="approvals"]'))==null?void 0:u.click()},className:"bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300",children:[e.jsx(qe,{className:"h-4 w-4 mr-2"}),"Review Pending Requests"]}),e.jsxs(g,{variant:"outline",onClick:()=>{var u;return(u=document.querySelector('[data-value="signatures"]'))==null?void 0:u.click()},className:"bg-white/10 border-white/20 text-white hover:bg-white/20 hover:border-white/30 rounded-xl",children:[e.jsx(Qe,{className:"h-4 w-4 mr-2"}),"Manage Signature"]}),e.jsxs(g,{variant:"outline",onClick:()=>{var u;return(u=document.querySelector('[data-value="documents"]'))==null?void 0:u.click()},className:"bg-white/10 border-white/20 text-white hover:bg-white/20 hover:border-white/30 rounded-xl",children:[e.jsx(Re,{className:"h-4 w-4 mr-2"}),"Generate Documents"]})]})]})]}),e.jsxs(jt,{value:"approvals",className:"space-y-6",children:[e.jsxs(U,{className:"glass-card-ultra hover-lift",children:[e.jsxs(te,{children:[e.jsxs(se,{className:"flex items-center space-x-3 text-xl font-bold text-white",children:[e.jsx(qe,{className:"h-6 w-6 text-orange-400"}),e.jsx("span",{children:"Pending Approval Requests"})]}),e.jsx(oe,{className:"text-gray-300",children:"Documents waiting for your approval"})]}),e.jsx(z,{children:I?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-blue-500/20 to-purple-500/20 rounded-full mb-6",children:e.jsx(ds,{className:"h-8 w-8 animate-spin text-blue-400"})}),e.jsx("p",{className:"text-lg text-white",children:"Loading pending requests..."})]}):q.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-green-500/20 to-emerald-500/20 rounded-full mb-6",children:e.jsx(Ee,{className:"h-8 w-8 text-green-400"})}),e.jsx("p",{className:"text-lg text-white",children:"No pending requests"})]}):e.jsx("div",{className:"space-y-6",children:q.map(u=>e.jsxs("div",{className:"glass-card-ultra rounded-2xl p-6 hover-lift transition-all duration-300",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h3",{className:"font-bold text-white text-lg",children:u.fileName}),e.jsx(ne,{variant:"outline",className:"bg-white/10 border-white/20 text-white",children:u.studentId})]}),e.jsxs("p",{className:"text-base text-gray-300 mb-2",children:["Student: ",u.studentName]}),e.jsxs("p",{className:"text-base text-gray-300",children:["Submitted on ",new Date(u.submittedAt).toLocaleDateString()]})]}),e.jsx(ne,{className:`${$e(u.status)} px-3 py-1 rounded-xl`,children:e.jsxs("span",{className:"flex items-center space-x-2",children:[Xt(u.status),e.jsx("span",{className:"capitalize",children:u.status})]})})]}),e.jsxs("div",{className:"space-y-3 text-base mb-6",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Summary: "}),e.jsx("span",{className:"text-gray-300",children:u.summary})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Approval Path: "}),e.jsx("span",{className:"text-gray-300",children:u.approvalPath})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 pt-4 border-t border-white/20",children:[u.status==="pending"&&e.jsxs(g,{size:"sm",onClick:()=>Ie(u.id),className:"flex items-center space-x-2 bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300",children:[e.jsx(Ee,{className:"h-4 w-4"}),e.jsx("span",{children:"Approve"})]}),u.status==="approved"&&(r==null?void 0:r.signature)&&e.jsxs(g,{size:"sm",variant:"default",onClick:()=>X(u),className:"flex items-center space-x-2 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300",children:[e.jsx(Qe,{className:"h-4 w-4"}),e.jsx("span",{children:"Sign Document"})]}),u.status==="approved"&&e.jsxs("div",{className:"flex items-center space-x-2 text-green-400",children:[e.jsx(Ee,{className:"h-4 w-4"}),e.jsx("span",{className:"text-base font-semibold",children:"Document Signed"})]}),e.jsxs(g,{variant:"destructive",size:"sm",onClick:()=>ke(u),className:"flex items-center space-x-2 bg-gradient-to-r from-red-500 to-pink-500 hover:from-red-600 hover:to-pink-600 text-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300",children:[e.jsx(vt,{className:"h-4 w-4"}),e.jsx("span",{children:"Reject"})]}),e.jsxs(g,{variant:"outline",size:"sm",className:"flex items-center space-x-2 bg-white/10 border-white/20 text-white hover:bg-white/20 hover:border-white/30 rounded-xl",onClick:()=>{w(u),$(!0)},children:[e.jsx(Me,{className:"h-4 w-4"}),e.jsx("span",{children:"View Document"})]})]})]},u.id))})})]}),c.length>0&&e.jsxs(U,{className:"shadow-soft",children:[e.jsxs(te,{children:[e.jsxs(se,{className:"flex items-center space-x-2",children:[e.jsx(ae,{className:"h-5 w-5"}),e.jsx("span",{children:"Recent Activity"})]}),e.jsx(oe,{children:"Recently processed requests"})]}),e.jsx(z,{children:e.jsx("div",{className:"space-y-4",children:c.slice(0,5).map(u=>e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-border last:border-b-0",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-foreground",children:u.fileName}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[u.studentName," (",u.studentId,")"]})]}),e.jsx(ne,{className:$e(u.status),children:e.jsxs("span",{className:"flex items-center space-x-1",children:[Xt(u.status),e.jsx("span",{className:"capitalize",children:u.status})]})})]},u.id))})})]})]}),e.jsx(jt,{value:"history",className:"space-y-6",children:e.jsxs(U,{className:"shadow-soft",children:[e.jsxs(te,{children:[e.jsxs(se,{className:"flex items-center space-x-2",children:[e.jsx(ae,{className:"h-5 w-5"}),e.jsx("span",{children:"Your Approval History"})]}),e.jsx(oe,{children:"All documents you have approved, rejected, or signed"})]}),e.jsx(z,{children:o.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(ae,{className:"mx-auto h-12 w-12 mb-4 opacity-50"}),e.jsx("p",{children:"No approval history found"}),e.jsx("p",{className:"text-sm",children:"Your approval history will appear here once you start reviewing documents"})]}):e.jsx("div",{className:"space-y-4",children:o.map(u=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:u.document_title}),e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Student: ",e.jsx("span",{className:"font-medium",children:u.student_name})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[e.jsxs("span",{children:["Date: ",new Date(u.approved_at).toLocaleDateString()]}),e.jsxs("span",{children:["Time: ",new Date(u.approved_at).toLocaleTimeString()]}),e.jsxs("span",{children:["Step: ",u.workflow_step]})]})]}),e.jsx("div",{className:"ml-4",children:e.jsx(ne,{className:`${u.status==="approved"?"bg-green-100 text-green-800":u.status==="rejected"?"bg-red-100 text-red-800":u.status==="signed"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"} px-3 py-1 text-sm font-medium`,children:u.status.charAt(0).toUpperCase()+u.status.slice(1)})})]}),u.comment&&e.jsx("div",{className:"mb-3",children:e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Comment:"})," ",u.comment]})}),u.rejection_reason&&e.jsx("div",{className:"mb-3",children:e.jsxs("p",{className:"text-sm text-red-600",children:[e.jsx("span",{className:"font-medium",children:"Rejection Reason:"})," ",u.rejection_reason]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[e.jsxs("span",{children:["File: ",u.file_name||"N/A"]}),u.file_size&&e.jsxs("span",{children:["(",Math.round(u.file_size/1024)," KB)"]})]}),u.signed_pdf_url&&e.jsxs(g,{size:"sm",variant:"outline",className:"flex items-center space-x-2",onClick:async()=>{try{const F=await Z.downloadSignedLetter(u.document_id),_=URL.createObjectURL(F),Q=document.createElement("a");Q.href=_,Q.download=`SIGNED_${u.document_title.replace(/[^a-zA-Z0-9]/g,"_")}.pdf`,document.body.appendChild(Q),Q.click(),document.body.removeChild(Q),URL.revokeObjectURL(_),t({title:"Signed Letter Downloaded!",description:"The signed letter has been downloaded successfully."})}catch(F){console.error("Error downloading signed letter:",F),t({title:"Download Failed",description:"Failed to download the signed letter. Please try again.",variant:"destructive"})}},children:[e.jsx(Re,{className:"h-4 w-4"}),e.jsx("span",{children:"Download Signed Copy"})]})]})]},u._id))})})]})}),e.jsx(jt,{value:"signatures",className:"space-y-6",children:e.jsx(Pl,{})}),e.jsx(jt,{value:"documents",className:"space-y-6",children:e.jsxs(U,{className:"shadow-soft",children:[e.jsxs(te,{children:[e.jsxs(se,{className:"flex items-center space-x-2",children:[e.jsx(Re,{className:"h-5 w-5"}),e.jsx("span",{children:"Generate Signed Documents"})]}),e.jsx(oe,{children:"Create digitally signed versions of approved documents"})]}),e.jsx(z,{children:re.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(ae,{className:"mx-auto h-12 w-12 mb-4 opacity-50"}),e.jsx("p",{children:"No approved documents available for signing"})]}):e.jsx("div",{className:"space-y-6",children:re.map(u=>e.jsx(Tl,{request:{...u,studentName:u.studentName,studentId:u.studentId},onDownload:Le},u.id))})})]})})]})]}),T&&p&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg max-w-lg w-full mx-4",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Sign & Approve Document"}),e.jsx(g,{variant:"ghost",size:"sm",onClick:G,className:"text-gray-500 hover:text-gray-700",children:""})]}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Document: ",e.jsx("strong",{children:p.fileName})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Student: ",e.jsx("strong",{children:p.studentName})]})]}),r!=null&&r.signature?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(k,{className:"text-sm font-medium",children:"Your Signature"}),e.jsx("div",{className:"mt-2 p-4 border rounded-lg bg-gray-50",children:e.jsx("img",{src:r.signature,alt:"Faculty Signature",className:"max-h-20 mx-auto"})})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(g,{variant:"outline",onClick:G,children:"Cancel"}),e.jsxs(g,{className:"bg-green-600 hover:bg-green-700",onClick:async()=>{if(p&&(r!=null&&r.signature)){try{const u={facultyName:r.name,facultyDesignation:r.designation||r.role,signature:r.signature};console.log(" Signing letter in backend..."),await Z.signLetter(p.id,u),console.log(" Letter signed in backend"),console.log(" Fetching original document...");const F=await Z.downloadDocument(p.id);console.log(" Original document blob:",F);const _={signature:r.signature,facultyName:r.name,facultyDesignation:r.designation||r.role,signedAt:new Date().toISOString(),documentId:p.id};console.log(" Generating signed document...");const Q=await Ol(F,_);if(console.log(" Signing result:",Q),Q.success&&Q.signedDocumentBlob){const Ft=`SIGNED_${p.fileName.replace(/\.[^/.]+$/,"")}_${p.id}.html`;console.log(" Downloading signed document:",Ft),Bl(Q.signedDocumentBlob,Ft),t({title:"Document Approved & Signed!",description:"The document has been approved and a signed version has been downloaded."})}else t({title:"Error",description:Q.error||"Failed to generate signed document",variant:"destructive"})}catch(u){console.error("Error signing document:",u),t({title:"Error",description:"Failed to sign document",variant:"destructive"})}G()}},children:[e.jsx(Qe,{className:"h-4 w-4 mr-2"}),"Sign & Approve"]})]})]}):e.jsxs("div",{className:"text-center py-4",children:[e.jsx(Qe,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"No signature found"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Please upload your signature first in the Signature Manager tab."}),e.jsx(g,{variant:"outline",onClick:G,children:"Close"})]})]})})]})}),x&&p&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg max-w-md w-full mx-4",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-semibold flex items-center space-x-2",children:[e.jsx(vt,{className:"h-5 w-5 text-red-600"}),e.jsx("span",{children:"Reject Document"})]}),e.jsx("p",{className:"text-sm text-red-600 font-medium mt-1",children:" Rejection reason is mandatory"})]}),e.jsx(g,{variant:"ghost",size:"sm",onClick:N,className:"text-gray-500 hover:text-gray-700",children:""})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:['Please provide a reason for rejecting "',p.fileName,'"']}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(k,{htmlFor:"rejectionReason",className:"text-red-600 font-medium",children:"Rejection Reason *"}),e.jsx(Jt,{id:"rejectionReason",placeholder:"Please provide a detailed explanation of why this document is being rejected. Include specific areas that need improvement...",value:d,onChange:u=>m(u.target.value),rows:4,className:"border-red-200 focus:border-red-500"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Minimum 10 characters required. Current: ",d.length," characters"]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(g,{variant:"outline",onClick:N,children:"Cancel"}),e.jsx(g,{variant:"destructive",disabled:!d.trim()||d.trim().length<10,onClick:()=>{p&&(De(p.id,d),N())},children:"Reject Document"})]})]})]})]})}),L&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Document Details"}),e.jsx(g,{variant:"ghost",size:"sm",onClick:xe,className:"text-gray-500 hover:text-gray-700",children:""})]}),e.jsx("div",{className:"p-6",children:f&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(k,{className:"text-sm font-medium text-gray-500",children:"Student Name"}),e.jsx("p",{className:"text-sm",children:f.studentName})]}),e.jsxs("div",{children:[e.jsx(k,{className:"text-sm font-medium text-gray-500",children:"Student ID"}),e.jsx("p",{className:"text-sm",children:f.studentId})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(k,{className:"text-sm font-medium text-gray-500",children:"File Name"}),e.jsx("p",{className:"text-sm",children:f.fileName})]}),e.jsxs("div",{children:[e.jsx(k,{className:"text-sm font-medium text-gray-500",children:"Status"}),e.jsx(ne,{variant:f.status==="approved"?"default":f.status==="rejected"?"destructive":"secondary",children:f.status})]})]}),e.jsxs("div",{children:[e.jsx(k,{className:"text-sm font-medium text-gray-500",children:"Description"}),e.jsx("p",{className:"text-sm mt-1",children:f.summary})]}),f.content&&e.jsxs("div",{children:[e.jsx(k,{className:"text-sm font-medium text-gray-500",children:"Letter Content"}),e.jsx("div",{className:"mt-2 p-4 bg-gray-50 rounded-lg border max-h-96 overflow-y-auto",children:e.jsx("pre",{className:"text-sm whitespace-pre-wrap font-sans leading-relaxed",children:f.content})})]}),e.jsxs("div",{children:[e.jsx(k,{className:"text-sm font-medium text-gray-500",children:"Approval Path"}),e.jsx("p",{className:"text-sm mt-1",children:f.approvalPath})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(k,{className:"text-sm font-medium text-gray-500",children:"Submitted At"}),e.jsx("p",{className:"text-sm",children:new Date(f.submittedAt).toLocaleString()})]}),f.approvedAt&&e.jsxs("div",{children:[e.jsx(k,{className:"text-sm font-medium text-gray-500",children:"Approved At"}),e.jsx("p",{className:"text-sm",children:new Date(f.approvedAt).toLocaleString()})]})]}),f.approvedBy&&e.jsxs("div",{children:[e.jsx(k,{className:"text-sm font-medium text-gray-500",children:"Approved By"}),e.jsx("p",{className:"text-sm",children:f.approvedBy})]}),f.rejectionReason&&e.jsxs("div",{children:[e.jsx(k,{className:"text-sm font-medium text-gray-500",children:"Rejection Reason"}),e.jsx("p",{className:"text-sm text-red-600",children:f.rejectionReason})]}),f.workflowStep&&e.jsxs("div",{children:[e.jsx(k,{className:"text-sm font-medium text-gray-500",children:"Current Workflow Step"}),e.jsx("p",{className:"text-sm",children:f.workflowStep})]}),f.currentApprover&&e.jsxs("div",{children:[e.jsx(k,{className:"text-sm font-medium text-gray-500",children:"Current Approver"}),e.jsx("p",{className:"text-sm",children:f.currentApprover})]}),(f.assignedMentor||f.assignedHOD||f.assignedDean)&&e.jsxs("div",{children:[e.jsx(k,{className:"text-sm font-medium text-gray-500",children:"Assigned Faculty"}),e.jsxs("div",{className:"text-sm space-y-1",children:[f.assignedMentor&&e.jsxs("p",{children:[e.jsx("strong",{children:"Mentor:"})," ",f.assignedMentor]}),f.assignedHOD&&e.jsxs("p",{children:[e.jsx("strong",{children:"HOD:"})," ",f.assignedHOD]}),f.assignedDean&&e.jsxs("p",{children:[e.jsx("strong",{children:"Dean:"})," ",f.assignedDean]})]})]})]})})]})}),R&&f&&e.jsx(Fl,{document:f,onClose:()=>{$(!1),w(null)},onStatusChange:Ce})]})},ql=()=>{const{user:r,logout:t}=Te(),{toast:s}=Pe(),{lastUpdate:a,isConnected:n}=Js(),[i,o]=h.useState([]),[l,d]=h.useState([]),[m,p]=h.useState(!1),[j,f]=h.useState(""),[w,L]=h.useState("all"),[v,x]=h.useState("all"),[y,T]=h.useState(!1),[V,R]=h.useState(!1),[$,I]=h.useState("dashboard"),[B,S]=h.useState(!1),[C,O]=h.useState(!1),[D,A]=h.useState(null),[E,J]=h.useState({name:"",email:"",password:"",role:"student",vtuId:"",facultyId:"",designation:"",department:"",phone:"",address:"",year:"",semester:"",specialization:""}),[ue,le]=h.useState(!1);h.useEffect(()=>{xe();const c=setInterval(()=>{xe()},3e4);return()=>clearInterval(c)},[]),h.useEffect(()=>{if(a&&a.type==="approval_updated"){const c=a.data;console.log(" Real-time approval update received:",c),s({title:"System Update",description:`Letter ${c.letterId} has been ${c.status} by ${c.approverName}`}),xe()}},[a,s]);const xe=async()=>{var c,re;p(!0);try{console.log(" Loading admin dashboard data...");const[u,F]=await Promise.all([Z.getAllUsers(),Z.getAllDocuments()]);console.log(" Users response:",u),console.log(" Documents response:",F),u.success?(console.log(" Users loaded:",((c=u.data.users)==null?void 0:c.length)||0),o(u.data.users||[])):console.error(" Failed to load users:",u.message),F.success?(console.log(" Documents loaded:",((re=F.data.documents)==null?void 0:re.length)||0),d(F.data.documents||[])):console.error(" Failed to load documents:",F.message)}catch(u){console.error(" Error loading admin data:",u),s({title:"Error loading data",description:`Failed to load dashboard data: ${u instanceof Error?u.message:"Unknown error"}`,variant:"destructive"})}finally{p(!1)}},ke=()=>{t(),s({title:"Logged out successfully",description:"You have been logged out of the admin dashboard."})},N=async c=>{try{const re=i.find(F=>F._id===c);if(!re)return;(await Z.updateUserStatus(c,!re.isActive)).success&&(o(F=>F.map(_=>_._id===c?{..._,isActive:!_.isActive}:_)),s({title:"User status updated",description:"User status has been updated successfully."}))}catch(re){console.error("Error updating user status:",re),s({title:"Error updating user",description:"Failed to update user status. Please try again.",variant:"destructive"})}},X=async(c,re)=>{try{(await Z.updateUserRole(c,re)).success&&(o(F=>F.map(_=>_._id===c?{..._,role:re}:_)),s({title:"User role updated",description:"User role has been updated successfully."}))}catch(u){console.error("Error updating user role:",u),s({title:"Error updating user role",description:"Failed to update user role. Please try again.",variant:"destructive"})}},G=async()=>{le(!0);try{(await Z.register({name:E.name,email:E.email,password:E.password,role:E.role,vtuId:E.role==="student"?E.vtuId:void 0,facultyId:E.role==="faculty"?E.facultyId:void 0,designation:E.role==="faculty"?E.designation:void 0,department:E.department,phone:E.phone,address:E.address,year:E.role==="student"?E.year:void 0,semester:E.role==="student"?E.semester:void 0,specialization:E.role==="student"?E.specialization:void 0})).success&&(s({title:"User created successfully",description:`${E.name} has been added to the system.`}),S(!1),J({name:"",email:"",password:"",role:"student",vtuId:"",facultyId:"",designation:"",department:"",phone:"",address:"",year:"",semester:"",specialization:""}),xe())}catch(c){console.error("Error creating user:",c),s({title:"Error creating user",description:"Failed to create user. Please try again.",variant:"destructive"})}finally{le(!1)}},fe=async()=>{if(D){le(!0);try{(await Z.updateUser(D._id,{name:D.name,email:D.email,role:D.role,vtuId:D.role==="student"?D.vtuId:void 0,facultyId:D.role==="faculty"?D.facultyId:void 0,designation:D.role==="faculty"?D.designation:void 0,department:D.department,phone:D.phone,address:D.address,year:D.role==="student"?D.year:void 0,semester:D.role==="student"?D.semester:void 0,specialization:D.role==="student"?D.specialization:void 0})).success&&(s({title:"User updated successfully",description:`${D.name}'s profile has been updated.`}),O(!1),A(null),xe())}catch(c){console.error("Error updating user:",c),s({title:"Error updating user",description:"Failed to update user. Please try again.",variant:"destructive"})}finally{le(!1)}}},Ie=async(c,re)=>{if(confirm(`Are you sure you want to delete ${re}? This action cannot be undone.`))try{(await Z.deleteUser(c)).success&&(s({title:"User deleted successfully",description:`${re} has been removed from the system.`}),xe())}catch(u){console.error("Error deleting user:",u),s({title:"Error deleting user",description:"Failed to delete user. Please try again.",variant:"destructive"})}},De=c=>{A({...c}),O(!0)},Ce=i.filter(c=>{const re=c.name.toLowerCase().includes(j.toLowerCase())||c.email.toLowerCase().includes(j.toLowerCase()),u=w==="all"||c.role===w;return re&&u});console.log(" Admin Dashboard Debug:"),console.log("Users array:",i),console.log("Users length:",i.length),console.log("Filtered users:",Ce),console.log("Filtered users length:",Ce.length);const Le=l.filter(c=>{const re=c.title.toLowerCase().includes(j.toLowerCase())||c.submittedBy.toLowerCase().includes(j.toLowerCase()),u=v==="all"||c.status===v;return re&&u}),$e=c=>{switch(c){case"approved":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";case"pending":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},Xt=c=>{switch(c){case"admin":return"bg-purple-100 text-purple-800";case"faculty":return"bg-blue-100 text-blue-800";case"student":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},q={totalUsers:i.length,activeUsers:i.filter(c=>c.isActive).length,totalDocuments:l.length,pendingDocuments:l.filter(c=>c.status==="pending").length,approvedDocuments:l.filter(c=>c.status==="approved").length,rejectedDocuments:l.filter(c=>c.status==="rejected").length,delayedApprovals:l.filter(c=>c.daysPending>7).length};return m?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading admin dashboard..."})]})}):e.jsxs("div",{className:`min-h-screen ${y?"bg-gray-900 text-white":"bg-gray-50 text-gray-900"}`,children:[e.jsx("header",{className:`${y?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border-b shadow-sm`,children:e.jsxs("div",{className:"flex justify-between items-center px-4 py-3",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(g,{variant:"ghost",size:"sm",onClick:()=>R(!V),className:y?"text-gray-300 hover:text-white":"text-gray-600 hover:text-gray-900",children:V?e.jsx(Za,{className:"h-5 w-5"}):e.jsx(Mr,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-purple-500 to-blue-600 rounded-lg flex items-center justify-center",children:e.jsx(cn,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold",children:"Admin Dashboard"}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Welcome back, ",r==null?void 0:r.name]})]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${n?"bg-green-500":"bg-red-500"}`}),e.jsx("span",{className:"text-xs text-gray-500",children:n?"Live":"Offline"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(g,{variant:"ghost",size:"sm",onClick:xe,className:y?"text-gray-300 hover:text-white":"text-gray-600 hover:text-gray-900",children:e.jsx(Se,{className:"h-4 w-4"})}),e.jsx(g,{variant:"ghost",size:"sm",onClick:()=>T(!y),className:y?"text-gray-300 hover:text-white":"text-gray-600 hover:text-gray-900",children:y?e.jsx(Ur,{className:"h-5 w-5"}):e.jsx($r,{className:"h-5 w-5"})}),e.jsx(g,{variant:"ghost",size:"sm",asChild:!0,className:y?"text-gray-300 hover:text-white":"text-gray-600 hover:text-gray-900",children:e.jsx(ce,{to:"/",children:e.jsx(cs,{className:"h-5 w-5"})})}),e.jsx(g,{variant:"ghost",size:"sm",onClick:ke,className:y?"text-gray-300 hover:text-white":"text-gray-600 hover:text-gray-900",children:e.jsx(_s,{className:"h-5 w-5"})})]})]})}),e.jsxs("div",{className:"flex",children:[e.jsx("aside",{className:`${y?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border-r transition-all duration-300 ${V?"w-16":"w-64"}`,children:e.jsx("nav",{className:"p-4 space-y-2",children:[{id:"dashboard",label:"Dashboard",icon:Ot},{id:"users",label:"User Management",icon:ut},{id:"documents",label:"Documents",icon:ae},{id:"workflows",label:"Workflows",icon:es},{id:"analytics",label:"Analytics",icon:qn},{id:"settings",label:"Settings",icon:qt}].map(c=>e.jsxs("button",{onClick:()=>I(c.id),className:`w-full flex items-center space-x-3 px-3 py-2 rounded-lg transition-colors ${$===c.id?`${y?"bg-purple-600 text-white":"bg-purple-100 text-purple-800"}`:`${y?"text-gray-300 hover:bg-gray-700":"text-gray-600 hover:bg-gray-100"}`}`,children:[e.jsx(c.icon,{className:"h-5 w-5"}),!V&&e.jsx("span",{children:c.label})]},c.id))})}),e.jsxs("main",{className:"flex-1 p-6",children:[$==="dashboard"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(U,{className:y?"bg-gray-800 border-gray-700":"bg-white",children:e.jsx(z,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(ut,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Users"}),e.jsx("p",{className:"text-2xl font-bold",children:q.totalUsers}),e.jsxs("p",{className:"text-xs text-gray-500",children:[q.activeUsers," active"]})]})]})})}),e.jsx(U,{className:y?"bg-gray-800 border-gray-700":"bg-white",children:e.jsx(z,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(ae,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Documents"}),e.jsx("p",{className:"text-2xl font-bold",children:q.totalDocuments}),e.jsxs("p",{className:"text-xs text-gray-500",children:[q.pendingDocuments," pending"]})]})]})})}),e.jsx(U,{className:y?"bg-gray-800 border-gray-700":"bg-white",children:e.jsx(z,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:e.jsx(qe,{className:"h-6 w-6 text-yellow-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Delayed"}),e.jsx("p",{className:"text-2xl font-bold",children:q.delayedApprovals}),e.jsx("p",{className:"text-xs text-gray-500",children:"> 7 days"})]})]})})}),e.jsx(U,{className:y?"bg-gray-800 border-gray-700":"bg-white",children:e.jsx(z,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(Ot,{className:"h-6 w-6 text-purple-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Approval Rate"}),e.jsxs("p",{className:"text-2xl font-bold",children:[q.totalDocuments>0?Math.round(q.approvedDocuments/q.totalDocuments*100):0,"%"]}),e.jsx("p",{className:"text-xs text-gray-500",children:"successful"})]})]})})})]}),e.jsxs(U,{className:y?"bg-gray-800 border-gray-700":"bg-white",children:[e.jsx(te,{children:e.jsx(se,{children:"Recent Activity"})}),e.jsx(z,{children:e.jsx("div",{className:"space-y-3",children:l.slice(0,5).map(c=>e.jsxs("div",{className:"flex items-center space-x-3 p-3 rounded-lg bg-gray-50",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${c.status==="approved"?"bg-green-500":c.status==="rejected"?"bg-red-500":"bg-yellow-500"}`}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:c.title}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Submitted by ",c.submittedBy]})]}),e.jsx(ne,{className:$e(c.status),children:c.status})]},c._id))})})]})]}),$==="users"&&e.jsx("div",{className:"space-y-6",children:e.jsxs(U,{className:y?"bg-gray-800 border-gray-700":"bg-white",children:[e.jsx(te,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx(se,{children:"User Management"}),e.jsxs(oe,{children:["Manage system users, roles, and status (",i.length," users)"]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(g,{variant:"outline",onClick:xe,className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"h-4 w-4"}),e.jsx("span",{children:"Refresh"})]}),e.jsxs(g,{onClick:()=>S(!0),children:[e.jsx(In,{className:"h-4 w-4 mr-2"}),"Add User"]})]})]})}),e.jsxs(z,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(cr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(W,{placeholder:"Search users...",value:j,onChange:c=>f(c.target.value),className:"pl-10"})]})}),e.jsxs(be,{value:w,onValueChange:L,children:[e.jsx(je,{className:"w-full sm:w-48",children:e.jsx(Ne,{})}),e.jsxs(we,{children:[e.jsx(P,{value:"all",children:"All Roles"}),e.jsx(P,{value:"student",children:"Student"}),e.jsx(P,{value:"faculty",children:"Faculty"}),e.jsx(P,{value:"admin",children:"Admin"})]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:`border-b ${y?"border-gray-700":"border-gray-200"}`,children:[e.jsx("th",{className:"text-left py-3 px-4",children:"User"}),e.jsx("th",{className:"text-left py-3 px-4",children:"Role"}),e.jsx("th",{className:"text-left py-3 px-4",children:"Status"}),e.jsx("th",{className:"text-left py-3 px-4",children:"Last Login"}),e.jsx("th",{className:"text-left py-3 px-4",children:"Actions"})]})}),e.jsx("tbody",{children:Ce.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"text-center py-8 text-gray-500",children:i.length===0?"No users found. Loading...":"No users match your search criteria."})}):Ce.map(c=>e.jsxs("tr",{className:`border-b ${y?"border-gray-700":"border-gray-200"}`,children:[e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center mr-3",children:e.jsx(he,{className:"h-4 w-4 text-gray-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:c.name}),e.jsx("p",{className:"text-sm text-gray-500",children:c.email}),e.jsx("p",{className:"text-xs text-gray-400",children:c.vtuId||c.facultyId||c.designation})]})]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx(ne,{className:Xt(c.role),children:c.role})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx(ne,{className:c.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800",children:c.isActive?"Active":"Inactive"})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("p",{className:"text-sm text-gray-500",children:c.lastLogin?new Date(c.lastLogin).toLocaleDateString():"Never"})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(g,{variant:"outline",size:"sm",onClick:()=>De(c),className:"text-blue-600 border-blue-600",children:e.jsx(Mt,{className:"h-4 w-4"})}),e.jsx(g,{variant:"outline",size:"sm",onClick:()=>N(c._id),className:c.isActive?"text-red-600 border-red-600":"text-green-600 border-green-600",children:c.isActive?e.jsx(dr,{className:"h-4 w-4"}):e.jsx(ws,{className:"h-4 w-4"})}),e.jsx(g,{variant:"outline",size:"sm",onClick:()=>Ie(c._id,c.name),className:"text-red-600 border-red-600",children:e.jsx(zr,{className:"h-4 w-4"})}),e.jsxs(be,{value:c.role,onValueChange:re=>X(c._id,re),children:[e.jsx(je,{className:"w-32",children:e.jsx(Ne,{})}),e.jsxs(we,{children:[e.jsx(P,{value:"student",children:"Student"}),e.jsx(P,{value:"faculty",children:"Faculty"}),e.jsx(P,{value:"admin",children:"Admin"})]})]})]})})]},c._id))})]})})]})]})}),$==="documents"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(U,{className:y?"bg-gray-800 border-gray-700":"bg-white",children:e.jsx(z,{className:"p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(ae,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Documents"}),e.jsx("p",{className:"text-xl font-bold",children:q.totalDocuments})]})]})})}),e.jsx(U,{className:y?"bg-gray-800 border-gray-700":"bg-white",children:e.jsx(z,{className:"p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:e.jsx(qe,{className:"h-5 w-5 text-yellow-600"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pending"}),e.jsx("p",{className:"text-xl font-bold",children:q.pendingDocuments})]})]})})}),e.jsx(U,{className:y?"bg-gray-800 border-gray-700":"bg-white",children:e.jsx(z,{className:"p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(ws,{className:"h-5 w-5 text-green-600"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Approved"}),e.jsx("p",{className:"text-xl font-bold",children:q.approvedDocuments})]})]})})}),e.jsx(U,{className:y?"bg-gray-800 border-gray-700":"bg-white",children:e.jsx(z,{className:"p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:e.jsx(tt,{className:"h-5 w-5 text-red-600"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Delayed"}),e.jsx("p",{className:"text-xl font-bold",children:q.delayedApprovals})]})]})})})]}),e.jsxs(U,{className:y?"bg-gray-800 border-gray-700":"bg-white",children:[e.jsx(te,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx(se,{children:"Document Management"}),e.jsx(oe,{children:"View, manage, and track all system documents"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(g,{variant:"outline",onClick:()=>xe(),children:[e.jsx(Se,{className:"h-4 w-4 mr-2"}),"Refresh"]}),e.jsxs(g,{variant:"outline",children:[e.jsx(Re,{className:"h-4 w-4 mr-2"}),"Export"]})]})]})}),e.jsxs(z,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(cr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(W,{placeholder:"Search documents by title, submitter, or workflow...",value:j,onChange:c=>f(c.target.value),className:"pl-10"})]})}),e.jsxs(be,{value:v,onValueChange:x,children:[e.jsx(je,{className:"w-full sm:w-48",children:e.jsx(Ne,{})}),e.jsxs(we,{children:[e.jsx(P,{value:"all",children:"All Status"}),e.jsx(P,{value:"pending",children:"Pending"}),e.jsx(P,{value:"approved",children:"Approved"}),e.jsx(P,{value:"rejected",children:"Rejected"})]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:`border-b ${y?"border-gray-700":"border-gray-200"}`,children:[e.jsx("th",{className:"text-left py-3 px-4",children:"Document"}),e.jsx("th",{className:"text-left py-3 px-4",children:"Submitter"}),e.jsx("th",{className:"text-left py-3 px-4",children:"Workflow"}),e.jsx("th",{className:"text-left py-3 px-4",children:"Status"}),e.jsx("th",{className:"text-left py-3 px-4",children:"Submitted"}),e.jsx("th",{className:"text-left py-3 px-4",children:"Days Pending"}),e.jsx("th",{className:"text-left py-3 px-4",children:"Actions"})]})}),e.jsx("tbody",{children:Le.map(c=>e.jsxs("tr",{className:`border-b ${y?"border-gray-700":"border-gray-200"} hover:bg-gray-50`,children:[e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:c.title}),e.jsx("p",{className:"text-sm text-gray-500",children:c.fileName})]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center mr-3",children:e.jsx(he,{className:"h-4 w-4 text-gray-600"})}),e.jsx("div",{children:e.jsx("p",{className:"text-sm font-medium",children:c.submittedBy})})]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:c.workflow}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Current: ",c.currentApprover]})]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx(ne,{className:$e(c.status),children:c.status})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("p",{className:"text-sm text-gray-500",children:new Date(c.submittedAt).toLocaleDateString()})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:`text-sm font-medium ${c.daysPending>7?"text-red-600":c.daysPending>3?"text-yellow-600":"text-green-600"}`,children:[c.daysPending," days"]}),c.daysPending>7&&e.jsx(tt,{className:"h-4 w-4 text-red-500"})]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(g,{variant:"outline",size:"sm",title:"View Document",children:e.jsx(Me,{className:"h-4 w-4"})}),e.jsx(g,{variant:"outline",size:"sm",title:"Download Document",children:e.jsx(Re,{className:"h-4 w-4"})}),c.status==="pending"&&e.jsx(g,{variant:"outline",size:"sm",className:"text-green-600 border-green-600",title:"Approve",children:e.jsx(ws,{className:"h-4 w-4"})}),c.status==="pending"&&e.jsx(g,{variant:"outline",size:"sm",className:"text-red-600 border-red-600",title:"Reject",children:e.jsx(dr,{className:"h-4 w-4"})}),e.jsx(g,{variant:"outline",size:"sm",title:"Archive Document",children:e.jsx(Ba,{className:"h-4 w-4"})})]})})]},c._id))})]})}),Le.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ae,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No documents found"}),e.jsx("p",{className:"text-gray-500",children:"Try adjusting your search or filter criteria."})]})]})]})]}),$==="workflows"&&e.jsx("div",{className:"space-y-6",children:e.jsxs(U,{className:y?"bg-gray-800 border-gray-700":"bg-white",children:[e.jsxs(te,{children:[e.jsxs(se,{className:"flex items-center gap-2",children:[e.jsx(es,{className:"h-5 w-5"}),"Workflow Management"]}),e.jsx(oe,{children:"Configure and manage document approval workflows"})]}),e.jsx(z,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-semibold text-lg",children:"Current Workflow"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-bold",children:"1"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Faculty Review"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Initial approval by assigned faculty"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[e.jsx("div",{className:"w-8 h-8 bg-green-500 text-white rounded-full flex items-center justify-center text-sm font-bold",children:"2"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"HOD Approval"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Department head review"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[e.jsx("div",{className:"w-8 h-8 bg-purple-500 text-white rounded-full flex items-center justify-center text-sm font-bold",children:"3"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Principal Approval"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Final institutional approval"})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-semibold text-lg",children:"Workflow Statistics"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"p-3 border rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium",children:"Active Workflows"}),e.jsx(ne,{variant:"secondary",children:"3"})]})}),e.jsx("div",{className:"p-3 border rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium",children:"Pending Documents"}),e.jsx(ne,{variant:"outline",children:l.filter(c=>c.status==="pending").length})]})}),e.jsx("div",{className:"p-3 border rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium",children:"Avg. Processing Time"}),e.jsx(ne,{variant:"outline",children:"2.3 days"})]})}),e.jsx("div",{className:"p-3 border rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium",children:"Completion Rate"}),e.jsx(ne,{className:"bg-green-500",children:"94.2%"})]})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-semibold text-lg",children:"Quick Actions"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(g,{className:"w-full justify-start",variant:"outline",onClick:()=>{s({title:"Workflow Test Started",description:"Testing workflow configuration..."})},children:[e.jsx(es,{className:"h-4 w-4 mr-2"}),"Test Workflow"]}),e.jsxs(g,{className:"w-full justify-start",variant:"outline",onClick:()=>{s({title:"Workflow Reset",description:"All pending documents have been reset to initial state"})},children:[e.jsx(Se,{className:"h-4 w-4 mr-2"}),"Reset Pending"]}),e.jsxs(g,{className:"w-full justify-start",variant:"outline",onClick:()=>{s({title:"Escalation Started",description:"Escalating overdue documents to next level"})},children:[e.jsx(tt,{className:"h-4 w-4 mr-2"}),"Escalate Overdue"]}),e.jsxs(g,{className:"w-full justify-start",variant:"outline",onClick:()=>{s({title:"Workflow Report Generated",description:"Downloading workflow performance report"})},children:[e.jsx(Re,{className:"h-4 w-4 mr-2"}),"Export Report"]})]})]})]})})]})}),$==="analytics"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Analytics Dashboard"}),e.jsx("p",{className:"text-gray-600",children:"System performance and usage statistics"})]}),e.jsxs(g,{variant:"outline",onClick:xe,className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"h-4 w-4"}),e.jsx("span",{children:"Refresh Data"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(U,{className:`${y?"bg-gray-800 border-gray-700":"bg-white"} cursor-pointer hover:shadow-lg transition-shadow`,onClick:()=>{s({title:"User Statistics",description:`Total Users: ${q.totalUsers}, Active: ${q.activeUsers}, Students: ${i.filter(c=>c.role==="student").length}, Faculty: ${i.filter(c=>c.role==="faculty").length}`})},children:e.jsx(z,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(ut,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Users"}),e.jsx("p",{className:"text-2xl font-bold",children:q.totalUsers}),e.jsx("p",{className:"text-xs text-green-600",children:"+12% from last month"})]})]})})}),e.jsx(U,{className:`${y?"bg-gray-800 border-gray-700":"bg-white"} cursor-pointer hover:shadow-lg transition-shadow`,onClick:()=>{s({title:"Document Statistics",description:`Total Documents: ${q.totalDocuments}, Pending: ${q.pendingDocuments}, Approved: ${q.approvedDocuments}, Rejected: ${q.rejectedDocuments}`})},children:e.jsx(z,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(ae,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Documents Processed"}),e.jsx("p",{className:"text-2xl font-bold",children:q.totalDocuments}),e.jsx("p",{className:"text-xs text-green-600",children:"+8% from last month"})]})]})})}),e.jsx(U,{className:y?"bg-gray-800 border-gray-700":"bg-white",children:e.jsx(z,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(Ot,{className:"h-6 w-6 text-purple-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Approval Rate"}),e.jsxs("p",{className:"text-2xl font-bold",children:[q.totalDocuments>0?Math.round(q.approvedDocuments/q.totalDocuments*100):0,"%"]}),e.jsx("p",{className:"text-xs text-green-600",children:"+3% from last month"})]})]})})}),e.jsx(U,{className:y?"bg-gray-800 border-gray-700":"bg-white",children:e.jsx(z,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:e.jsx(qe,{className:"h-6 w-6 text-orange-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Avg. Processing Time"}),e.jsx("p",{className:"text-2xl font-bold",children:"2.3 days"}),e.jsx("p",{className:"text-xs text-red-600",children:"+0.5 days from last month"})]})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(U,{className:y?"bg-gray-800 border-gray-700":"bg-white",children:[e.jsxs(te,{children:[e.jsx(se,{children:"Document Status Distribution"}),e.jsx(oe,{children:"Current status of all documents in the system"})]}),e.jsx(z,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full mr-3"}),e.jsx("span",{className:"text-sm",children:"Pending"})]}),e.jsx("span",{className:"text-sm font-medium",children:q.pendingDocuments})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full mr-3"}),e.jsx("span",{className:"text-sm",children:"Approved"})]}),e.jsx("span",{className:"text-sm font-medium",children:q.approvedDocuments})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full mr-3"}),e.jsx("span",{className:"text-sm",children:"Rejected"})]}),e.jsx("span",{className:"text-sm font-medium",children:q.rejectedDocuments})]})]})})]}),e.jsxs(U,{className:y?"bg-gray-800 border-gray-700":"bg-white",children:[e.jsxs(te,{children:[e.jsx(se,{children:"User Role Distribution"}),e.jsx(oe,{children:"Breakdown of users by role"})]}),e.jsx(z,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full mr-3"}),e.jsx("span",{className:"text-sm",children:"Students"})]}),e.jsx("span",{className:"text-sm font-medium",children:i.filter(c=>c.role==="student").length})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full mr-3"}),e.jsx("span",{className:"text-sm",children:"Faculty"})]}),e.jsx("span",{className:"text-sm font-medium",children:i.filter(c=>c.role==="faculty").length})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 bg-purple-500 rounded-full mr-3"}),e.jsx("span",{className:"text-sm",children:"Admins"})]}),e.jsx("span",{className:"text-sm font-medium",children:i.filter(c=>c.role==="admin").length})]})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(U,{className:y?"bg-gray-800 border-gray-700":"bg-white",children:[e.jsxs(te,{children:[e.jsx(se,{children:"Recent Activity"}),e.jsx(oe,{children:"Latest system activities and changes"})]}),e.jsx(z,{children:e.jsx("div",{className:"space-y-3",children:l.slice(0,5).map(c=>e.jsxs("div",{className:"flex items-center space-x-3 p-3 rounded-lg bg-gray-50",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${c.status==="approved"?"bg-green-500":c.status==="rejected"?"bg-red-500":"bg-yellow-500"}`}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:c.title}),e.jsxs("p",{className:"text-xs text-gray-500",children:[c.status," by ",c.submittedBy,"  ",new Date(c.submittedAt).toLocaleDateString()]})]})]},c._id))})})]}),e.jsxs(U,{className:y?"bg-gray-800 border-gray-700":"bg-white",children:[e.jsxs(te,{children:[e.jsx(se,{children:"Performance Metrics"}),e.jsx(oe,{children:"Key performance indicators"})]}),e.jsx(z,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"System Uptime"}),e.jsx("span",{className:"text-sm font-medium text-green-600",children:"99.9%"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Active Users Today"}),e.jsx("span",{className:"text-sm font-medium",children:q.activeUsers})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Documents Processed Today"}),e.jsx("span",{className:"text-sm font-medium",children:Math.floor(q.totalDocuments*.1)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Average Response Time"}),e.jsx("span",{className:"text-sm font-medium",children:"1.2s"})]})]})})]})]}),e.jsxs(U,{className:y?"bg-gray-800 border-gray-700":"bg-white",children:[e.jsxs(te,{children:[e.jsx(se,{children:"Reports & Export"}),e.jsx(oe,{children:"Generate and download system reports"})]}),e.jsx(z,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(g,{variant:"outline",className:"h-20 flex flex-col items-center justify-center",onClick:()=>{const c={totalUsers:q.totalUsers,activeUsers:q.activeUsers,students:i.filter(Q=>Q.role==="student").length,faculty:i.filter(Q=>Q.role==="faculty").length,admins:i.filter(Q=>Q.role==="admin").length,inactiveUsers:i.filter(Q=>!Q.isActive).length,lastUpdated:new Date().toISOString()},re=`User Report
Total Users,${c.totalUsers}
Active Users,${c.activeUsers}
Students,${c.students}
Faculty,${c.faculty}
Admins,${c.admins}
Inactive Users,${c.inactiveUsers}
Generated,${c.lastUpdated}`,u=new Blob([re],{type:"text/csv"}),F=window.URL.createObjectURL(u),_=document.createElement("a");_.href=F,_.download=`user-report-${new Date().toISOString().split("T")[0]}.csv`,_.click(),window.URL.revokeObjectURL(F),s({title:"User Report Generated",description:`Downloaded report for ${q.totalUsers} users`})},children:[e.jsx(Re,{className:"h-6 w-6 mb-2"}),e.jsx("span",{children:"User Report"})]}),e.jsxs(g,{variant:"outline",className:"h-20 flex flex-col items-center justify-center",onClick:()=>{const c={totalDocuments:q.totalDocuments,pendingDocuments:q.pendingDocuments,approvedDocuments:q.approvedDocuments,rejectedDocuments:q.rejectedDocuments,approvalRate:q.totalDocuments>0?Math.round(q.approvedDocuments/q.totalDocuments*100):0,lastUpdated:new Date().toISOString()},re=`Document Report
Total Documents,${c.totalDocuments}
Pending,${c.pendingDocuments}
Approved,${c.approvedDocuments}
Rejected,${c.rejectedDocuments}
Approval Rate,${c.approvalRate}%
Generated,${c.lastUpdated}`,u=new Blob([re],{type:"text/csv"}),F=window.URL.createObjectURL(u),_=document.createElement("a");_.href=F,_.download=`document-report-${new Date().toISOString().split("T")[0]}.csv`,_.click(),window.URL.revokeObjectURL(F),s({title:"Document Report Generated",description:`Downloaded report for ${q.totalDocuments} documents`})},children:[e.jsx(ae,{className:"h-6 w-6 mb-2"}),e.jsx("span",{children:"Document Report"})]}),e.jsxs(g,{variant:"outline",className:"h-20 flex flex-col items-center justify-center",onClick:()=>{const c={systemOverview:{totalUsers:q.totalUsers,activeUsers:q.activeUsers,totalDocuments:q.totalDocuments,pendingDocuments:q.pendingDocuments,approvedDocuments:q.approvedDocuments,rejectedDocuments:q.rejectedDocuments},userBreakdown:{students:i.filter(Q=>Q.role==="student").length,faculty:i.filter(Q=>Q.role==="faculty").length,admins:i.filter(Q=>Q.role==="admin").length,inactiveUsers:i.filter(Q=>!Q.isActive).length},performance:{approvalRate:q.totalDocuments>0?Math.round(q.approvedDocuments/q.totalDocuments*100):0,averageProcessingTime:"2.3 days",systemUptime:"99.9%"},lastUpdated:new Date().toISOString()},re=JSON.stringify(c,null,2),u=new Blob([re],{type:"application/json"}),F=window.URL.createObjectURL(u),_=document.createElement("a");_.href=F,_.download=`analytics-report-${new Date().toISOString().split("T")[0]}.json`,_.click(),window.URL.revokeObjectURL(F),s({title:"Analytics Report Generated",description:"Downloaded comprehensive analytics report"})},children:[e.jsx(Ot,{className:"h-6 w-6 mb-2"}),e.jsx("span",{children:"Analytics Report"})]})]})})]})]}),$==="settings"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(U,{className:y?"bg-gray-800 border-gray-700":"bg-white",children:e.jsx(z,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(qt,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"System Status"}),e.jsx("p",{className:"text-lg font-bold text-green-600",children:"Online"}),e.jsx("p",{className:"text-xs text-gray-500",children:"All services running"})]})]}),e.jsx(g,{variant:"outline",size:"sm",onClick:()=>{s({title:"System Check",description:"All systems are operational and running smoothly."})},children:"Check Status"})]})})}),e.jsx(U,{className:y?"bg-gray-800 border-gray-700":"bg-white",children:e.jsx(z,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(ut,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Sessions"}),e.jsx("p",{className:"text-lg font-bold",children:q.activeUsers}),e.jsx("p",{className:"text-xs text-gray-500",children:"Currently online"})]})]})})}),e.jsx(U,{className:y?"bg-gray-800 border-gray-700":"bg-white",children:e.jsx(z,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(Ot,{className:"h-6 w-6 text-purple-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Database Size"}),e.jsx("p",{className:"text-lg font-bold",children:"2.4 GB"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Storage used"})]})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(U,{className:y?"bg-gray-800 border-gray-700":"bg-white",children:[e.jsxs(te,{children:[e.jsx(se,{children:"General Settings"}),e.jsx(oe,{children:"Basic system configuration"})]}),e.jsxs(z,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"System Name"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Veltech Document Approval System"})]}),e.jsx(g,{variant:"outline",size:"sm",onClick:()=>{const c=prompt("Enter new system name:","Veltech Document Approval System");c&&c.trim()&&s({title:"System Name Updated",description:`System name changed to: ${c}`})},children:e.jsx(Mt,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Maintenance Mode"}),e.jsx("p",{className:"text-xs text-gray-500",children:"System maintenance toggle"})]}),e.jsx(g,{variant:"outline",size:"sm",onClick:()=>{const c=confirm("Enable maintenance mode? This will temporarily disable user access.");s(c?{title:"Maintenance Mode",description:"Maintenance mode enabled. Users will see maintenance page.",variant:"destructive"}:{title:"Maintenance Mode",description:"Maintenance mode remains disabled."})},children:"Disabled"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Auto Backup"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Daily database backups"})]}),e.jsx(g,{variant:"outline",size:"sm",className:"text-green-600 border-green-600",onClick:()=>{const c=confirm("Disable auto backup? This will stop daily database backups.");s(c?{title:"Auto Backup",description:"Auto backup disabled. Manual backups recommended.",variant:"destructive"}:{title:"Auto Backup",description:"Auto backup remains enabled."})},children:"Enabled"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Email Notifications"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Send email alerts"})]}),e.jsx(g,{variant:"outline",size:"sm",className:"text-green-600 border-green-600",onClick:()=>{const c=confirm("Disable email notifications? Users won't receive email alerts.");s(c?{title:"Email Notifications",description:"Email notifications disabled. Users won't receive alerts.",variant:"destructive"}:{title:"Email Notifications",description:"Email notifications remain enabled."})},children:"Enabled"})]})]})]}),e.jsxs(U,{className:y?"bg-gray-800 border-gray-700":"bg-white",children:[e.jsxs(te,{children:[e.jsx(se,{children:"Security Settings"}),e.jsx(oe,{children:"Authentication and security configuration"})]}),e.jsxs(z,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Password Policy"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Minimum 6 characters"})]}),e.jsx(g,{variant:"outline",size:"sm",onClick:()=>{const c=prompt("Enter new password policy (e.g., 'Minimum 8 characters with numbers'):","Minimum 6 characters");c&&c.trim()&&s({title:"Password Policy Updated",description:`New policy: ${c}`})},children:e.jsx(Mt,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Session Timeout"}),e.jsx("p",{className:"text-xs text-gray-500",children:"7 days"})]}),e.jsx(g,{variant:"outline",size:"sm",onClick:()=>{const c=prompt("Enter new session timeout (in days):","7");c&&!isNaN(Number(c))&&s({title:"Session Timeout Updated",description:`Session timeout changed to ${c} days`})},children:e.jsx(Mt,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Two-Factor Auth"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Optional for users"})]}),e.jsx(g,{variant:"outline",size:"sm",onClick:()=>{const c=confirm("Make Two-Factor Authentication mandatory for all users?");s(c?{title:"Two-Factor Auth",description:"2FA is now mandatory for all users",variant:"destructive"}:{title:"Two-Factor Auth",description:"2FA remains optional for users"})},children:e.jsx(Mt,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"IP Whitelist"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Restrict access by IP"})]}),e.jsx(g,{variant:"outline",size:"sm",onClick:()=>{if(confirm("Enable IP whitelist? This will restrict access to specific IP addresses.")){const re=prompt("Enter allowed IP addresses (comma-separated):","192.168.1.1, 10.0.0.1");re&&re.trim()&&s({title:"IP Whitelist Enabled",description:`Allowed IPs: ${re}`,variant:"destructive"})}else s({title:"IP Whitelist",description:"IP whitelist remains disabled"})},children:"Disabled"})]})]})]})]}),e.jsxs(U,{className:y?"bg-gray-800 border-gray-700":"bg-white",children:[e.jsxs(te,{children:[e.jsx(se,{children:"Workflow Configuration"}),e.jsx(oe,{children:"Configure document approval workflows and routing"})]}),e.jsx(z,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Default Approval Time"}),e.jsx("p",{className:"text-sm text-gray-500 mb-3",children:"Maximum days for document approval"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(W,{type:"number",defaultValue:"7",className:"w-20"}),e.jsx("span",{className:"text-sm",children:"days"})]}),e.jsx(g,{size:"sm",className:"mt-2",onClick:()=>{s({title:"Approval Time Updated",description:"Default approval time has been updated"})},children:"Update"})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Auto-Escalation"}),e.jsx("p",{className:"text-sm text-gray-500 mb-3",children:"Escalate pending documents"}),e.jsx(g,{variant:"outline",size:"sm",className:"text-green-600 border-green-600",onClick:()=>{s({title:"Auto-Escalation Toggled",description:"Auto-escalation has been enabled/disabled"})},children:"Enabled"})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Notification Frequency"}),e.jsx("p",{className:"text-sm text-gray-500 mb-3",children:"How often to send reminders"}),e.jsxs(be,{defaultValue:"daily",children:[e.jsx(je,{children:e.jsx(Ne,{})}),e.jsxs(we,{children:[e.jsx(P,{value:"hourly",children:"Hourly"}),e.jsx(P,{value:"daily",children:"Daily"}),e.jsx(P,{value:"weekly",children:"Weekly"})]})]}),e.jsx(g,{size:"sm",className:"mt-2",onClick:()=>{s({title:"Notification Frequency Updated",description:"Reminder frequency has been updated"})},children:"Update"})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Workflow Steps"}),e.jsx("p",{className:"text-sm text-gray-500 mb-3",children:"Configure approval steps"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Faculty Review"}),e.jsx(ne,{variant:"outline",children:"Required"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"HOD Approval"}),e.jsx(ne,{variant:"outline",children:"Required"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Principal Approval"}),e.jsx(ne,{variant:"outline",children:"Required"})]})]}),e.jsx(g,{size:"sm",className:"mt-2",onClick:()=>{s({title:"Workflow Steps Updated",description:"Approval workflow steps have been configured"})},children:"Configure"})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Priority Handling"}),e.jsx("p",{className:"text-sm text-gray-500 mb-3",children:"Handle urgent documents"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"High Priority"}),e.jsx(ne,{className:"bg-red-500",children:"24h"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Medium Priority"}),e.jsx(ne,{className:"bg-yellow-500",children:"3d"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Low Priority"}),e.jsx(ne,{className:"bg-green-500",children:"7d"})]})]}),e.jsx(g,{size:"sm",className:"mt-2",onClick:()=>{s({title:"Priority Settings Updated",description:"Document priority handling has been configured"})},children:"Update"})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Workflow Actions"}),e.jsx("p",{className:"text-sm text-gray-500 mb-3",children:"Manage workflow operations"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(g,{size:"sm",variant:"outline",className:"w-full justify-start",onClick:()=>{s({title:"Workflow Tested",description:"Workflow configuration has been tested successfully"})},children:[e.jsx(es,{className:"h-3 w-3 mr-2"}),"Test Workflow"]}),e.jsxs(g,{size:"sm",variant:"outline",className:"w-full justify-start",onClick:()=>{s({title:"Workflow Reset",description:"All workflows have been reset to default configuration"})},children:[e.jsx(Se,{className:"h-3 w-3 mr-2"}),"Reset Workflow"]})]})]})]})})]}),e.jsxs(U,{className:y?"bg-gray-800 border-gray-700":"bg-white",children:[e.jsxs(te,{children:[e.jsx(se,{children:"System Actions"}),e.jsx(oe,{children:"Administrative actions and maintenance"})]}),e.jsx(z,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(g,{variant:"outline",className:"h-20 flex flex-col items-center justify-center",onClick:()=>{confirm("Clear system cache? This will improve performance but may cause temporary slowdown.")&&s({title:"Cache Cleared",description:"System cache has been cleared successfully"})},children:[e.jsx(Se,{className:"h-6 w-6 mb-2"}),e.jsx("span",{children:"Clear Cache"})]}),e.jsxs(g,{variant:"outline",className:"h-20 flex flex-col items-center justify-center",onClick:()=>{if(confirm("Create database backup? This will download a backup file.")){const re={timestamp:new Date().toISOString(),users:i.length,documents:l.length,systemInfo:{version:"1.0.0",uptime:"99.9%",lastBackup:new Date().toISOString()}},u=JSON.stringify(re,null,2),F=new Blob([u],{type:"application/json"}),_=window.URL.createObjectURL(F),Q=document.createElement("a");Q.href=_,Q.download=`database-backup-${new Date().toISOString().split("T")[0]}.json`,Q.click(),window.URL.revokeObjectURL(_),s({title:"Database Backup Created",description:"Database backup has been downloaded successfully"})}},children:[e.jsx(Re,{className:"h-6 w-6 mb-2"}),e.jsx("span",{children:"Backup Database"})]}),e.jsxs(g,{variant:"outline",className:"h-20 flex flex-col items-center justify-center text-yellow-600 border-yellow-600",onClick:()=>{confirm("Enable maintenance mode? This will disable user access temporarily.")&&s({title:"Maintenance Mode Enabled",description:"System is now in maintenance mode. Users cannot access the system.",variant:"destructive"})},children:[e.jsx(qt,{className:"h-6 w-6 mb-2"}),e.jsx("span",{children:"Maintenance Mode"})]}),e.jsxs(g,{variant:"outline",className:"h-20 flex flex-col items-center justify-center text-red-600 border-red-600",onClick:()=>{confirm("Restart the system? This will cause temporary downtime.")&&s({title:"System Restart Initiated",description:"System restart has been initiated. Please wait for the system to come back online.",variant:"destructive"})},children:[e.jsx(tt,{className:"h-6 w-6 mb-2"}),e.jsx("span",{children:"System Restart"})]})]})})]})]})]})]}),B&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Add New User"}),e.jsx(g,{variant:"ghost",size:"sm",onClick:()=>S(!1),children:e.jsx(st,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(k,{htmlFor:"name",children:"Full Name *"}),e.jsx(W,{id:"name",value:E.name,onChange:c=>J({...E,name:c.target.value}),placeholder:"Enter full name"})]}),e.jsxs("div",{children:[e.jsx(k,{htmlFor:"email",children:"Email *"}),e.jsx(W,{id:"email",type:"email",value:E.email,onChange:c=>J({...E,email:c.target.value}),placeholder:"Enter email address"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(k,{htmlFor:"password",children:"Password *"}),e.jsx(W,{id:"password",type:"password",value:E.password,onChange:c=>J({...E,password:c.target.value}),placeholder:"Enter password"})]}),e.jsxs("div",{children:[e.jsx(k,{htmlFor:"role",children:"Role *"}),e.jsxs(be,{value:E.role,onValueChange:c=>J({...E,role:c}),children:[e.jsx(je,{children:e.jsx(Ne,{})}),e.jsxs(we,{children:[e.jsx(P,{value:"student",children:"Student"}),e.jsx(P,{value:"faculty",children:"Faculty"}),e.jsx(P,{value:"admin",children:"Admin"})]})]})]})]}),E.role==="student"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(k,{htmlFor:"vtuId",children:"VTU ID *"}),e.jsx(W,{id:"vtuId",value:E.vtuId,onChange:c=>J({...E,vtuId:c.target.value}),placeholder:"Enter VTU ID"})]}),e.jsxs("div",{children:[e.jsx(k,{htmlFor:"year",children:"Year"}),e.jsxs(be,{value:E.year,onValueChange:c=>J({...E,year:c}),children:[e.jsx(je,{children:e.jsx(Ne,{})}),e.jsxs(we,{children:[e.jsx(P,{value:"1",children:"1st Year"}),e.jsx(P,{value:"2",children:"2nd Year"}),e.jsx(P,{value:"3",children:"3rd Year"}),e.jsx(P,{value:"4",children:"4th Year"})]})]})]}),e.jsxs("div",{children:[e.jsx(k,{htmlFor:"semester",children:"Semester"}),e.jsxs(be,{value:E.semester,onValueChange:c=>J({...E,semester:c}),children:[e.jsx(je,{children:e.jsx(Ne,{})}),e.jsxs(we,{children:[e.jsx(P,{value:"1",children:"1st Semester"}),e.jsx(P,{value:"2",children:"2nd Semester"}),e.jsx(P,{value:"3",children:"3rd Semester"}),e.jsx(P,{value:"4",children:"4th Semester"}),e.jsx(P,{value:"5",children:"5th Semester"}),e.jsx(P,{value:"6",children:"6th Semester"}),e.jsx(P,{value:"7",children:"7th Semester"}),e.jsx(P,{value:"8",children:"8th Semester"})]})]})]})]}),E.role==="faculty"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(k,{htmlFor:"facultyId",children:"Faculty ID *"}),e.jsx(W,{id:"facultyId",value:E.facultyId,onChange:c=>J({...E,facultyId:c.target.value}),placeholder:"Enter faculty ID"})]}),e.jsxs("div",{children:[e.jsx(k,{htmlFor:"designation",children:"Designation"}),e.jsx(W,{id:"designation",value:E.designation,onChange:c=>J({...E,designation:c.target.value}),placeholder:"Enter designation"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(k,{htmlFor:"department",children:"Department"}),e.jsx(W,{id:"department",value:E.department,onChange:c=>J({...E,department:c.target.value}),placeholder:"Enter department"})]}),e.jsxs("div",{children:[e.jsx(k,{htmlFor:"phone",children:"Phone"}),e.jsx(W,{id:"phone",value:E.phone,onChange:c=>J({...E,phone:c.target.value}),placeholder:"Enter phone number"})]})]}),e.jsxs("div",{children:[e.jsx(k,{htmlFor:"address",children:"Address"}),e.jsx(W,{id:"address",value:E.address,onChange:c=>J({...E,address:c.target.value}),placeholder:"Enter address"})]}),E.role==="student"&&e.jsxs("div",{children:[e.jsx(k,{htmlFor:"specialization",children:"Specialization"}),e.jsx(W,{id:"specialization",value:E.specialization,onChange:c=>J({...E,specialization:c.target.value}),placeholder:"Enter specialization"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx(g,{variant:"outline",onClick:()=>S(!1),children:"Cancel"}),e.jsx(g,{onClick:G,disabled:ue,children:ue?e.jsxs(e.Fragment,{children:[e.jsx(Se,{className:"h-4 w-4 mr-2 animate-spin"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Es,{className:"h-4 w-4 mr-2"}),"Create User"]})})]})]})}),C&&D&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h2",{className:"text-xl font-bold",children:["Edit User: ",D.name]}),e.jsx(g,{variant:"ghost",size:"sm",onClick:()=>O(!1),children:e.jsx(st,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(k,{htmlFor:"edit-name",children:"Full Name *"}),e.jsx(W,{id:"edit-name",value:D.name,onChange:c=>A({...D,name:c.target.value}),placeholder:"Enter full name"})]}),e.jsxs("div",{children:[e.jsx(k,{htmlFor:"edit-email",children:"Email *"}),e.jsx(W,{id:"edit-email",type:"email",value:D.email,onChange:c=>A({...D,email:c.target.value}),placeholder:"Enter email address"})]})]}),e.jsxs("div",{children:[e.jsx(k,{htmlFor:"edit-role",children:"Role *"}),e.jsxs(be,{value:D.role,onValueChange:c=>A({...D,role:c}),children:[e.jsx(je,{children:e.jsx(Ne,{})}),e.jsxs(we,{children:[e.jsx(P,{value:"student",children:"Student"}),e.jsx(P,{value:"faculty",children:"Faculty"}),e.jsx(P,{value:"admin",children:"Admin"})]})]})]}),D.role==="student"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(k,{htmlFor:"edit-vtuId",children:"VTU ID *"}),e.jsx(W,{id:"edit-vtuId",value:D.vtuId||"",onChange:c=>A({...D,vtuId:c.target.value}),placeholder:"Enter VTU ID"})]}),e.jsxs("div",{children:[e.jsx(k,{htmlFor:"edit-year",children:"Year"}),e.jsxs(be,{value:D.year||"",onValueChange:c=>A({...D,year:c}),children:[e.jsx(je,{children:e.jsx(Ne,{})}),e.jsxs(we,{children:[e.jsx(P,{value:"1",children:"1st Year"}),e.jsx(P,{value:"2",children:"2nd Year"}),e.jsx(P,{value:"3",children:"3rd Year"}),e.jsx(P,{value:"4",children:"4th Year"})]})]})]}),e.jsxs("div",{children:[e.jsx(k,{htmlFor:"edit-semester",children:"Semester"}),e.jsxs(be,{value:D.semester||"",onValueChange:c=>A({...D,semester:c}),children:[e.jsx(je,{children:e.jsx(Ne,{})}),e.jsxs(we,{children:[e.jsx(P,{value:"1",children:"1st Semester"}),e.jsx(P,{value:"2",children:"2nd Semester"}),e.jsx(P,{value:"3",children:"3rd Semester"}),e.jsx(P,{value:"4",children:"4th Semester"}),e.jsx(P,{value:"5",children:"5th Semester"}),e.jsx(P,{value:"6",children:"6th Semester"}),e.jsx(P,{value:"7",children:"7th Semester"}),e.jsx(P,{value:"8",children:"8th Semester"})]})]})]})]}),D.role==="faculty"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(k,{htmlFor:"edit-facultyId",children:"Faculty ID *"}),e.jsx(W,{id:"edit-facultyId",value:D.facultyId||"",onChange:c=>A({...D,facultyId:c.target.value}),placeholder:"Enter faculty ID"})]}),e.jsxs("div",{children:[e.jsx(k,{htmlFor:"edit-designation",children:"Designation"}),e.jsx(W,{id:"edit-designation",value:D.designation||"",onChange:c=>A({...D,designation:c.target.value}),placeholder:"Enter designation"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(k,{htmlFor:"edit-department",children:"Department"}),e.jsx(W,{id:"edit-department",value:D.department||"",onChange:c=>A({...D,department:c.target.value}),placeholder:"Enter department"})]}),e.jsxs("div",{children:[e.jsx(k,{htmlFor:"edit-phone",children:"Phone"}),e.jsx(W,{id:"edit-phone",value:D.phone||"",onChange:c=>A({...D,phone:c.target.value}),placeholder:"Enter phone number"})]})]}),e.jsxs("div",{children:[e.jsx(k,{htmlFor:"edit-address",children:"Address"}),e.jsx(W,{id:"edit-address",value:D.address||"",onChange:c=>A({...D,address:c.target.value}),placeholder:"Enter address"})]}),D.role==="student"&&e.jsxs("div",{children:[e.jsx(k,{htmlFor:"edit-specialization",children:"Specialization"}),e.jsx(W,{id:"edit-specialization",value:D.specialization||"",onChange:c=>A({...D,specialization:c.target.value}),placeholder:"Enter specialization"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx(g,{variant:"outline",onClick:()=>O(!1),children:"Cancel"}),e.jsx(g,{onClick:fe,disabled:ue,children:ue?e.jsxs(e.Fragment,{children:[e.jsx(Se,{className:"h-4 w-4 mr-2 animate-spin"}),"Updating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Es,{className:"h-4 w-4 mr-2"}),"Update User"]})})]})]})})]})},Vl=()=>e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary/5 to-primary/10 p-4",children:e.jsxs("div",{className:"text-center max-w-md",children:[e.jsx("div",{className:"mx-auto w-24 h-24 bg-primary/10 rounded-full flex items-center justify-center mb-6",children:e.jsx(ae,{className:"h-12 w-12 text-primary"})}),e.jsx("h1",{className:"text-6xl font-bold text-foreground mb-4",children:"404"}),e.jsx("h2",{className:"text-2xl font-semibold text-foreground mb-4",children:"Page Not Found"}),e.jsx("p",{className:"text-muted-foreground mb-8",children:"The page you're looking for doesn't exist or has been moved."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx(g,{asChild:!0,variant:"outline",children:e.jsxs(ce,{to:"/",className:"flex items-center space-x-2",children:[e.jsx(Vt,{className:"h-4 w-4"}),e.jsx("span",{children:"Go Back"})]})}),e.jsx(g,{asChild:!0,children:e.jsxs(ce,{to:"/",className:"flex items-center space-x-2",children:[e.jsx(cs,{className:"h-4 w-4"}),e.jsx("span",{children:"Home"})]})})]})]})}),Gl=new fo,Cs=({children:r,allowedRole:t})=>{const{user:s,isAuthenticated:a}=Te();return a?t&&(s==null?void 0:s.role)!==t?e.jsx(nr,{to:"/",replace:!0}):e.jsx(e.Fragment,{children:r}):e.jsx(nr,{to:"/login",replace:!0})},Wl=()=>e.jsx(vl,{children:e.jsxs(Aa,{children:[e.jsx(Ve,{path:"/",element:e.jsx(bl,{})}),e.jsx(Ve,{path:"/login",element:e.jsx(jl,{})}),e.jsx(Ve,{path:"/admin-login",element:e.jsx(wl,{})}),e.jsx(Ve,{path:"/register",element:e.jsx(kl,{})}),e.jsx(Ve,{path:"/forgot-password",element:e.jsx(Dl,{})}),e.jsx(Ve,{path:"/reset-password",element:e.jsx(Cl,{})}),e.jsx(Ve,{path:"/student-dashboard",element:e.jsx(Cs,{allowedRole:"student",children:e.jsx(El,{})})}),e.jsx(Ve,{path:"/faculty-dashboard",element:e.jsx(Cs,{allowedRole:"faculty",children:e.jsx(Hl,{})})}),e.jsx(Ve,{path:"/admin-dashboard",element:e.jsx(Cs,{allowedRole:"admin",children:e.jsx(ql,{})})}),e.jsx(Ve,{path:"*",element:e.jsx(Vl,{})})]})}),Yl=()=>e.jsx(vo,{client:Gl,children:e.jsx(Qr,{children:e.jsxs(wo,{children:[e.jsx(Vi,{}),e.jsx(Gi,{}),e.jsx(bo,{children:e.jsx(gl,{children:e.jsx(Ca,{children:e.jsx(Wl,{})})})})]})})}),Ql=As.createRoot(document.getElementById("root"));Ql.render(e.jsx(as.StrictMode,{children:e.jsx(Yl,{})}));
